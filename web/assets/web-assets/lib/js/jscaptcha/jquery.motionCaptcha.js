// JS-Script (UM): jquery.motionCaptcha.js @ 2025-01-07 23:40:35 +0000
jQuery.fn.motionCaptcha||function(X){X.fn.motionCaptcha=function(y){var x=["triangle","x","rectangle","circle","check","caret","zigzag","arrow","leftbracket","rightbracket","v","delete","leftbrace","rightbrace","star","loop"];var k=0;return this.each(function(){var r=X.extend({},X.fn.motionCaptcha.defaults,y);r.canvasId="#"+r.canvasId.replace(/\#/g,"");var a,i=false;var e=X("body"),s=X(String(r.canvasId));var o=s.width(),h=s.height(),t=1*s.css("borderLeftWidth").replace("px",""),l=1*s.css("borderTopWidth").replace("px","");s[0].width=o;s[0].height=h;var c=s[0].getContext("2d");c.canvasWidth=o;c.canvasHeight=h;c.font=r.canvasFont;c.textAlign="left";var w=function(){if(k>=Number(r.maxTries)){s.addClass("mc-invalid");setTimeout(()=>{r.onCompletion(s,c,0)},500);return true}return false};s.on("refresh.motionCaptcha",function(){if(i){return false}i=1;k++;if(w()){return}c.clearRect(0,0,o,h);s.removeClass("mc-novalid mc-invalid mc-valid").attr("title",r.changeMsg);s.removeClass(String(x.join(" ")));s.addClass(x[Math.floor(Math.random()*x.length)]);i=0}).dblclick(function(){s.trigger("refresh")});s.addClass(x[Math.floor(Math.random()*x.length)]);var v=false,f=false,u=[],d=new C;a=new Y(c);var n=function(e){if(i){return false}e.preventDefault();var n=p(e),w=n[0],t=n[1];v=true;f=true;X("body").addClass("mc-noselect");c.clearRect(0,0,o,h);a.strokeStart(w,t);s.removeClass("mc-novalid mc-invalid mc-valid").attr("title",r.changeMsg);u=[new M(w,t)];return false};var g=function(e){if(f){return f=0}if(!i&&v){e.preventDefault();var n=p(e),w=n[0],t=n[1];u[u.length]=new M(w,t);a.stroke(w,t)}return false};var m=function(e){if(!i&&v){v=false;X("body").removeClass("mc-noselect");if(u.length>=10){var n=d.Recognize(u);if(s.attr("class").match(n.Name)&&n.Attainment>=Number(r.similarity)){i=1;setTimeout(a.destroy,500);s.addClass("mc-valid").attr("title","");c.fillStyle=r.canvasTextColor;c.fillText(r.completedMsg,10,24);r.onCompletion(s,c,n.Attainment)}else{k++;w();i=1;s.addClass("mc-novalid");c.fillStyle=r.canvasErrTextColor;c.fillText(r.warnMsg,10,24);setTimeout(function(){c.clearRect(0,0,o,h);s.removeClass("mc-novalid");i=0},1500);r.onError(s,c)}}else if(u.length>=5){k++;w();i=1;s.addClass("mc-invalid");c.fillStyle=r.canvasErrTextColor;c.fillText(r.errorMsg,10,24);setTimeout(function(){c.clearRect(0,0,o,h);s.removeClass("mc-invalid");i=0},1500);r.onError(s,c)}}return false};s.bind({mousedown:n,mousemove:g,mouseup:m});s[0].addEventListener("touchstart",n,false);s[0].addEventListener("touchmove",g,false);s[0].addEventListener("touchend",m,false);function p(e){var n,w;if(e.touches&&e.touches.length>0){n=e.touches[0].pageX-s.offset().left+t;w=e.touches[0].pageY-s.offset().top+l}else if(e.offsetX){n=e.offsetX-t;w=e.offsetY-l}else{n=e.pageX-s.offset().left-t;w=e.pageY-s.offset().top-l}return[n,w]}})};X.fn.motionCaptcha.defaults={canvasId:"#mc-canvas",similarity:.82,maxTries:7,canvasFont:"bold 10px mono",canvasTextColor:"#777777",canvasErrTextColor:"#EF4756",errorMsg:"Invalid draw ...",warnMsg:"Try again ...",completedMsg:"Done ...",changeMsg:"Double-Click to change the figure",onCompletion:function(e,n,w){return},onError:function(e,n){return}};function Y(e){this.init(e)}Y.prototype={ctx:null,X:null,Y:null,painters:null,interval:null,init:function(e){var n=this,w=2,t=[77,88,99];this.ctx=e;this.ctx.globalCompositeOperation="source-over";this.X=this.ctx.canvasWidth/2;this.Y=this.ctx.canvasHeight/2;this.painters=[];for(var r=0;r<38;r++){this.painters.push({dx:this.ctx.canvasWidth/2,dy:this.ctx.canvasHeight/2,ax:0,ay:0,div:.1,ease:Math.random()*.18+.6})}this.interval=setInterval(function(){a()},1e3/60);var a=function(){var e;n.ctx.lineWidth=w;n.ctx.strokeStyle="rgba("+t[0]+", "+t[1]+", "+t[2]+", "+.06+")";for(e=0;e<n.painters.length;e++){n.ctx.beginPath();n.ctx.moveTo(n.painters[e].dx,n.painters[e].dy);n.painters[e].dx-=n.painters[e].ax=(n.painters[e].ax+(n.painters[e].dx-n.X)*n.painters[e].div)*n.painters[e].ease;n.painters[e].dy-=n.painters[e].ay=(n.painters[e].ay+(n.painters[e].dy-n.Y)*n.painters[e].div)*n.painters[e].ease;n.ctx.lineTo(n.painters[e].dx,n.painters[e].dy);n.ctx.stroke()}}},destroy:function(){clearInterval(this.interval)},strokeStart:function(e,n){this.X=e;this.Y=n;for(var w=0;w<this.painters.length;w++){this.painters[w].dx=e;this.painters[w].dy=n}this.shouldDraw=true},stroke:function(e,n){this.X=e;this.Y=n}};function M(e,n){this.X=e;this.Y=n}function i(e,n,w,t){this.X=e;this.Y=n;this.Width=w;this.Height=t}function h(e,n){this.Name=e;this.Points=s(n,t);var w=o(this.Points);this.Points=d(this.Points,-w);this.Points=g(this.Points,r);this.Points=m(this.Points,a);this.Vector=p(this.Points)}function l(e,n,w){this.Name=e;this.Attainment=n;this.Time=w}var e=16;var t=64;var r=250;var a=new M(0,0);var n=Math.sqrt(r*r+r*r);var c=.5*n;var v=w(45);var f=w(2);var u=.5*(-1+Math.sqrt(5));function C(){this.Unistrokes=new Array(e);this.Unistrokes[0]=new h("triangle",new Array(new M(137,139),new M(135,141),new M(133,144),new M(132,146),new M(130,149),new M(128,151),new M(126,155),new M(123,160),new M(120,166),new M(116,171),new M(112,177),new M(107,183),new M(102,188),new M(100,191),new M(95,195),new M(90,199),new M(86,203),new M(82,206),new M(80,209),new M(75,213),new M(73,213),new M(70,216),new M(67,219),new M(64,221),new M(61,223),new M(60,225),new M(62,226),new M(65,225),new M(67,226),new M(74,226),new M(77,227),new M(85,229),new M(91,230),new M(99,231),new M(108,232),new M(116,233),new M(125,233),new M(134,234),new M(145,233),new M(153,232),new M(160,233),new M(170,234),new M(177,235),new M(179,236),new M(186,237),new M(193,238),new M(198,239),new M(200,237),new M(202,239),new M(204,238),new M(206,234),new M(205,230),new M(202,222),new M(197,216),new M(192,207),new M(186,198),new M(179,189),new M(174,183),new M(170,178),new M(164,171),new M(161,168),new M(154,160),new M(148,155),new M(143,150),new M(138,148),new M(136,148)));this.Unistrokes[1]=new h("x",new Array(new M(87,142),new M(89,145),new M(91,148),new M(93,151),new M(96,155),new M(98,157),new M(100,160),new M(102,162),new M(106,167),new M(108,169),new M(110,171),new M(115,177),new M(119,183),new M(123,189),new M(127,193),new M(129,196),new M(133,200),new M(137,206),new M(140,209),new M(143,212),new M(146,215),new M(151,220),new M(153,222),new M(155,223),new M(157,225),new M(158,223),new M(157,218),new M(155,211),new M(154,208),new M(152,200),new M(150,189),new M(148,179),new M(147,170),new M(147,158),new M(147,148),new M(147,141),new M(147,136),new M(144,135),new M(142,137),new M(140,139),new M(135,145),new M(131,152),new M(124,163),new M(116,177),new M(108,191),new M(100,206),new M(94,217),new M(91,222),new M(89,225),new M(87,226),new M(87,224)));this.Unistrokes[2]=new h("rectangle",new Array(new M(78,149),new M(78,153),new M(78,157),new M(78,160),new M(79,162),new M(79,164),new M(79,167),new M(79,169),new M(79,173),new M(79,178),new M(79,183),new M(80,189),new M(80,193),new M(80,198),new M(80,202),new M(81,208),new M(81,210),new M(81,216),new M(82,222),new M(82,224),new M(82,227),new M(83,229),new M(83,231),new M(85,230),new M(88,232),new M(90,233),new M(92,232),new M(94,233),new M(99,232),new M(102,233),new M(106,233),new M(109,234),new M(117,235),new M(123,236),new M(126,236),new M(135,237),new M(142,238),new M(145,238),new M(152,238),new M(154,239),new M(165,238),new M(174,237),new M(179,236),new M(186,235),new M(191,235),new M(195,233),new M(197,233),new M(200,233),new M(201,235),new M(201,233),new M(199,231),new M(198,226),new M(198,220),new M(196,207),new M(195,195),new M(195,181),new M(195,173),new M(195,163),new M(194,155),new M(192,145),new M(192,143),new M(192,138),new M(191,135),new M(191,133),new M(191,130),new M(190,128),new M(188,129),new M(186,129),new M(181,132),new M(173,131),new M(162,131),new M(151,132),new M(149,132),new M(138,132),new M(136,132),new M(122,131),new M(120,131),new M(109,130),new M(107,130),new M(90,132),new M(81,133),new M(76,133)));this.Unistrokes[3]=new h("circle",new Array(new M(127,141),new M(124,140),new M(120,139),new M(118,139),new M(116,139),new M(111,140),new M(109,141),new M(104,144),new M(100,147),new M(96,152),new M(93,157),new M(90,163),new M(87,169),new M(85,175),new M(83,181),new M(82,190),new M(82,195),new M(83,200),new M(84,205),new M(88,213),new M(91,216),new M(96,219),new M(103,222),new M(108,224),new M(111,224),new M(120,224),new M(133,223),new M(142,222),new M(152,218),new M(160,214),new M(167,210),new M(173,204),new M(178,198),new M(179,196),new M(182,188),new M(182,177),new M(178,167),new M(170,150),new M(163,138),new M(152,130),new M(143,129),new M(140,131),new M(129,136),new M(126,139)));this.Unistrokes[4]=new h("check",new Array(new M(91,185),new M(93,185),new M(95,185),new M(97,185),new M(100,188),new M(102,189),new M(104,190),new M(106,193),new M(108,195),new M(110,198),new M(112,201),new M(114,204),new M(115,207),new M(117,210),new M(118,212),new M(120,214),new M(121,217),new M(122,219),new M(123,222),new M(124,224),new M(126,226),new M(127,229),new M(129,231),new M(130,233),new M(129,231),new M(129,228),new M(129,226),new M(129,224),new M(129,221),new M(129,218),new M(129,212),new M(129,208),new M(130,198),new M(132,189),new M(134,182),new M(137,173),new M(143,164),new M(147,157),new M(151,151),new M(155,144),new M(161,137),new M(165,131),new M(171,122),new M(174,118),new M(176,114),new M(177,112),new M(177,114),new M(175,116),new M(173,118)));this.Unistrokes[5]=new h("caret",new Array(new M(79,245),new M(79,242),new M(79,239),new M(80,237),new M(80,234),new M(81,232),new M(82,230),new M(84,224),new M(86,220),new M(86,218),new M(87,216),new M(88,213),new M(90,207),new M(91,202),new M(92,200),new M(93,194),new M(94,192),new M(96,189),new M(97,186),new M(100,179),new M(102,173),new M(105,165),new M(107,160),new M(109,158),new M(112,151),new M(115,144),new M(117,139),new M(119,136),new M(119,134),new M(120,132),new M(121,129),new M(122,127),new M(124,125),new M(126,124),new M(129,125),new M(131,127),new M(132,130),new M(136,139),new M(141,154),new M(145,166),new M(151,182),new M(156,193),new M(157,196),new M(161,209),new M(162,211),new M(167,223),new M(169,229),new M(170,231),new M(173,237),new M(176,242),new M(177,244),new M(179,250),new M(181,255),new M(182,257)));this.Unistrokes[6]=new h("zigzag",new Array(new M(307,216),new M(333,186),new M(356,215),new M(375,186),new M(399,216),new M(418,186)));this.Unistrokes[7]=new h("arrow",new Array(new M(68,222),new M(70,220),new M(73,218),new M(75,217),new M(77,215),new M(80,213),new M(82,212),new M(84,210),new M(87,209),new M(89,208),new M(92,206),new M(95,204),new M(101,201),new M(106,198),new M(112,194),new M(118,191),new M(124,187),new M(127,186),new M(132,183),new M(138,181),new M(141,180),new M(146,178),new M(154,173),new M(159,171),new M(161,170),new M(166,167),new M(168,167),new M(171,166),new M(174,164),new M(177,162),new M(180,160),new M(182,158),new M(183,156),new M(181,154),new M(178,153),new M(171,153),new M(164,153),new M(160,153),new M(150,154),new M(147,155),new M(141,157),new M(137,158),new M(135,158),new M(137,158),new M(140,157),new M(143,156),new M(151,154),new M(160,152),new M(170,149),new M(179,147),new M(185,145),new M(192,144),new M(196,144),new M(198,144),new M(200,144),new M(201,147),new M(199,149),new M(194,157),new M(191,160),new M(186,167),new M(180,176),new M(177,179),new M(171,187),new M(169,189),new M(165,194),new M(164,196)));this.Unistrokes[8]=new h("leftbracket",new Array(new M(140,124),new M(138,123),new M(135,122),new M(133,123),new M(130,123),new M(128,124),new M(125,125),new M(122,124),new M(120,124),new M(118,124),new M(116,125),new M(113,125),new M(111,125),new M(108,124),new M(106,125),new M(104,125),new M(102,124),new M(100,123),new M(98,123),new M(95,124),new M(93,123),new M(90,124),new M(88,124),new M(85,125),new M(83,126),new M(81,127),new M(81,129),new M(82,131),new M(82,134),new M(83,138),new M(84,141),new M(84,144),new M(85,148),new M(85,151),new M(86,156),new M(86,160),new M(86,164),new M(86,168),new M(87,171),new M(87,175),new M(87,179),new M(87,182),new M(87,186),new M(88,188),new M(88,195),new M(88,198),new M(88,201),new M(88,207),new M(89,211),new M(89,213),new M(89,217),new M(89,222),new M(88,225),new M(88,229),new M(88,231),new M(88,233),new M(88,235),new M(89,237),new M(89,240),new M(89,242),new M(91,241),new M(94,241),new M(96,240),new M(98,239),new M(105,240),new M(109,240),new M(113,239),new M(116,240),new M(121,239),new M(130,240),new M(136,237),new M(139,237),new M(144,238),new M(151,237),new M(157,236),new M(159,237)));this.Unistrokes[9]=new h("rightbracket",new Array(new M(112,138),new M(112,136),new M(115,136),new M(118,137),new M(120,136),new M(123,136),new M(125,136),new M(128,136),new M(131,136),new M(134,135),new M(137,135),new M(140,134),new M(143,133),new M(145,132),new M(147,132),new M(149,132),new M(152,132),new M(153,134),new M(154,137),new M(155,141),new M(156,144),new M(157,152),new M(158,161),new M(160,170),new M(162,182),new M(164,192),new M(166,200),new M(167,209),new M(168,214),new M(168,216),new M(169,221),new M(169,223),new M(169,228),new M(169,231),new M(166,233),new M(164,234),new M(161,235),new M(155,236),new M(147,235),new M(140,233),new M(131,233),new M(124,233),new M(117,235),new M(114,238),new M(112,238)));this.Unistrokes[10]=new h("v",new Array(new M(89,164),new M(90,162),new M(92,162),new M(94,164),new M(95,166),new M(96,169),new M(97,171),new M(99,175),new M(101,178),new M(103,182),new M(106,189),new M(108,194),new M(111,199),new M(114,204),new M(117,209),new M(119,214),new M(122,218),new M(124,222),new M(126,225),new M(128,228),new M(130,229),new M(133,233),new M(134,236),new M(136,239),new M(138,240),new M(139,242),new M(140,244),new M(142,242),new M(142,240),new M(142,237),new M(143,235),new M(143,233),new M(145,229),new M(146,226),new M(148,217),new M(149,208),new M(149,205),new M(151,196),new M(151,193),new M(153,182),new M(155,172),new M(157,165),new M(159,160),new M(162,155),new M(164,150),new M(165,148),new M(166,146)));this.Unistrokes[11]=new h("delete",new Array(new M(123,129),new M(123,131),new M(124,133),new M(125,136),new M(127,140),new M(129,142),new M(133,148),new M(137,154),new M(143,158),new M(145,161),new M(148,164),new M(153,170),new M(158,176),new M(160,178),new M(164,183),new M(168,188),new M(171,191),new M(175,196),new M(178,200),new M(180,202),new M(181,205),new M(184,208),new M(186,210),new M(187,213),new M(188,215),new M(186,212),new M(183,211),new M(177,208),new M(169,206),new M(162,205),new M(154,207),new M(145,209),new M(137,210),new M(129,214),new M(122,217),new M(118,218),new M(111,221),new M(109,222),new M(110,219),new M(112,217),new M(118,209),new M(120,207),new M(128,196),new M(135,187),new M(138,183),new M(148,167),new M(157,153),new M(163,145),new M(165,142),new M(172,133),new M(177,127),new M(179,127),new M(180,125)));this.Unistrokes[12]=new h("leftbrace",new Array(new M(150,116),new M(147,117),new M(145,116),new M(142,116),new M(139,117),new M(136,117),new M(133,118),new M(129,121),new M(126,122),new M(123,123),new M(120,125),new M(118,127),new M(115,128),new M(113,129),new M(112,131),new M(113,134),new M(115,134),new M(117,135),new M(120,135),new M(123,137),new M(126,138),new M(129,140),new M(135,143),new M(137,144),new M(139,147),new M(141,149),new M(140,152),new M(139,155),new M(134,159),new M(131,161),new M(124,166),new M(121,166),new M(117,166),new M(114,167),new M(112,166),new M(114,164),new M(116,163),new M(118,163),new M(120,162),new M(122,163),new M(125,164),new M(127,165),new M(129,166),new M(130,168),new M(129,171),new M(127,175),new M(125,179),new M(123,184),new M(121,190),new M(120,194),new M(119,199),new M(120,202),new M(123,207),new M(127,211),new M(133,215),new M(142,219),new M(148,220),new M(151,221)));this.Unistrokes[13]=new h("rightbrace",new Array(new M(117,132),new M(115,132),new M(115,129),new M(117,129),new M(119,128),new M(122,127),new M(125,127),new M(127,127),new M(130,127),new M(133,129),new M(136,129),new M(138,130),new M(140,131),new M(143,134),new M(144,136),new M(145,139),new M(145,142),new M(145,145),new M(145,147),new M(145,149),new M(144,152),new M(142,157),new M(141,160),new M(139,163),new M(137,166),new M(135,167),new M(133,169),new M(131,172),new M(128,173),new M(126,176),new M(125,178),new M(125,180),new M(125,182),new M(126,184),new M(128,187),new M(130,187),new M(132,188),new M(135,189),new M(140,189),new M(145,189),new M(150,187),new M(155,186),new M(157,185),new M(159,184),new M(156,185),new M(154,185),new M(149,185),new M(145,187),new M(141,188),new M(136,191),new M(134,191),new M(131,192),new M(129,193),new M(129,195),new M(129,197),new M(131,200),new M(133,202),new M(136,206),new M(139,211),new M(142,215),new M(145,220),new M(147,225),new M(148,231),new M(147,239),new M(144,244),new M(139,248),new M(134,250),new M(126,253),new M(119,253),new M(115,253)));this.Unistrokes[14]=new h("star",new Array(new M(75,250),new M(75,247),new M(77,244),new M(78,242),new M(79,239),new M(80,237),new M(82,234),new M(82,232),new M(84,229),new M(85,225),new M(87,222),new M(88,219),new M(89,216),new M(91,212),new M(92,208),new M(94,204),new M(95,201),new M(96,196),new M(97,194),new M(98,191),new M(100,185),new M(102,178),new M(104,173),new M(104,171),new M(105,164),new M(106,158),new M(107,156),new M(107,152),new M(108,145),new M(109,141),new M(110,139),new M(112,133),new M(113,131),new M(116,127),new M(117,125),new M(119,122),new M(121,121),new M(123,120),new M(125,122),new M(125,125),new M(127,130),new M(128,133),new M(131,143),new M(136,153),new M(140,163),new M(144,172),new M(145,175),new M(151,189),new M(156,201),new M(161,213),new M(166,225),new M(169,233),new M(171,236),new M(174,243),new M(177,247),new M(178,249),new M(179,251),new M(180,253),new M(180,255),new M(179,257),new M(177,257),new M(174,255),new M(169,250),new M(164,247),new M(160,245),new M(149,238),new M(138,230),new M(127,221),new M(124,220),new M(112,212),new M(110,210),new M(96,201),new M(84,195),new M(74,190),new M(64,182),new M(55,175),new M(51,172),new M(49,170),new M(51,169),new M(56,169),new M(66,169),new M(78,168),new M(92,166),new M(107,164),new M(123,161),new M(140,162),new M(156,162),new M(171,160),new M(173,160),new M(186,160),new M(195,160),new M(198,161),new M(203,163),new M(208,163),new M(206,164),new M(200,167),new M(187,172),new M(174,179),new M(172,181),new M(153,192),new M(137,201),new M(123,211),new M(112,220),new M(99,229),new M(90,237),new M(80,244),new M(73,250),new M(69,254),new M(69,252)));this.Unistrokes[15]=new h("loop",new Array(new M(81,219),new M(84,218),new M(86,220),new M(88,220),new M(90,220),new M(92,219),new M(95,220),new M(97,219),new M(99,220),new M(102,218),new M(105,217),new M(107,216),new M(110,216),new M(113,214),new M(116,212),new M(118,210),new M(121,208),new M(124,205),new M(126,202),new M(129,199),new M(132,196),new M(136,191),new M(139,187),new M(142,182),new M(144,179),new M(146,174),new M(148,170),new M(149,168),new M(151,162),new M(152,160),new M(152,157),new M(152,155),new M(152,151),new M(152,149),new M(152,146),new M(149,142),new M(148,139),new M(145,137),new M(141,135),new M(139,135),new M(134,136),new M(130,140),new M(128,142),new M(126,145),new M(122,150),new M(119,158),new M(117,163),new M(115,170),new M(114,175),new M(117,184),new M(120,190),new M(125,199),new M(129,203),new M(133,208),new M(138,213),new M(145,215),new M(155,218),new M(164,219),new M(166,219),new M(177,219),new M(182,218),new M(192,216),new M(196,213),new M(199,212),new M(201,211)));this.Recognize=function(e,n){var w=Date.now();var t=new h("",e);var r=-1;var a=+Infinity;for(var i=0;i<this.Unistrokes.length;i++){var s;if(n){s=y(this.Unistrokes[i].Vector,t.Vector)}else{s=x(t.Points,this.Unistrokes[i],-v,+v,f)}if(s<a){a=s;r=i}}var o=Date.now();return r==-1?new l("No match.",0,o-w):new l(this.Unistrokes[r].Name,n?1-a:1-a/c,o-w)};this.AddGesture=function(e,n){this.Unistrokes[this.Unistrokes.length]=new h(e,n);var w=0;for(var t=0;t<this.Unistrokes.length;t++){if(this.Unistrokes[t].Name==e){w++}}return w};this.DeleteUserGestures=function(){this.Unistrokes.length=e;return e}}function s(e,n){var w=T(e)/(n-1);var t=0;var r=new Array(e[0]);for(var a=1;a<e.length;a++){var i=I(e[a-1],e[a]);if(t+i>=w){var s=e[a-1].X+(w-t)/i*(e[a].X-e[a-1].X);var o=e[a-1].Y+(w-t)/i*(e[a].Y-e[a-1].Y);var h=new M(s,o);r[r.length]=h;e.splice(a,0,h);t=0}else{t+=i}}if(r.length==n-1){r[r.length]=new M(e[e.length-1].X,e[e.length-1].Y)}return r}function o(e){var n=A(e);return Math.atan2(n.Y-e[0].Y,n.X-e[0].X)}function d(e,n){var w=A(e);var t=Math.cos(n);var r=Math.sin(n);var a=new Array;for(var i=0;i<e.length;i++){var s=(e[i].X-w.X)*t-(e[i].Y-w.Y)*r+w.X;var o=(e[i].X-w.X)*r+(e[i].Y-w.Y)*t+w.Y;a[a.length]=new M(s,o)}return a}function g(e,n){var w=U(e);var t=new Array;for(var r=0;r<e.length;r++){var a=e[r].X*(n/w.Width);var i=e[r].Y*(n/w.Height);t[t.length]=new M(a,i)}return t}function m(e,n){var w=A(e);var t=new Array;for(var r=0;r<e.length;r++){var a=e[r].X+n.X-w.X;var i=e[r].Y+n.Y-w.Y;t[t.length]=new M(a,i)}return t}function p(e){var n=0;var w=new Array;for(var t=0;t<e.length;t++){w[w.length]=e[t].X;w[w.length]=e[t].Y;n+=e[t].X*e[t].X+e[t].Y*e[t].Y}var r=Math.sqrt(n);for(var t=0;t<w.length;t++){w[t]/=r}return w}function y(e,n){var w=0;var t=0;for(var r=0;r<e.length;r+=2){w+=e[r]*n[r]+e[r+1]*n[r+1];t+=e[r]*n[r+1]-e[r+1]*n[r]}var a=Math.atan(t/w);return Math.acos(w*Math.cos(a)+t*Math.sin(a))}function x(e,n,w,t,r){var a=u*w+(1-u)*t;var i=k(e,n,a);var s=(1-u)*w+u*t;var o=k(e,n,s);while(Math.abs(t-w)>r){if(i<o){t=s;s=a;o=i;a=u*w+(1-u)*t;i=k(e,n,a)}else{w=a;a=s;i=o;s=(1-u)*w+u*t;o=k(e,n,s)}}return Math.min(i,o)}function k(e,n,w){var t=d(e,w);return b(t,n.Points)}function A(e){var n=0,w=0;for(var t=0;t<e.length;t++){n+=e[t].X;w+=e[t].Y}n/=e.length;w/=e.length;return new M(n,w)}function U(e){var n=+Infinity,w=-Infinity,t=+Infinity,r=-Infinity;for(var a=0;a<e.length;a++){n=Math.min(n,e[a].X);t=Math.min(t,e[a].Y);w=Math.max(w,e[a].X);r=Math.max(r,e[a].Y)}return new i(n,t,w-n,r-t)}function b(e,n){var w=0;for(var t=0;t<e.length;t++){w+=I(e[t],n[t])}return w/e.length}function T(e){var n=0;for(var w=1;w<e.length;w++){n+=I(e[w-1],e[w])}return n}function I(e,n){var w=n.X-e.X;var t=n.Y-e.Y;return Math.sqrt(w*w+t*t)}function w(e){return e*Math.PI/180}}(jQuery);
// #END
