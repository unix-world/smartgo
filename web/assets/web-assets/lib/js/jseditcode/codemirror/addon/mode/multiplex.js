// JS-Script (UM): multiplex.js @ 2025-02-15 03:03:22 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(p){"use strict";p.multiplexingMode=function(v){var d=Array.prototype.slice.call(arguments,1);function m(e,n,i,t){if(typeof n=="string"){var r=e.indexOf(n,i);return t&&r>-1?r+n.length:r}var o=n.exec(i?e.slice(i):e);return o?o.index+i+(t?o[0].length:0):-1}return{startState:function(){return{outer:p.startState(v),innerActive:null,inner:null,startingInner:false}},copyState:function(e){return{outer:p.copyState(v,e.outer),innerActive:e.innerActive,inner:e.innerActive&&p.copyState(e.innerActive.mode,e.inner),startingInner:e.startingInner}},token:function(e,n){if(!n.innerActive){var i=Infinity,t=e.string;for(var r=0;r<d.length;++r){var o=d[r];var l=m(t,o.open,e.pos);if(l==e.pos){if(!o.parseDelimiters){e.match(o.open)}n.startingInner=!!o.parseDelimiters;n.innerActive=o;var s=0;if(v.indent){var c=v.indent(n.outer,"","");if(c!==p.Pass){s=c}}n.inner=p.startState(o.mode,s);return o.delimStyle&&o.delimStyle+" "+o.delimStyle+"-open"}else if(l!=-1&&l<i){i=l}}if(i!=Infinity){e.string=t.slice(0,i)}var a=v.token(e,n.outer);if(i!=Infinity){e.string=t}return a}else{var f=n.innerActive,t=e.string;if(!f.close&&e.sol()){n.innerActive=n.inner=null;return this.token(e,n)}var l=f.close&&!n.startingInner?m(t,f.close,e.pos,f.parseDelimiters):-1;if(l==e.pos&&!f.parseDelimiters){e.match(f.close);n.innerActive=n.inner=null;return f.delimStyle&&f.delimStyle+" "+f.delimStyle+"-close"}if(l>-1){e.string=t.slice(0,l)}var u=f.mode.token(e,n.inner);if(l>-1){e.string=t}else if(e.pos>e.start){n.startingInner=false}if(l==e.pos&&f.parseDelimiters){n.innerActive=n.inner=null}if(f.innerStyle){if(u){u=u+" "+f.innerStyle}else{u=f.innerStyle}}return u}},indent:function(e,n,i){var t=e.innerActive?e.innerActive.mode:v;if(!t.indent){return p.Pass}return t.indent(e.innerActive?e.inner:e.outer,n,i)},blankLine:function(e){var n=e.innerActive?e.innerActive.mode:v;if(n.blankLine){n.blankLine(e.innerActive?e.inner:e.outer)}if(!e.innerActive){for(var i=0;i<d.length;++i){var t=d[i];if(t.open==="\n"){e.innerActive=t;e.inner=p.startState(t.mode,n.indent?n.indent(e.outer,"",""):0)}}}else if(e.innerActive.close==="\n"){e.innerActive=e.inner=null}},electricChars:v.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:v}}}}});
// #END
