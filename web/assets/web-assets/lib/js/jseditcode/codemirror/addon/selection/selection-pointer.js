// JS-Script (UM): selection-pointer.js @ 2025-01-07 23:40:29 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(i){"use strict";i.defineOption("selectionPointer",false,function(t,e){var o=t.state.selectionPointer;if(o){i.off(t.getWrapperElement(),"mousemove",o.mousemove);i.off(t.getWrapperElement(),"mouseout",o.mouseout);i.off(window,"scroll",o.windowScroll);t.off("cursorActivity",s);t.off("scroll",s);t.state.selectionPointer=null;t.display.lineDiv.style.cursor=""}if(e){o=t.state.selectionPointer={value:typeof e=="string"?e:"default",mousemove:function(e){n(t,e)},mouseout:function(e){l(t,e)},windowScroll:function(){s(t)},rects:null,mouseX:null,mouseY:null,willUpdate:false};i.on(t.getWrapperElement(),"mousemove",o.mousemove);i.on(t.getWrapperElement(),"mouseout",o.mouseout);i.on(window,"scroll",o.windowScroll);t.on("cursorActivity",s);t.on("scroll",s)}});function n(e,t){var o=e.state.selectionPointer;if(t.buttons==null?t.which:t.buttons){o.mouseX=o.mouseY=null}else{o.mouseX=t.clientX;o.mouseY=t.clientY}r(e)}function l(e,t){if(!e.getWrapperElement().contains(t.relatedTarget)){var o=e.state.selectionPointer;o.mouseX=o.mouseY=null;r(e)}}function s(e){e.state.selectionPointer.rects=null;r(e)}function r(e){if(!e.state.selectionPointer.willUpdate){e.state.selectionPointer.willUpdate=true;setTimeout(function(){t(e);e.state.selectionPointer.willUpdate=false},50)}}function t(e){var t=e.state.selectionPointer;if(!t){return}if(t.rects==null&&t.mouseX!=null){t.rects=[];if(e.somethingSelected()){for(var o=e.display.selectionDiv.firstChild;o;o=o.nextSibling){t.rects.push(o.getBoundingClientRect())}}}var i=false;if(t.mouseX!=null){for(var n=0;n<t.rects.length;n++){var l=t.rects[n];if(l.left<=t.mouseX&&l.right>=t.mouseX&&l.top<=t.mouseY&&l.bottom>=t.mouseY){i=true}}}var s=i?t.value:"";if(e.display.lineDiv.style.cursor!=s){e.display.lineDiv.style.cursor=s}}});
// #END
