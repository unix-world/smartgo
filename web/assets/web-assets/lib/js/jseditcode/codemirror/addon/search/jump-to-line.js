// JS-Script (UM): jump-to-line.js @ 2025-01-07 23:40:27 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"),require("../dialog/dialog"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../dialog/dialog"],e)}else{e(CodeMirror)}})(function(e){"use strict";e.defineOption("search",{bottom:false});function o(e,o,r,t,i){if(e.openDialog){e.openDialog(o,i,{value:t,selectValueOnOpen:true,bottom:e.options.search.bottom})}else{i(prompt(r,t))}}function r(e){return e.phrase("Jump to line:")+' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use line:column or scroll% syntax)")+"</span>"}function s(e,o){var r=Number(o);if(/^[-+]/.test(o)){return e.getCursor().line+r}else{return r-1}}e.commands.jumpToLine=function(t){var i=t.getCursor();o(t,r(t),t.phrase("Jump to line:"),i.line+1+":"+i.ch,function(e){if(!e){return}var o;if(o=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(e)){t.setCursor(s(t,o[1]),Number(o[2]))}else if(o=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(e)){var r=Math.round(t.lineCount()*Number(o[1])/100);if(/^[-+]/.test(o[1])){r=i.line+r+1}t.setCursor(r-1,i.ch)}else if(o=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(e)){t.setCursor(s(t,o[1]),i.ch)}})};e.keyMap["default"]["Alt-G"]="jumpToLine"});
// #END
