// JS-Script (UM): continuecomment.js @ 2025-02-15 03:03:22 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(g){var i=/\S/g;var C=String.prototype.repeat||function(e){return Array(e+1).join(this)};function l(n){if(n.getOption("disableInput")){return g.Pass}var t=n.listSelections(),e,i=[];for(var o=0;o<t.length;o++){var l=t[o].head;if(!/\bcomment\b/.test(n.getTokenTypeAt(l))){return g.Pass}var r=n.getModeAt(l);if(!e){e=r}else if(e!=r){return g.Pass}var f=null,c,a;var s=e.blockCommentStart,m=e.lineComment;if(s&&e.blockCommentContinue){c=n.getLine(l.line);var u=c.lastIndexOf(e.blockCommentEnd,l.ch-e.blockCommentEnd.length);if(u!=-1&&u==l.ch-e.blockCommentEnd.length||m&&(a=c.lastIndexOf(m,l.ch-1))>-1&&/\bcomment\b/.test(n.getTokenTypeAt({line:l.line,ch:a+1}))){}else if(l.ch>=s.length&&(a=c.lastIndexOf(s,l.ch-s.length))>-1&&a>u){if(v(0,c)>=a){f=c.slice(0,a)}else{var d=n.options.tabSize,p;a=g.countColumn(c,a,d);f=!n.options.indentWithTabs?C.call(" ",a):C.call("\t",p=Math.floor(a/d))+C.call(" ",a-d*p)}}else if((a=c.indexOf(e.blockCommentContinue))>-1&&a<=l.ch&&a<=v(0,c)){f=c.slice(0,a)}if(f!=null){f+=e.blockCommentContinue}}if(f==null&&m&&y(n)){if(c==null){c=n.getLine(l.line)}a=c.indexOf(m);if(!l.ch&&!a){f=""}else if(a>-1&&v(0,c)>=a){f=v(l.ch,c)>-1;if(!f){var h=n.getLine(l.line+1)||"",b=h.indexOf(m);f=b>-1&&v(0,h)>=b||null}if(f){f=c.slice(0,a)+m+c.slice(a+m.length).match(/^\s*/)[0]}}}if(f==null){return g.Pass}i[o]="\n"+f}n.operation(function(){for(var e=t.length-1;e>=0;e--){n.replaceRange(i[e],t[e].from(),t[e].to(),"+insert")}})}function v(e,n){i.lastIndex=e;var t=i.exec(n);return t?t.index:-1}function y(e){var n=e.getOption("continueComments");if(n&&typeof n=="object"){return n.continueLineComment!==false}return true}g.defineOption("continueComments",null,function(e,n,t){if(t&&t!=g.Init){e.removeKeyMap("continueComment")}if(n){var i="Enter";if(typeof n=="string"){i=n}else if(typeof n=="object"&&n.key){i=n.key}var o={name:"continueComment"};o[i]=l;e.addKeyMap(o)}})});
// #END
