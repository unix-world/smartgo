// JS-Script (UM): mbox.js @ 2024-12-16 18:40:05 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(e){"use strict";var r=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var t=["Date","Subject","Comments","Keywords","Resent-Date"];e.registerHelper("hintWords","mbox",r.concat(t));var i=/^[ \t]/;var o=/^From /;var s=new RegExp("^("+r.join("|")+"): ");var d=new RegExp("^("+t.join("|")+"): ");var u=/^[^:]+:/;var f=/^[^ ]+@[^ ]+/;var l=/^.*?(?=[^ ]+?@[^ ]+)/;var c=/^<.*?>/;var m=/^.*?(?=<.*>)/;function p(e){if(e==="Subject"){return"header"}return"string"}function n(e,r){if(e.sol()){r.inSeparator=false;if(r.inHeader&&e.match(i)){return null}else{r.inHeader=false;r.header=null}if(e.match(o)){r.inHeaders=true;r.inSeparator=true;return"atom"}var t;var n=false;if((t=e.match(d))||(n=true)&&(t=e.match(s))){r.inHeaders=true;r.inHeader=true;r.emailPermitted=n;r.header=t[1];return"atom"}if(r.inHeaders&&(t=e.match(u))){r.inHeader=true;r.emailPermitted=true;r.header=t[1];return"atom"}r.inHeaders=false;e.skipToEnd();return null}if(r.inSeparator){if(e.match(f)){return"link"}if(e.match(l)){return"atom"}e.skipToEnd();return"atom"}if(r.inHeader){var a=p(r.header);if(r.emailPermitted){if(e.match(c)){return a+" link"}if(e.match(m)){return a}}e.skipToEnd();return a}e.skipToEnd();return null}e.defineMode("mbox",function(){return{startState:function(){return{inSeparator:false,inHeader:false,emailPermitted:false,header:null,inHeaders:false}},token:n,blankLine:function(e){e.inHeaders=e.inSeparator=e.inHeader=false}}});e.defineMIME("application/mbox","mbox")});
// #END
