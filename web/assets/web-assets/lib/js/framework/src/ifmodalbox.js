// JS-Script (UM): ifmodalbox.js @ 2025-02-15 03:03:25 +0000
const smartJ$ModalBox=new class{constructor(){const s="smartJ$ModalBox";const t="r.20250214";const e=this;const i=console;let o=false;e.secureClass=()=>{if(o===true){i.warn(s,"Class is already SECURED")}else{o=true;Object.freeze(e)}};const c=jQuery;const n=typeof smartJ$Options!="undefined"&&smartJ$Options&&typeof smartJ$Options==="object"&&smartJ$Options.ModalBox!=undefined&&typeof smartJ$Options.ModalBox==="object"?smartJ$Options.ModalBox:null;const f=smartJ$Utils;let p="";let r=0;let l="";let m=200;let d=100;let a=null;const u="smart__iFModalBox_";const h=u+"_iFrame";const g=u+"_Bg";const x=u+"_Div";const b=u+"_X";const _=u+"_Ldr";const y="[X]";let w=n&&!!n.UseProtection?1:0;const v=n&&typeof n.LoaderImg=="string"&&n.LoaderImg?f.stringTrim(n.LoaderImg):"lib/js/framework/img/loading.svg";const C=n&&typeof n.LoaderBlank=="string"&&n.LoaderBlank?f.stringTrim(n.LoaderBlank):"lib/js/framework/loading.html";const O=n&&typeof n.CloseImg=="string"&&n.CloseImg?f.stringTrim(n.CloseImg):"lib/js/framework/img/close.svg";const B=n&&n.CloseAlign==="left"?"left":"right";const I=n&&typeof n.CloseBtnAltHtml=="string"&&n.CloseBtnAltHtml?f.stringTrim(n.CloseBtnAltHtml):"";const S=n&&typeof n.vAlign=="string"&&(n.vAlign=="middle"||n.vAlign=="center")?String(n.vAlign):"top";const k=n&&typeof n.DelayOpen=="number"&&n.DelayOpen&&f.isFiniteNumber(n.DelayOpen)?f.format_number_int(n.DelayOpen,false):850;const J=n&&typeof n.DelayClose=="number"&&n.DelayClose&&f.isFiniteNumber(n.DelayClose)?f.format_number_int(n.DelayClose,false):500;const U=n&&typeof n.CssOverlayBgColor=="string"&&n.CssOverlayBgColor&&f.isHexColor(n.CssOverlayBgColor)?f.stringTrim(n.CssOverlayBgColor):"#222222";const R=n&&typeof n.CssOverlayOpacity=="number"&&f.isFiniteNumber(n.CssOverlayOpacity)&&f.format_number_float(n.CssOverlayOpacity,false)>=0&&f.format_number_float(n.CssOverlayOpacity,false)<=1?f.format_number_dec(n.CssOverlayOpacity,2,false,true):.4;const A=()=>{return String(h)};e.getName=A;const L=()=>{return String(p)};e.getStatus=L;const j=()=>{return String(t)};e.getVersion=j;const H=(t,e)=>{e=f.stringPureVal(e,true);if(!!t){r=1;l=String(e)}else{r=0;l=""}};e.setRefreshParent=H;const z=t=>{if(typeof t==="function"){a=t;return true}i.error(s,"ERR: setHandlerOnBeforeUnload","fx is not a function");return false};e.setHandlerOnBeforeUnload=z;const E=function(t,e=null,s=0,i=0){t=f.stringPureVal(t,true);p="visible";if(e!==null){w=e?1:0}m=f.format_number_int(parseInt(s),false);d=f.format_number_int(parseInt(i),false);c("body").css({overflow:"hidden"});c("#"+_).empty();if(v){c("#"+_).html('<br><br><img src="'+f.escape_html(v)+'" alt="..." title="...">')}T(w,m,d);const o=(new Date).getTime();if(t.indexOf("?")!=-1){t+="&"}else{t+="?"}t+=String(h+"="+f.escape_url(o));c("#"+h).show().css({width:"100%",height:"100%",visibility:"hidden"}).attr("src",String(t));let n;if(I===""){n='<img id="ifrm-close" src="'+f.escape_html(O)+'" alt="'+f.escape_html(y)+'" title="'+f.escape_html(y)+'">'}else{n=String(I)}let r="auto";let l="auto";if(B==="left"){r="-20px"}else{l="-20px"}c("#"+b).show().css({position:"absolute","z-index":2111111099,cursor:"pointer",top:"-12px",left:r,right:l,"min-width":"32px","max-width":"64px","min-height":"32px","max-height":"64px",visibility:"hidden"}).empty().html(n).click(()=>{D()});if(!e){c("#"+g).click(()=>{D()})}else{c("#"+g).unbind("click")}let a=f.format_number_int(k,false);if(a<500){a=500}if(a>1e3){a=1e3}setTimeout(()=>{N()},a);return false};e.LoadURL=E;const D=function(){let e=true;try{e=!!P()}catch(t){i.error(s,"ERR: UnloadURL",t);e=true}if(!e){return false}V();let t=f.format_number_int(J,false);if(t<250){t=250}if(t>750){t=750}setTimeout(()=>{F()},t);return false};e.UnloadURL=D;const F=function(){c("#"+x).css({position:"absolute",width:"1px",height:"1px",left:"0px",top:"0px"}).hide();c("#"+g).css({position:"absolute",width:"1px",height:"1px",left:"0px",top:"0px"}).hide();if(r){const t=f.stringTrim(l);if(t==""){self.location=self.location}else{self.location=String(t)}r=0;l=""}return false};const N=()=>{c("#"+b).css({visibility:"visible"});c("#"+h).css({"background-color":"#FFFFFF",visibility:"visible"});c("#"+_).empty().html("");return false};const P=()=>{if(typeof a==="function"){return!!a()}return true};const M=t=>{t=f.format_number_int(parseInt(t),false);if(t<=0){t=f.format_number_int(parseInt(c(window).width())-40,false)}if(t<200){t=200}return t};const $=t=>{t=f.format_number_int(parseInt(t),false);if(t<=0){t=f.format_number_int(parseInt(c(window).height())-20,false)}if(t<100){t=100}return t};const V=function(){c("#"+g).unbind("click");c("#"+b).unbind("click");c("#"+_).empty().html("");let t="auto";let e="auto";if(B==="left"){t="0px"}else{e="0px"}c("#"+b).css({position:"absolute",width:"1px",height:"1px",left:t,right:e,top:"0px"}).empty().html("").hide();c("#"+h).css({width:"1px",height:"1px"});if(C){c("#"+h).attr("src",f.escape_html(C))}c("#"+h).attr("src","").hide();c("#"+x).css({position:"absolute",width:"1px",height:"1px",left:"0px",top:"0px"}).hide();c("body").css({overflow:"auto"});p="";return false};const X=function(t,e){let s=f.format_number_int(parseInt(c(window).scrollLeft())+(parseInt(c(window).width())-t)/2)+"px";let i=f.format_number_int(parseInt(c(window).scrollTop())+10)+"px";if(S==="center"||S==="middle"){i=f.format_number_int(parseInt(c(window).scrollTop())+(parseInt(c(window).height())-e)/2)+"px"}c("#"+x).css({position:"absolute","z-index":2111111098,"text-align":"center",left:s,top:i,width:t+"px",height:e+"px"}).show()};const T=function(t,e,s){let i=M(e);let o=$(s);const n=M(0);if(n<e){i=n}const r=$(0);if(r<s){o=r}let l="auto";if(t!=1){l="pointer"}c("#"+g).css({position:"fixed","z-index":2111111097,cursor:l,"text-align":"center",left:"0px",top:"0px",width:"100%",height:"100%"}).show();X(i,o);return false};c(()=>{c("body").append('\x3c!-- SmartJS.Modal.Loader :: Start --\x3e<div id="'+f.escape_html(g)+'" data-info-smartframework="SmartFramework.Js.ModalBox: '+f.escape_html(t)+'" style="position:absolute; top:0px; left:0px; width:1px; height:1px; background:'+f.escape_html(f.hex2rgba(U,R))+'; backdrop-filter: blur(4px);"></div><div id="'+f.escape_html(x)+'" style="position:absolute; top:0px; left:0px; width:1px; height:1px;"><center><div id="'+f.escape_html(_)+'"></div></center><div id="'+f.escape_html(b)+'" title="[X]"></div><iframe name="'+f.escape_html(h)+'" id="'+f.escape_html(h)+'" width="1" height="1" scrolling="auto" src="" marginwidth="5" marginheight="5" hspace="0" vspace="0" frameborder="0"></iframe></div>\x3c!-- END: SmartJS.Modal.Loader --\x3e');F();c(window).on("resize scroll",t=>{if(L()==="visible"){T(w,m,d)}})})}};smartJ$ModalBox.secureClass();window.smartJ$ModalBox=smartJ$ModalBox;
// #END
