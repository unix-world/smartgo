// JS-Script (UM): browser_utils.js @ 2025-12-16 17:19:14 +0200
const smartJ$Browser=new class{constructor(){const _N$="smartJ$Browser";const _C$=this;const _p$=console;let SECURED=false;_C$.secureClass=()=>{if(SECURED===true){_p$.warn(_N$,"Class is already SECURED")}else{SECURED=true;Object.freeze(_C$)}};const $=jQuery;const _Option$=typeof smartJ$Options!="undefined"&&smartJ$Options&&typeof smartJ$Options==="object"&&smartJ$Options.BrowserUtils!=undefined&&typeof smartJ$Options.BrowserUtils==="object"?smartJ$Options.BrowserUtils:null;const _Te$tBrowser=smartJ$TestBrowser;const _Utils$=smartJ$Utils;const _Date$=smartJ$Date;const _Crypto$Hash=smartJ$CryptoHash;_C$.param_LanguageId=_Option$&&typeof _Option$.LanguageId=="string"&&_Option$.LanguageId?_Utils$.stringTrim(_Option$.LanguageId):"en";_C$.param_Charset=_Option$&&typeof _Option$.Charset=="string"&&_Option$.Charset?_Utils$.stringTrim(_Option$.Charset):"UTF-8";_C$.param_CookieLifeTime=_Option$&&typeof _Option$.CookieLifeTime=="number"&&_Option$.CookieLifeTime&&_Utils$.isFiniteNumber(_Option$.CookieLifeTime)?_Utils$.format_number_int(_Option$.CookieLifeTime,false):0;_C$.param_CookieDomain=_Option$&&typeof _Option$.CookieDomain=="string"&&_Option$.CookieDomain?_Utils$.stringTrim(_Option$.CookieDomain):"";_C$.param_CookieSameSitePolicy=_Option$&&typeof _Option$.CookieSameSitePolicy=="string"&&_Option$.CookieSameSitePolicy?_Utils$.stringTrim(_Option$.CookieSameSitePolicy):"Lax";_C$.param_Notifications=_Option$&&typeof _Option$.Notifications=="string"&&_Option$.Notifications?_Utils$.stringTrim(_Option$.Notifications):"growl";_C$.param_NotificationDialogType=_Option$&&typeof _Option$.NotificationDialogType=="string"&&_Option$.NotificationDialogType?_Utils$.stringTrim(_Option$.NotificationDialogType):"auto";_C$.param_NotificationGrowlType=_Option$&&typeof _Option$.NotificationGrowlType=="string"&&_Option$.NotificationGrowlType?_Utils$.stringTrim(_Option$.NotificationGrowlType):"auto";_C$.param_NotificationTimeOK=_Option$&&typeof _Option$.NotificationTimeOK=="number"&&_Option$.NotificationTimeOK&&_Utils$.isFiniteNumber(_Option$.NotificationTimeOK)?_Utils$.format_number_int(_Option$.NotificationTimeOK,false):1e3;_C$.param_NotificationTimeERR=_Option$&&typeof _Option$.NotificationTimeERR=="number"&&_Option$.NotificationTimeERR&&_Utils$.isFiniteNumber(_Option$.NotificationTimeERR)?_Utils$.format_number_int(_Option$.NotificationTimeERR,false):3500;_C$.param_NotifyLoadError=_Option$&&!!_Option$.NotifyLoadError?true:false;_C$.param_ModalBoxActive=_Option$&&_Option$.ModalBoxActive===2?2:_Option$&&_Option$.ModalBoxActive===0?0:1;_C$.param_ModalBoxNoCascade=_Option$&&_Option$.ModalBoxNoCascade===false?false:true;_C$.param_ModalBoxProtected=_Option$&&!!_Option$.ModalBoxProtected?true:false;_C$.param_Prefix=_Option$&&typeof _Option$.Prefix=="string"&&_Option$.Prefix?_Utils$.stringTrim(_Option$.Prefix):"";_C$.param_LoaderImg=_Option$&&typeof _Option$.LoaderImg=="string"&&_Option$.LoaderImg?_Utils$.stringTrim(_Option$.LoaderImg):_C$.param_Prefix+"lib/js/framework/img/loading.svg";_C$.param_LoaderBlank=_Option$&&typeof _Option$.LoaderBlank=="string"&&_Option$.LoaderBlank?_Utils$.stringTrim(_Option$.LoaderBlank):_C$.param_Prefix+"lib/js/framework/loading.html";_C$.param_ImgOK=_Option$&&typeof _Option$.ImgOK=="string"&&_Option$.ImgOK?_Utils$.stringTrim(_Option$.ImgOK):_C$.param_Prefix+"lib/framework/img/sign-ok.svg";_C$.param_ImgNotOK=_Option$&&typeof _Option$.ImgNotOK=="string"&&_Option$.ImgNotOK?_Utils$.stringTrim(_Option$.ImgNotOK):_C$.param_Prefix+"lib/framework/img/sign-warn.svg";_C$.param_ImgCloneInsert=_Option$&&typeof _Option$.ImgCloneInsert=="string"&&_Option$.ImgCloneInsert?_Utils$.stringTrim(_Option$.ImgCloneInsert):_C$.param_Prefix+"lib/js/framework/img/clone-insert.svg";_C$.param_ImgCloneRemove=_Option$&&typeof _Option$.ImgCloneRemove=="string"&&_Option$.ImgCloneRemove?_Utils$.stringTrim(_Option$.ImgCloneRemove):_C$.param_Prefix+"lib/js/framework/img/clone-remove.svg";_C$.param_IconImgFullScreen=_Option$&&typeof _Option$.IconImgFullScreen=="string"&&_Option$.IconImgFullScreen?_Utils$.stringTrim(_Option$.IconImgFullScreen):_C$.param_Prefix+"lib/js/framework/img/fullscreen-on.svg";_C$.param_CssOverlayBgColor=_Option$&&typeof _Option$.CssOverlayBgColor=="string"&&_Option$.CssOverlayBgColor&&_Utils$.isHexColor(_Option$.CssOverlayBgColor)?_Utils$.stringTrim(_Option$.CssOverlayBgColor):"#FFFFFF";_C$.param_CssOverlayOpacity=_Option$&&typeof _Option$.CssOverlayOpacity=="number"&&_Utils$.isFiniteNumber(_Option$.CssOverlayOpacity)&&_Utils$.format_number_float(_Option$.CssOverlayOpacity,false)>=0&&_Utils$.format_number_float(_Option$.CssOverlayOpacity,false)<=1?_Utils$.format_number_dec(_Option$.CssOverlayOpacity,2,false,true):.1;_C$.param_TimeDelayCloseWnd=_Option$&&typeof _Option$.TimeDelayCloseWnd=="number"&&_Option$.TimeDelayCloseWnd&&_Utils$.isFiniteNumber(_Option$.TimeDelayCloseWnd)?_Utils$.format_number_int(_Option$.TimeDelayCloseWnd,false):750;let flag_PageUnloadConfirm=false;let flag_PageAway=false;let flag_RefreshState=0;let flag_RefreshURL="";let flag_DebugEnabled=false;let flag_DebugPageAway=false;const defSmartPopupTarget="smartPWin";let objRefWinPopup=null;const sfOverlayID="smart-framework-overlay";const cssAlertable="background:#555566; color:#FFFFFF; font-size:1.5rem; font-weight:bold; text-align:right; padding-top:2px; padding-bottom:2px; padding-left:7px; padding-right:7px; margin:-8px; margin-bottom:10px;";const regexValidCookieName=RegExp(/^[a-zA-Z0-9_\-]+$/);const HTTP_STATUS_CODES={200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",208:"Already Reported",301:"Moved Permanently",302:"Found",304:"Not Modified",400:"Bad Request",401:"Unauthorized",402:"Subscription Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",408:"Request Timeout",409:"Conflict",410:"Gone",415:"Unsupported Media Type",422:"Unprocessable Content",423:"Locked",424:"Dependency Failed",429:"Too Many Requests",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",507:"Insufficient Storage"};const setFlag=(e,t)=>{e=String(e||"");switch(e){case"PageUnloadConfirm":flag_PageUnloadConfirm=!!t;return true;break;case"PageAway":if(flag_DebugEnabled===true){_p$.log(_N$,"Debug is ON, the setFlag:PageAway is overriden ...");flag_DebugPageAway=!!t}else{flag_PageAway=!!t}return true;break;case"RefreshState":flag_RefreshState=!!t?1:0;return true;break;case"RefreshURL":flag_RefreshURL=_Utils$.stringPureVal(t,true);return true;break;case"DebugEnabled":flag_DebugEnabled=!!t;if(flag_DebugEnabled===true){PageAwayControl("Debug is ON. Confirm Leaving the page. This confirmation is to avoid javascript redirects without explicit confirmation when Debug is enabled.")}else{flag_PageAway=!!flag_DebugPageAway}return true;break;default:_p$.warn(_N$,"Set Invalid Flag:",e,t)}return false};_C$.setFlag=setFlag;const getFlag=e=>{e=String(e||"");switch(e){case"PageUnloadConfirm":return!!flag_PageUnloadConfirm;break;case"PageAway":return!!flag_PageAway;break;case"RefreshState":return flag_RefreshState?1:0;break;case"RefreshURL":return _Utils$.stringPureVal(flag_RefreshURL,true);break;case"DebugEnabled":return!!flag_DebugEnabled;break;default:_p$.warn(_N$,"Get Invalid Flag:",e)}return null};_C$.getFlag=getFlag;const getRefPopup=()=>objRefWinPopup;_C$.getRefPopup=getRefPopup;const getCurrentIsoDateTime=()=>{const e=new Date;return String(_Date$.getIsoDate(e,true))};_C$.getCurrentIsoDateTime=getCurrentIsoDateTime;const stripTags=e=>{e=_Utils$.stringPureVal(e);if(e==""){return""}return $("<div>"+e.replace(/(<([^>]+)>)/g," ")+"</div>").text()};_C$.stripTags=stripTags;const parseCurrentUrlGetParams=function(a=true){let o={};if(!location.search){return o}let e=String(location.search.substring(1));if(!e){return o}e.split("&").forEach(e=>{let t="";let i="";let r="";e=String(e);if(e){t=e.split("=");i=String(t[0]);if(a===true&&i.indexOf("/")!==-1){let t=i.split("/");let r=false;for(let e=0;e<t.length;e++){if(r!==true){if(t[e]!==""){r=true}else{continue}}o[String(t[e])]=String(decodeURIComponent(String(t[e+1]?t[e+1]:""))||"");e+=1}}else{o[String(t[0])]=String(decodeURIComponent(String(t[1]?t[1]:""))||"")}}});return o};_C$.parseCurrentUrlGetParams=parseCurrentUrlGetParams;const PrintPage=()=>{try{self.print()}catch(e){_p$.warn(_N$,"Print Page is N/A:",e);AlertDialog("NOTICE: Printing may not be available in your browser")}};_C$.PrintPage=PrintPage;const CountDown=function(counter,elID,evcode,prettyFormat){const _m$="CountDown";if(counter==undefined||counter==""){_p$.error(_N$,_m$,"ERR: undefined Counter Init");return}counter=_Utils$.format_number_int(counter,false);if(counter<1){return}const cdwn=setInterval(()=>{if(counter>0){counter=counter-1;if(elID!=undefined&&elID!=""){const theID=_Utils$.create_htmid(elID);let cntTxt=String(counter);if(prettyFormat===true){cntTxt=String(_Date$.prettySecondsHFmt(counter))}if(theID!=""){$("#"+theID).empty().text(cntTxt)}}}else{clearInterval(cdwn);_Utils$.evalJsFxCode(_N$+"."+_m$,typeof evcode==="function"?()=>{"use strict";evcode(counter,elID)}:()=>{"use strict";!!evcode?eval(evcode):null})}},1e3)};_C$.CountDown=CountDown;const windowFocus=e=>{try{e.focus()}catch(e){}};_C$.windowFocus=windowFocus;const WindowIsiFrame=()=>{if(window.self!==window.top){return true}return false};_C$.WindowIsiFrame=WindowIsiFrame;const WindowIsPopup=()=>{if(window.opener){return true}return false};_C$.WindowIsPopup=WindowIsPopup;const PageAwayControl=function(a){_C$.setFlag("PageUnloadConfirm",true);a=_Utils$.stringPureVal(a,true);if(a==""){a="Confirm leaving the page ... ?"}$(window).on("beforeunload",e=>{let t=e||window.event;if(_C$.getFlag("PageAway")!=true){t.preventDefault();if(_C$.getFlag("DebugEnabled")==true){const r="*** DEBUG IS ON ***";const i="Page Leave Confirmation is ENABLED";_p$.log(_N$,r,i);if(GrowlSelectType()!=""){GrowlNotificationAdd(r,_Utils$.escape_html(i),"",1e4,false,"yellow")}}return String(a)}}).on("unload",()=>{_C$.setFlag("PageAway",true)});if(WindowIsiFrame()===true){if(typeof parent.smartJ$ModalBox!="undefined"){try{parent.smartJ$ModalBox.setHandlerOnBeforeUnload(()=>{if(_C$.getFlag("PageAway")!=true){let e=confirm(String(a));if(e){_C$.setFlag("PageAway",true)}return e}else{return true}})}catch(e){_p$.error(_N$,"ERR: PageAwayControl failed on ModalBox:",e)}}}};_C$.PageAwayControl=PageAwayControl;const RedirectToURL=e=>{e=_Utils$.stringPureVal(e,true);if(e==""){_p$.warn(_N$,"WARN: RedirectToURL: empty URL");return}setFlag("PageAway",true);if(e==="@"){self.location=self.location}else{self.location=String(e)}};_C$.RedirectToURL=RedirectToURL;const RedirectDelayedToURL=function(e,t){t=_Utils$.format_number_int(t,false);setTimeout(()=>{RedirectToURL(e)},t)};_C$.RedirectDelayedToURL=RedirectDelayedToURL;const RedirectParent=function(e){const t="RedirectParent";e=_Utils$.stringPureVal(e,true);if(e==""){_p$.warn(_N$,t,"WARN: empty URL");return}e=String(e);if(WindowIsPopup()===true){try{window.opener.location=e}catch(e){_p$.error(_N$,t,"ERR: PopUp:",e)}}else if(WindowIsiFrame()===true){try{parent.location=e}catch(e){_p$.error(_N$,t,"ERR: iFrame:",e)}}};_C$.RedirectParent=RedirectParent;const RefreshParent=function(e){const t="RefreshParent";e=_Utils$.stringPureVal(e,true);if(WindowIsPopup()===true){try{if(window.opener){if(typeof window.opener.smartJ$Browser=="undefined"||typeof window.opener.smartJ$ModalBox=="undefined"){_p$.warn(_N$,t,"ERR: N/A for PopUp Parent");return}if(window.opener.smartJ$Browser.getFlag("PageUnloadConfirm")===true){return}if(window.opener.smartJ$ModalBox.getStatus()==="visible"){window.opener.smartJ$ModalBox.setRefreshParent(1,String(e));return}window.opener.smartJ$Browser.setFlag("RefreshState",1);window.opener.smartJ$Browser.setFlag("RefreshURL",e)}}catch(e){_p$.error(_N$,t,"ERR: Failed for PopUp:",e)}}else if(WindowIsiFrame()===true){try{if(self.name){if(typeof parent.smartJ$Browser=="undefined"||typeof parent.smartJ$ModalBox=="undefined"){_p$.warn(_N$,t,"ERR: N/A for iFrame Parent");return}if(self.name===parent.smartJ$ModalBox.getName()){if(parent.smartJ$Browser.getFlag("PageUnloadConfirm")!==true){parent.smartJ$ModalBox.setRefreshParent(true,e)}}}}catch(e){_p$.error(_N$,t,"ERR: Failed from iFrame:",e)}}};_C$.RefreshParent=RefreshParent;const CloseModalPopUp=function(){const t="CloseModalPopUp";if(WindowIsPopup()===true){if(window.opener&&typeof window.opener.smartJ$Browser!="undefined"){try{if(window.opener.smartJ$Browser.getRefPopup()&&window.opener.smartJ$Browser.getRefPopup()===self){}else{if(window.opener.smartJ$Browser.getFlag("RefreshState")){if(window.opener.smartJ$Browser.getFlag("RefreshURL")){window.opener.location=String(window.opener.smartJ$Browser.getFlag("RefreshURL"))}else{window.opener.location=window.opener.location}window.opener.smartJ$Browser.setFlag("RefreshState",0);window.opener.smartJ$Browser.setFlag("RefreshURL","")}}}catch(e){_p$.error(_N$,t,"ERR: Failed with PopUp:",e)}}else{_p$.warn(_N$,t,"ERR: PopUp Parent BrowserUtils is N/A")}try{self.close()}catch(e){}}else if(WindowIsiFrame()===true){if(typeof parent.smartJ$ModalBox=="undefined"){_p$.warn(_N$,t,"ERR: iFrame Parent ModalBox is N/A");return}try{if(self.name){if(self.name===parent.smartJ$ModalBox.getName()){parent.smartJ$ModalBox.UnloadURL()}}}catch(e){_p$.error(_N$,t,"ERR: Failed with iFrame:",e)}}else{try{self.close()}catch(e){}}};_C$.CloseModalPopUp=CloseModalPopUp;const CloseDelayedModalPopUp=function(e){e=_Utils$.format_number_int(e,false);if(e<=0){e=_Utils$.format_number_int(_C$.param_TimeDelayCloseWnd,false)}if(e<100){e=100}else if(e>6e4){e=6e4}setTimeout(()=>{setFlag("PageAway",true);CloseModalPopUp()},e)};_C$.CloseDelayedModalPopUp=CloseDelayedModalPopUp;const getCurrentPointerEventXY=function(e,t=false){let r={x:-1,y:-1,t:null,q:null};if(!e){return r}let i=e;if(e.touches&&e.touches.length>0){i=e.touches[0]}let a=-1;let o=-1;if(t===true){r.q="clientXY";a=i.clientX||-1;o=i.clientY||-1}else{r.q="pageXY";a=i.pageX||-1;o=i.pageY||-1}r.x=_Utils$.format_number_int(a);r.y=_Utils$.format_number_int(o);r.t=_Utils$.stringPureVal(e.type||"unknown",true).toLowerCase();return r};_C$.getCurrentPointerEventXY=getCurrentPointerEventXY;const getHighestZIndex=function(){let i=1;let a=1;$("div").each((e,t)=>{let r=$(t);if(r.css("display")=="none"||r.css("visibility")=="hidden"||r.attr("id")=="SmartFramework___Debug_InfoBar"){}else{a=_Utils$.format_number_int(parseInt(r.css("z-index"),10));if(a>0){if(a>i){i=a}}}});if(i<2147483647){i+=1}return i};_C$.getHighestZIndex=getHighestZIndex;const createMaxContainer=function(e,t=false){e=_Utils$.stringPureVal(e,true);e=_Utils$.create_htmid(e);if(e==""){_p$.error(_N$,"ERR: createMaxContainer: empty ID");return}const r=$("#"+e);if(r.attr("data-fullscreen")=="default"||r.attr("data-fullscreen")=="fullscreen"){return}r.attr("data-fullscreen","default").append('<div style="position:absolute; top:-4px; left:-4px; width:20px; height: 20px; overflow:hidden; text-align:center; cursor:pointer; opacity:0.7;" title="Toggle Element Full Screen"><img height="20" src="'+_Utils$.escape_html(_C$.param_IconImgFullScreen)+'"></div>').css({position:"relative",border:"1px solid #DDDDDD","z-index":1}).click(e=>{const t=$(e.currentTarget);if(t.attr("data-fullscreen")=="fullscreen"){OverlayHide();t.attr("data-fullscreen","default");t.css({position:"relative",top:0,left:0,width:Math.max(_Utils$.format_number_int(parseInt(t.attr("data-width"))),100),height:Math.max(_Utils$.format_number_int(parseInt(t.attr("data-height"))),100),"z-index":1})}else{OverlayShow();OverlayClear();t.attr("data-width",String(_Utils$.escape_html(String(t.width()))));t.attr("data-height",String(_Utils$.escape_html(String(t.height()))));t.attr("data-fullscreen","fullscreen");t.css({position:"fixed",top:"7px",left:"7px",width:"99%",height:"98%","z-index":2147403e3})}});if(t===true){r.trigger("click")}};_C$.createMaxContainer=createMaxContainer;const OverlayShow=function(e,t,r,i=null,a=false){e=_Utils$.stringPureVal(e,true);t=_Utils$.stringPureVal(t,true);r=_Utils$.stringPureVal(r,true);if(r==""){r="white"}i=OverlayValidID(i);let o='style="display: none; position: fixed; top: -50px; left: -50px; width: 1px; height: 1px; background: '+_Utils$.escape_html(_Utils$.hex2rgba(_C$.param_CssOverlayBgColor,_C$.param_CssOverlayOpacity))+'; backdrop-filter: blur(1px);"';if(typeof smartJ$UI=="object"){if(typeof smartJ$UI.overlayCssClass!="undefined"&&smartJ$UI.overlayCssClass!=null&&smartJ$UI.overlayCssClass!=""){o='class="'+_Utils$.escape_html(smartJ$UI.overlayCssClass)+'"'}}const l=GrowlSelectType()!=""?true:false;let n='<img src="'+_Utils$.escape_html(_C$.param_LoaderImg)+'" alt="... loading ..." style="background:transparent!important;color:#555555!important;opacity:1!important;">';if(a===true){n=""}if(l!==true){n=n+"<div>"+"<h1>"+_Utils$.escape_html(t)+"</h1>"+"<div>"+e+"</div>"+"</div>"}$("#"+i).remove();const s=$('<div id="'+_Utils$.escape_html(i)+'" '+o+"></div>").css({"z-index":21474e5,position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%"}).hide().appendTo("body");$("#"+i).html('<div style="width:100%; position:fixed; top:25px; left:0px;"><center><div>'+n+"</div></center></div>");try{s.fadeIn()}catch(e){s.show()}if(e!=""||t!=""){if(l===true){GrowlNotificationAdd(t,e,"",500,false,r)}}return s};_C$.OverlayShow=OverlayShow;const OverlayClear=(e=null)=>{e=OverlayValidID(e);$("#"+e).empty().html("")};_C$.OverlayClear=OverlayClear;const OverlayHide=function(e=null){e=OverlayValidID(e);let t=$("#"+e);try{t.fadeOut()}catch(e){t.hide()}t.css({"z-index":1,position:"fixed",top:"-50px",left:"-50px",width:1,height:1}).remove()};_C$.OverlayHide=OverlayHide;const GrowlNotificationAdd=function(t,r,e,i,a=false,o=null,l=null,n=false){const s="GrowlNotificationAdd";t=_Utils$.stringPureVal(t);if(n===true){}else{t=_Utils$.nl2br(_Utils$.escape_html(t))}r=_Utils$.stringPureVal(r,true);i=_Utils$.format_number_int(i,false);if(i<0){i=0}else if(i>6e4){i=6e4}o=_Utils$.stringPureVal(o,true);if(o=="undefined"){o=""}let _=null;let c=null;let u=null;let f=null;if(l){if(l.hasOwnProperty("before_open")){_=l.before_open}if(l.hasOwnProperty("after_open")){c=l.after_open}if(l.hasOwnProperty("before_close")){u=l.before_close}if(l.hasOwnProperty("after_close")){f=l.after_close}}const m=GrowlSelectType();if(m==="ui"){try{smartJ$UI.GrowlAdd(t,r,e,i,a,o,l)}catch(e){_p$.error(_N$,s,"ERR: growl:",e)}}else if(m==="toastr"){if(e!=undefined&&e!=""&&e!==false){e='<img src="'+_Utils$.escape_html(e)+'" align="right">'}else{e=""}o=$.toastr.translateCssClasses(o);try{$.toastr.notify({appearanceClass:String(o),title:String(String(t)+String(e)),message:String(r),onBeforeVisible:_,onVisible:c,onBeforeHidden:u,onHidden:f,timeOut:a?0:i})}catch(e){_p$.error(_N$,s,"ERR: toastr:",e)}}else{if($.isFunction(_)){_()}if($.isFunction(c)){c()}let e=()=>{if($.isFunction(u)){u()}if($.isFunction(f)){f()}};AlertDialog(r,e,t);return false}return true};_C$.GrowlNotificationAdd=GrowlNotificationAdd;const GrowlNotificationRemove=function(){const e=GrowlSelectType();switch(e){case"ui":smartJ$UI.GrowlRemove();return true;break;case"toastr":$.toastr.clear();return true;break}return false};_C$.GrowlNotificationRemove=GrowlNotificationRemove;const AlertDialog=function(e,t=null,r="",i=null,a=null,o="auto",l=false){const n="AlertDialog";e=_Utils$.stringPureVal(e,true);r=_Utils$.stringPureVal(r,true);if(l===true){}else{r=_Utils$.nl2br(_Utils$.escape_html(r))}if(o==="auto"){o=DialogSelectType()}if(o==="ui"&&typeof smartJ$UI.DialogAlert=="function"){smartJ$UI.DialogAlert(e,t,r,i,a)}else{const s="ERR: JS-Eval Failed on DialogAlert";if(o==="alertable"&&typeof $.alertable!="undefined"){$.alertable.alert((r?'<div style="'+_Utils$.escape_html(cssAlertable)+'">'+r+"</div>":"")+e,{html:true,width:i&&i>=275&&i<=960?i:550,height:a&&a>=100&&a<=720?a:270}).always(()=>{_Utils$.evalJsFxCode(_N$+"."+n+" (1)",t)})}else{r=stripTags(r);e=stripTags(e);alert(r+"\n"+e);_Utils$.evalJsFxCode(_N$+"."+n+" (2)",t)}}};_C$.AlertDialog=AlertDialog;const ConfirmDialog=function(t,r=null,i="",e=null,a=null,o="auto",l=false){const n="ConfirmDialog";t=_Utils$.stringPureVal(t,true);i=_Utils$.stringPureVal(i,true);if(l===true){}else{i=_Utils$.nl2br(_Utils$.escape_html(i))}if(o==="auto"){o=DialogSelectType()}if(o==="ui"&&typeof smartJ$UI.DialogConfirm=="function"){smartJ$UI.DialogConfirm(t,r,i,e,a)}else{const s="ERR: JS-Eval Failed on DialogConfirm";if(o==="alertable"&&typeof $.alertable!="undefined"){$.alertable.confirm((i?'<div style="'+_Utils$.escape_html(cssAlertable)+'">'+i+"</div>":"")+t,{html:true,width:e&&e>=275&&e<=960?e:550,height:a&&a>=100&&a<=720?a:270}).then(()=>{_Utils$.evalJsFxCode(_N$+"."+n+" (1)",r)})}else{i=stripTags(i);t=stripTags(t);let e=confirm(i+"\n"+t);if(e){_Utils$.evalJsFxCode(_N$+"."+n+" (2)",r)}}}};_C$.ConfirmDialog=ConfirmDialog;const MessageNotification=function(t,r,i,e,a,o){i=_Utils$.stringPureVal(i,true);e=_Utils$.stringPureVal(e,true);o=_Utils$.format_number_int(o,false);if(e==="yes"){let e=null;if(i!=undefined&&i!=""){RedirectDelayedToURL(i,o+750);e=()=>{RedirectDelayedToURL(String(i),250)}}const l={before_close:e};GrowlNotificationAdd(t,r,"",o,false,a,l)}else{let e=null;if(i!=undefined&&i!=""){e=()=>{RedirectDelayedToURL(i,100)}}AlertDialog(r,e,t,550,275)}};_C$.MessageNotification=MessageNotification;const confirmSubmitForm=function(e,t,r,i=0,a=0,o=0,l=0){e=_Utils$.stringPureVal(e,true);if(t==undefined||t==""){_p$.error(_N$,"confirmSubmitForm","ERR: Form Object is undefined");return}let n=()=>{t.submit()};r=_Utils$.stringPureVal(r,true);if(r!=""){n=()=>{PopUpSendForm(t,String(r),_Utils$.format_number_int(i,false),_Utils$.format_number_int(a,false),_Utils$.format_number_int(o,false),_Utils$.format_number_int(l,false))}}ConfirmDialog(e,n)};_C$.confirmSubmitForm=confirmSubmitForm;const PopUpSendForm=function(objForm,strTarget,windowWidth=0,windowHeight=0,forcePopUp=0,forceDims=0,evcode=null){const _m$="PopUpSendForm";strTarget=_Utils$.stringPureVal(strTarget,true);let strUrl="";try{strUrl=String(objForm.action||"")}catch(err){_p$.error(_N$,_m$,"ERR: Invalid Form Object");return}let crr_protocol=String(document.location.protocol);let crr_arr_url=strUrl.split(":");let crr_url=String(crr_arr_url[0])+":";if((crr_protocol==="http:"||crr_protocol==="https:")&&(crr_url==="http:"||crr_url==="https:")&&crr_url!==crr_protocol){forcePopUp=1}objForm.target=strTarget;if((allowModalCascading()&&forcePopUp!=1||forcePopUp==-1)&&allowModalBox()){if(typeof smartJ$ModalBox!="undefined"){objForm.target=smartJ$ModalBox.getName()}}initModalOrPopUp(_C$.param_LoaderBlank,objForm.target,windowWidth,windowHeight,forcePopUp,forceDims);let fx=()=>{objForm.submit()};if(evcode!=undefined&&evcode!=""&&evcode!="undefined"){fx=()=>{objForm.submit();try{if(typeof evcode==="function"){evcode(objForm,strTarget,forcePopUp,forceDims)}else{eval(evcode)}}catch(err){_p$.error(_N$,_m$,"ERR: Form After-Submit JS Code Failed:",err)}}}setTimeout(fx,_C$.param_TimeDelayCloseWnd+500);return false};_C$.PopUpSendForm=PopUpSendForm;const PopUpLink=function(e,t,r=0,i=0,a=0,o=0,l=-2){e=_Utils$.stringPureVal(e,true);if(e==""){return}e=String(e||"");t=_Utils$.stringPureVal(t,true);const n=String(document.location.protocol);const s=e.split(":");const _=s[0]+":";if((n==="http:"||n==="https:")&&(_==="http:"||_==="https:")&&_!==n){a=1}let c=null;let u=null;try{c=new URL(document.location).hostname;u=new URL(e).hostname}catch(e){c="";u=""}if(c!=""&&u!=""&&c!=u){if(l<-1){l=2}}initModalOrPopUp(e,t,r,i,a,o,l);return false};_C$.PopUpLink=PopUpLink;const getCookie=function(t){t=_Utils$.stringPureVal(t,true);if(t==""||!regexValidCookieName.test(t)){return null}let r;try{r=document.cookie.match(new RegExp("(^|;)\\s*"+_Utils$.preg_quote(String(t))+"=([^;\\s]*)"))}catch(e){r=[];_p$.error(_N$,"ERR: getCookie("+t+") Failed:",e)}if(r&&r.length>=3){const e=decodeURIComponent(r[2]||"")||"";return String(e)}return""};_C$.getCookie=getCookie;const setCookie=function(e,t,r=0,i="/",a="@",o="@",l=false){e=_Utils$.stringPureVal(e,true);if(e==""||!regexValidCookieName.test(e)){_p$.warn(_N$,"WARN: setCookie: Invalid Cookie Name:",e);return false}t=_Utils$.stringPureVal(t,true);let n=new Date;if(r===null){r=_C$.param_CookieLifeTime}r=_Utils$.format_number_int(r);if(r){if(r>0){n.setTime(n.getTime()+r*1e3)}else if(r<0){n.setTime(n.getTime()-3600*24-r);t=null}else{r=0}}else{r=0}if(!t){t=null;r=-1}i=_Utils$.stringPureVal(i,true);i=String(i||"/");a=_Utils$.stringPureVal(a,true);if(a==="@"){a=String(_C$.param_CookieDomain)}o=_Utils$.stringPureVal(o,true);if(o==="@"){o=String(_C$.param_CookieSameSitePolicy)}o=String(o).toLowerCase();switch(o){case"none":o="None";l=true;break;case"lax":o="Lax";break;case"strict":o="Strict";break;case"empty":default:o=""}try{document.cookie=_Utils$.escape_url(e)+"="+_Utils$.escape_url(t)+(r?"; expires="+n.toGMTString():"")+"; path="+i+(a?"; domain="+a:"")+(o?"; SameSite="+o:"")+(l?"; secure":"");return true}catch(e){_p$.warn(_N$,"WARN: Failed to setCookie:",e);return false}};_C$.setCookie=setCookie;const deleteCookie=(e,t="/",r="@",i="@",a=false)=>setCookie(e,null,-1,t,r,i,a);_C$.deleteCookie=deleteCookie;const TextAreaAddLimit=function(e,r){e=_Utils$.stringPureVal(e);if(e==""){_p$.error(_N$,"TextAreaAddLimit","Empty Element ID");return}r=_Utils$.format_number_int(r,false);if(r<1){_p$.warn(_N$,"ERR: TextArea Add Limit: Invalid Limit, will reset to 1");r=1}$("#"+e).on("change click blur keydown keyup paste",e=>{const t=$(e.currentTarget);if(t.val().length>r){t.val(t.val().substring(0,r))}t.attr("title","# Max: "+r+" ; Chars: "+(r-t.val().length)+" #")}).attr("title","# Max: "+r+" #").attr("maxlength",r)};_C$.TextAreaAddLimit=TextAreaAddLimit;const catchKeyENTER=function(e){if(!e){return true}let t=null;if(e.key){t=e.key}else if(e.which){t=e.which}else if(e.keyCode){t=e.keyCode}if(t==="Enter"||t==13){e.preventDefault();return false}return true};_C$.catchKeyENTER=catchKeyENTER;const catchKeyTAB=function(e){if(!e){return}let t=null;if(e.key){t=e.key}else if(e.which){t=e.which}else if(e.keyCode){t=e.keyCode}if(t==="Tab"||t==9){e.preventDefault();const r="\t";const i=e.target;const a=i.selectionStart;const o=i.selectionEnd;const l=i.scrollTop;const n=i.scrollLeft;if(a!=o&&i.value.slice(a,o).indexOf("\n")!=-1){const s=i.value.slice(0,a);const _=i.value.slice(a,o).replace(/\n/g,"\n"+r);const c=i.value.slice(o,i.value.length);i.value=s.concat(r).concat(_).concat(c);i.selectionStart=a+r.length;i.selectionEnd=o+r.length}else{i.value=i.value.slice(0,a).concat(r).concat(i.value.slice(a,i.value.length));if(a==o){i.selectionStart=i.selectionEnd=a+r.length}else{i.selectionStart=a+r.length;i.selectionEnd=o+r.length}}i.scrollTop=l;i.scrollLeft=n}};_C$.catchKeyTAB=catchKeyTAB;const CheckAllCheckBoxes=function(e,t,r){let i="body";if(e){i='form[name="'+_Utils$.escape_html(e)+'"]'}i+=' input[type="checkbox"]';let a=!r;$(i).each((e,t)=>{const r=$(t);a?r.prop("checked",false):r.prop("checked",true)});return false};_C$.CheckAllCheckBoxes=CheckAllCheckBoxes;const CloneElement=function(e,t,r,i){const a="CloneElement";e=_Utils$.stringPureVal(e,true);e=_Utils$.create_htmid(e);if(e==""){_p$.error(_N$,a,"ERR: Invalid elID");return}t=_Utils$.stringPureVal(t,true);t=_Utils$.create_htmid(t);if(t==""){_p$.error(_N$,a,"ERR: Invalid containerID");return}i=_Utils$.format_number_int(i,false);if(i<1){i=1}else if(i>255){i=255}const o=$("#"+e);const l=_Utils$.format_number_int(parseInt($("body").find("[id^="+"clone_control__"+e+"]").length),false);if(l<=0){o.before('<img id="'+"clone_control__"+_Utils$.escape_html(e)+'" alt="AddNew" title="Add New (Max: '+_Utils$.escape_html(i)+')" height="16" src="'+_Utils$.escape_html(_C$.param_ImgCloneInsert)+'" style="cursor:pointer; vertical-align:middle;" onClick="smartJ$Browser.CloneElement(\''+_Utils$.escape_js(e)+"', '"+_Utils$.escape_js(t)+"', '"+_Utils$.escape_js(r)+"', "+_Utils$.format_number_int(i)+");"+'">&nbsp;&nbsp;</span>');return}let n=_Utils$.format_number_int(_Utils$.format_number_int($("body").find("[id^="+"clone_of__"+e+"_"+"]").length),false);if(n<=0){n=0}if(n>=i-1){return}const s=new Date;const _=s.getTime();const c=s.getMilliseconds();const u=Math.random().toString(36);const f=_Crypto$Hash.sha1("The UUID for #"+n+" @ "+u+" :: "+_+"."+c);const m=o.clone().attr("id","clone_of__"+e+"_"+_Utils$.create_htmid(f));$("#"+t).append('<div class="cloned__'+_Utils$.escape_html(e)+'" id="'+"clone_container__"+_Utils$.escape_html(e)+"_"+_Utils$.escape_html(f)+'"><img alt="Remove" title="Remove" height="16" src="'+_Utils$.escape_html(_C$.param_ImgCloneRemove)+'" style="cursor:pointer; vertical-align:middle;" onClick="jQuery(this).parent().remove();">&nbsp;&nbsp;</div>');switch(String(r)){case"text-input":case"text-area":case"file-input":m.val("").appendTo("#"+"clone_container__"+e+"_"+_Utils$.create_htmid(f));break;case"html-element":default:m.appendTo("#"+"clone_container__"+e+"_"+_Utils$.create_htmid(f))}};_C$.CloneElement=CloneElement;const SerializeFormAsObject=(e,t)=>{e=_Utils$.stringPureVal(e,true);e=_Utils$.create_htmid(e);if(e==""){return null}t=_Utils$.stringPureVal(t,true);if(t==""){t="formData"}let r=$("form#"+e).serializeArray();if(!Array.isArray(r)){return{}}if(r.length<=0){return{}}if(r.length>16384){return{}}let n={};let s=0;let _=0;$.each(r,(e,t)=>{let r=_Utils$.stringTrim(t.name);let i="";let a=false;let o=false;if(r!=""){if(_Utils$.stringEndsWith(r,"[]")){a=true;if(r.length>2){r=r.substring(0,r.length-2)}else{r=""}}else if(_Utils$.stringEndsWith(r,"]")){o=true;if(r.length>3){let e=r.split("[");r=String(e[0]||"");i=_Utils$.stringCharTrim(String(e[1]||""),"]")}else{r=""}}}r=_Utils$.stringTrim(r);if(r!=""){const l=t.value||"";if(!!a){if(n[r]!==undefined){if(!n[r].push){n[r]=[n[r]]}n[r].push(l);_=Math.max(_,n[r].length)}else{n[r]=[l];_=Math.max(_,1);s++}}else if(!!o&&i!=""){if(n[r]!==undefined){n[r][i]=l}else{n[r]={};n[r][i]=l;_=Math.max(_,1);s++}}else{n[r]=l;s++}}});const i={};i["#"]={levels:_,keys:s,size:r.length};i[t]=n;return i};_C$.SerializeFormAsObject=SerializeFormAsObject;const SubmitFormByAjax=function(the_form_id,url,growl="auto",evcode=null,everrcode=null,evfailcode=null,failalertable=false){const _m$="SubmitFormByAjax";growl=_Utils$.stringPureVal(growl,true);if(growl==""){growl="auto"}else if(growl!="no"){growl="yes"}let dlg="auto";if(failalertable===true){if($.alertable){dlg="alertable"}}let haveGrowl=false;switch(growl){case"no":break;case"yes":if(GrowlSelectType()!=""){haveGrowl=true}else{_p$.warn(_N$,_m$,"WARN: Growl is required but is N/A")}break;case"auto":default:if(GrowlSelectType()!=""){haveGrowl=true}}let ajax=null;if(!the_form_id){ajax=AjaxRequestFromURL(url,"GET","json")}else{ajax=AjaxRequestByForm(the_form_id,url,"json")}if(ajax===null){_p$.error(_N$,_m$,"ERR: Null XHR Object on FormID:",the_form_id);AlertDialog("<h3>FAIL: The XHR Object is NULL !</h3>",null,"ERROR",null,null,dlg);return}OverlayShow();ajax.done(msg=>{OverlayClear();if(typeof msg=="object"&&msg.hasOwnProperty("completed")&&msg.completed==="DONE"&&msg.hasOwnProperty("status")&&msg.status!=null&&msg.hasOwnProperty("action")&&msg.action!=null&&msg.hasOwnProperty("title")&&msg.title!=null&&msg.hasOwnProperty("message")&&msg.message!=null&&msg.hasOwnProperty("js_evcode")&&msg.hasOwnProperty("redirect")&&msg.hasOwnProperty("replace_div")&&msg.hasOwnProperty("replace_html")){msg.status=_Utils$.stringPureVal(msg.status,true).toUpperCase();if(msg.status=="OK"){_Utils$.evalJsFxCode(_N$+"."+_m$+" (1.1)",typeof evcode==="function"?()=>{"use strict";evcode(the_form_id,url,msg)}:()=>{"use strict";!!evcode?eval(evcode):null});_Utils$.evalJsFxCode(_N$+"."+_m$+" (1.2)",typeof msg.js_evcode==="function"?()=>{"use strict";msg.js_evcode(the_form_id,url,msg)}:()=>{"use strict";!!msg.js_evcode?eval(msg.js_evcode):null});if(msg.hasOwnProperty("hide_form_on_success")&&!!msg.hide_form_on_success){if(!!the_form_id){$("form#"+the_form_id).hide()}}if(msg.redirect!=null&&msg.redirect!=""&&msg.message==""){RedirectDelayedToURL(msg.redirect,250)}else{if(msg.replace_div!=null&&msg.replace_div!=""&&msg.replace_html!=null&&msg.replace_html!=""){$("#"+msg.replace_div).empty().html(String(msg.replace_html))}if(msg.message!=""){MessageNotification(String(msg.title||""),'<img alt="ok" title="'+_Utils$.escape_html(msg.action)+'" src="'+_Utils$.escape_html(_C$.param_ImgOK)+'" align="right">'+msg.message,msg.redirect,haveGrowl===true?"yes":"no",haveGrowl===true?"success":"",_C$.param_NotificationTimeOK)}setTimeout(()=>{OverlayHide()},_C$.param_NotificationTimeOK+100)}}else{let growlClass="";switch(msg.status){case"INFO":growlClass="info";break;case"HINT":growlClass="hint";break;case"NOTICE":growlClass="notice";break;case"WARN":case"WARNING":growlClass="warning";break;case"ERR":case"ERROR":growlClass="error";break;case"FAIL":case"FAILED":growlClass="fail";break}_Utils$.evalJsFxCode(_N$+"."+_m$+" (2.1)",typeof everrcode==="function"?()=>{"use strict";everrcode(the_form_id,url,msg)}:()=>{"use strict";!!everrcode?eval(everrcode):null});_Utils$.evalJsFxCode(_N$+"."+_m$+" (2.2)",typeof msg.js_evcode==="function"?()=>{"use strict";msg.js_evcode(the_form_id,url,msg)}:()=>{"use strict";!!msg.js_evcode?eval(msg.js_evcode):null});MessageNotification("* "+String(msg.title||""),String(msg.message),msg.redirect,haveGrowl===true?"yes":"no",haveGrowl===true?growlClass:"",_C$.param_NotificationTimeERR);setTimeout(()=>{OverlayHide()},_C$.param_NotificationTimeERR+100)}}else{_p$.warn(_N$,_m$,"WARN: Invalid Data Object Format");MessageNotification("* ERR",'<img alt="fail" src="'+_Utils$.escape_html(_C$.param_ImgNotOK)+'" align="right">'+"Invalid Form Submit Response: Unexpected Data Object Format",null,haveGrowl===true?"yes":"no",haveGrowl===true?"fail":"",_C$.param_NotificationTimeERR);setTimeout(()=>{OverlayHide()},_C$.param_NotificationTimeERR+500);_Utils$.evalJsFxCode(_N$+"."+_m$+" (3)",typeof evfailcode==="function"?()=>{"use strict";evfailcode(the_form_id,url,msg)}:()=>{"use strict";!!evfailcode?eval(evfailcode):null})}}).fail(msg=>{OverlayClear();AlertDialog("<h4>HTTP&nbsp;Status: "+_Utils$.escape_html(msg.status)+" "+_Utils$.escape_html(HTTP_STATUS_CODES[String(msg.status)]?HTTP_STATUS_CODES[String(msg.status)]:msg.statusText?msg.statusText:"Unknown")+"</h4><br>"+"\n"+"<h5>XHR Server Response NOT Validated ...</h5>"+(msg.status==401?"<h6>If the auth credentials are valid and still getting this message do a full page refresh in the browser and try again, it could be a re-auth issue !</h6>":""),typeof evfailcode==="function"?()=>{"use strict";evfailcode(the_form_id,url,msg)}:()=>{"use strict";!!evfailcode?eval(evfailcode):null},"FAIL",null,null,dlg);setTimeout(()=>{OverlayHide()},_C$.param_NotificationTimeERR+1e3)})};_C$.SubmitFormByAjax=SubmitFormByAjax;const AjaxRequestByForm=function(r,i,a){const o="AjaxRequestByForm";r=_Utils$.stringPureVal(r,true);i=_Utils$.stringPureVal(i,true);let l=null;let n=null;let s="";if(r!=""){l=$("form#"+r);if(typeof l.get(0)=="undefined"){_p$.error(_N$,o,"ERR: Form ["+r+"] was not found");return null}if(i==""){i=_Utils$.stringPureVal(l.attr("action"),true)}}if(i==""||i=="#"){_p$.error(_N$,o,"ERR: Invalid or Empty URL");return null}if(r==""){n=AjaxRequestFromURL(i,"GET",a)}else{const e=_Utils$.stringPureVal(l.attr("method"),true);const _=_Utils$.stringPureVal(l.attr("enctype"),true);let t=false;if(e.toLowerCase()=="post"&&_.toLowerCase()=="multipart/form-data"){let e=l.find("input:file");if(typeof e!="undefined"){if(typeof e.get(0)!="undefined"){t=true}}}if(t!==true){s=l.serialize();n=AjaxRequestFromURL(i,"POST",a,s)}else{try{s=new FormData(l.get(0));n=AjaxPostMultiPartToURL(i,a,s)}catch(e){s=l.serialize();n=AjaxRequestFromURL(i,"POST",a,s);const c="ERR: "+o+" FormData Object Failed. File Attachments were NOT sent ! Try to upgrade / change your browser. It may not support HTML5 File Uploads.";_p$.error(_N$,c," # Form:",r);AlertDialog(_Utils$.escape_html(c),null,"Form: "+r)}}}return n};_C$.AjaxRequestByForm=AjaxRequestByForm;const AjaxPostMultiPartToURL=function(e,t,r,i=null,a=null,o=null,l=false,n=false){const s="AjaxPostMultiPartToURL";e=_Utils$.stringPureVal(e,true);if(e==""||e=="#"){_p$.error(_N$,s,"ERR: Empty URL");return null}t=getValidjQueryAjaxType(t);let _={async:true,type:"POST",url:String(e),contentType:false,processData:false,data:r,dataType:String(t)};if(!!o&&typeof o=="object"){_.headers=o}if(i===false&&a===false){i="";a="";_.username="";_.password=""}else{i=_Utils$.stringPureVal(i,true);a=_Utils$.stringPureVal(a);if(n===true||!!i&&!!a){_.username=String(i);_.password=String(a)}}if(n===true){l=false;_.crossDomain=true}if(l===true){_.xhrFields={withCredentials:true}}return $.ajax(_)};_C$.AjaxPostMultiPartToURL=AjaxPostMultiPartToURL;const AjaxRequestFromURL=function(e,t,r,i,a=null,o=null,l=null,n=false,s=false){const _="AjaxRequestFromURL";e=_Utils$.stringPureVal(e,true);if(e==""){_p$.error(_N$,_,"ERR: Empty URL");return null}t=_Utils$.stringPureVal(t,true).toUpperCase();switch(t){case"OPTIONS":case"DELETE":case"PATCH":case"PUT":case"POST":case"HEAD":case"GET":break;default:t="GET"}r=getValidjQueryAjaxType(r);if(typeof i!="object"){i=_Utils$.stringPureVal(i)}let c={async:true,type:String(t),url:String(e),data:i,dataType:String(r)};if(!!l&&typeof l=="object"){c.headers=l}if(a===false&&o===false){a="";o="";c.username="";c.password=""}else{a=_Utils$.stringPureVal(a,true);o=_Utils$.stringPureVal(o);if(s===true||!!a&&!!o){c.username=String(a);c.password=String(o)}}if(s===true){n=false;c.crossDomain=true}if(n===true){c.xhrFields={withCredentials:true}}return $.ajax(c)};_C$.AjaxRequestFromURL=AjaxRequestFromURL;const LoadElementContentByAjax=function(i,e,a,o,l,t,r=false,n=null){const s="LoadElementContentByAjax";i=_Utils$.stringPureVal(i,true);i=_Utils$.create_htmid(i);if(i==""){_p$.error(_N$,s,"ERR: Empty Element ID");return}if(e===true){e=_C$.param_LoaderImg}e=_Utils$.stringPureVal(e,true);if(e!=""){if($("#"+i+"__"+_Utils$.create_htmid(s)).length==0){$("#"+i).prepend('<span id="'+_Utils$.escape_html(i)+"__"+_Utils$.create_htmid(s)+'"><img src="'+_Utils$.escape_html(e)+'" title="Loading ..." alt="Loading ..."></span><br>')}}let _=AjaxRequestFromURL(a,o,l,t);_.done(e=>{let t="";if(l==="json"){if(e.hasOwnProperty("div_content_html")){t=String(e.div_content_html)}}else{t=String(e)}if(r===true){$("#"+i).replaceWith(t)}else{$("#"+i).empty().html(t)}}).fail(e=>{let t=!!_C$.param_NotifyLoadError;if(n===true||n===false){t=!!n}const r="ElementID: "+i+" ; "+"URL: "+a+" ; "+"Method: "+o+" ; "+"DataType: "+l;if(t===true){GrowlNotificationAdd("HTTP Status: "+e.status+" "+HTTP_STATUS_CODES[String(e.status)]?HTTP_STATUS_CODES[String(e.status)]:e.statusText?e.statusText:"Unknown","FAIL: Invalid Server Response for: "+_Utils$.escape_html(s)+"<br>"+"<b><i>Details:</i></b><br>"+_Utils$.nl2br(_Utils$.escape_html(_Utils$.stringReplaceAll(" ; ","\n",r))),_C$.param_ImgNotOK,0,true,"dark")}else{_p$.error(_N$,s,"ERR: Invalid Server Response","HTTP Status Code:",e.status,";",r)}$("#"+i).empty().html("")})};_C$.LoadElementContentByAjax=LoadElementContentByAjax;const windwScrollDown=function(e,t){let r=_Utils$.format_number_int(parseInt(t));if(r<0){r=_Utils$.format_number_int(parseInt($(document).height()));if(r<0){r=0}}try{e.scrollBy(0,r)}catch(e){}};_C$.windwScrollDown=windwScrollDown;const WayPoint=function(elSelector,evcode){const _m$="WayPoint";elSelector=_Utils$.stringPureVal(elSelector,true);if(elSelector==""||elSelector=="."||elSelector=="#"){_p$.error(_N$,_m$,"ERR: invalid selector:",elSelector);return}if(typeof evcode!=="function"){evcode=_Utils$.stringPureVal(evcode);if(_Utils$.stringTrim(evcode)==""){_p$.error(_N$,_m$,"ERR: empty evcode");return}}let scrollTrigger=true;const $w=$(window);$(window).scroll(()=>{if(!scrollTrigger){return}const $e=$(String(elSelector));if(!$e.length||$e.is(":hidden")){return false}const wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height(),th=0;const shouldLoad=eb>=wt-th&&et<=wb+th;if(shouldLoad){scrollTrigger=false;_Utils$.evalJsFxCode(_N$+"."+_m$,typeof evcode==="function"?()=>{"use strict";evcode($e,elSelector)}:()=>{"use strict";!!evcode?eval(evcode):null})}})};_C$.WayPoint=WayPoint;const copyToClipboard=e=>{e=_Utils$.stringPureVal(e,true);if(e==""){return String("ERR: No ID")}const t=window;const r=document;let i;try{i=r.getElementById(e)}catch(e){return String("ERR: "+e)}try{const a=r.createRange();a.selectNode(i);t.getSelection().removeAllRanges();t.getSelection().addRange(a);r.execCommand("copy");setTimeout(()=>{t.getSelection().removeAllRanges()},250)}catch(e){return String("ERR: "+e)}return""};_C$.copyToClipboard=copyToClipboard;const VirtualFileDownload=function(e,t,r,i=null,a=false){const o="VirtualFileDownload";e=_Utils$.stringPureVal(e);t=_Utils$.stringPureVal(t,true);if(t==""){t="file.none"}r=_Utils$.stringPureVal(r,true);if(r==""){r="application/octet-stream"}i=_Utils$.stringPureVal(i,true);if(i==""){i=String(_C$.param_Charset)}if(a===true){i=""}else{a=false}let l=null;try{l=document.createElement("a");if(l){l.href=String("data:"+String(r)+(i?";charset="+i:"")+";base64,"+_Utils$.b64Enc(e,a));l.target="_blank";l.setAttribute("download",String(t));document.body.appendChild(l);l.style="display:none";l.click()}}catch(e){l=false;_p$.error(_N$,o,"ERR: Create Failed:",e)}if(l){setTimeout(()=>{try{document.body.removeChild(l)}catch(e){_p$.warn(_N$,o,"WARN: Remove Failed:",e)}},250)}};_C$.VirtualFileDownload=VirtualFileDownload;const VirtualFileUploadHandler=function(n,s,_,c,u){const f="VirtualFileUploadHandler";const m="File Uploader WARNING: ";u=_Utils$.stringPureVal(u,true);if(u==""){_p$.error(_N$,f,"ERR:","Empty MimeType");return}n=_Utils$.stringPureVal(n,true);n=_Utils$.create_htmid(n);if(n==""){_p$.error(_N$,f,"ERR:","Invalid uploadInput ID");return}s=_Utils$.stringPureVal(s,true);s=_Utils$.create_htmid(s);if(s==""){_p$.error(_N$,f,"ERR:","Invalid uploadPreview ID");return}const p=String(s)+"__details";if(!_){_=.1}_=_Utils$.format_number_float(_);if(_<.01){_=.01}else if(_>24){_=24}if(typeof c!="function"){c=null}const d=$("#"+n);const g=$("#"+s);d.on("change",()=>{const e=d[0].files[0];if(!e){d.val("");_p$.error(_N$,f,"ERR:","Invalid File Uploader");return}let t=_Utils$.stringPureVal(e.name,true);let r=_Utils$.stringPureVal(e.type,true).toLowerCase();let i=_Utils$.format_number_int(e.size,false);if(t==""||r==""||r!==u){d.val("");g.text(m+"Invalid File Type ["+r+"]: "+t);return}if(i<=0){d.val("");g.text(m+"Invalid File Size - Empty");return}else if(i>1024*1024*32){d.val("");g.text(m+"Invalid File Size - larger than 32MB");return}const a='<div title="Remove the File" style="width:20px; height:20px; line-height:20px; font-size:1rem; font-weight:bold; color:#111111; cursor:pointer;" onClick="jQuery(\'#'+_Utils$.escape_js(n)+"').val(''); jQuery('#"+_Utils$.escape_js(s)+"').empty().html('');\">&times;</div>";g.html(a);const o=(e,t)=>{return'<span id="'+_Utils$.escape_html(e)+'">'+_Utils$.escape_html(t)+"</span>"};try{const l=new FileReader;l.onloadend=()=>{g.append(""+o(p,t));setTimeout(()=>{let e=false;if(String(l.result).length<=1024*1024*_){e=true;if(typeof c=="function"){try{c(String(l.result),String(r),String(l.result).length,String(t))}catch(e){d.val("");_p$.error(_N$,f,"ERR:","Uploader CallBack Failed:",e);return}}}else{d.val("");g.text(m+"Size is higher than allowed: "+String(l.result).length+" Bytes")}if(e){g.empty().html(String(a)+"\n"+o(p,t))}},500)};try{l.readAsDataURL(e)}catch(e){d.val("");_p$.error(_N$,f,"ERR: Failed to Read Data URL:",e);return}}catch(e){d.val("");_p$.error(_N$,f,"ERR:",e);return}})};_C$.VirtualFileUploadHandler=VirtualFileUploadHandler;const VirtualImageUploadHandler=function(i,a,f,m,o,l,p,d,g,h,y){const U="VirtualImageUploadHandler";const C="Image Uploader WARNING: ";i=_Utils$.stringPureVal(i,true);i=_Utils$.create_htmid(i);if(i==""){_p$.error(_N$,U,"ERR:","Invalid uploadInput ID");return}a=_Utils$.stringPureVal(a,true);a=_Utils$.create_htmid(a);if(a==""){_p$.error(_N$,U,"ERR:","Invalid uploadPreview ID");return}const w=String(a)+"__img";if(!f){f=.85}f=_Utils$.format_number_float(f);if(f<.1){f=.1}else if(f>1){f=1}if(!m){m=.1}m=_Utils$.format_number_float(m);if(m<.01){m=.01}else if(m>4){m=4}o=_Utils$.format_number_int(o);if(o<=0){o=800}l=_Utils$.format_number_int(l);if(l<=0){l=600}if(d!==false){d=true}g=_Utils$.format_number_int(g);if(g<=0){g=o}h=_Utils$.format_number_int(h);if(h<=0){h=h}if(y!==true){y=false}if(typeof p!="function"){p=null}const R=$("#"+i);const v=$("#"+a);R.on("change",()=>{const e=R[0].files[0];if(!e){R.val("");_p$.error(_N$,U,"ERR:","Invalid File Uploader");return}let n=_Utils$.stringPureVal(e.name,true);let s=_Utils$.stringPureVal(e.type,true).toLowerCase();let t=_Utils$.format_number_int(e.size,false);const r=/^(image\/svg\+xml|image\/webp|image\/jpeg|image\/png|image\/gif)$/i;if(n==""||!r.test(s)){R.val("");v.text(C+"Invalid File Type ["+s+"] - (only JPEG / WEBP / PNG / GIF or SVG Images are allowed): "+n);return}if(t<43){R.val("");v.text(C+"Invalid File Size - Image size is empty or too small");return}else if(t>1024*1024*32){R.val("");v.text(C+"Invalid File Size - Image is larger than 32MB");return}const _='<div title="Remove the Image" style="width:20px; height:20px; line-height:20px; font-size:1rem; font-weight:bold; color:#111111; cursor:pointer;" onClick="jQuery(\'#'+_Utils$.escape_js(i)+"').val(''); jQuery('#"+_Utils$.escape_js(a)+"').empty().html('');\">&times;</div>";v.html(_);const c=(e,t,r,i)=>{return'<img id="'+_Utils$.escape_html(e)+'" src="'+_Utils$.escape_html(t)+'" style="max-width:'+_Utils$.escape_html(r)+"px; max-height:"+_Utils$.escape_html(i)+'px; width:auto !important; height:auto !important;">'};try{const u=new FileReader;u.onloadend=()=>{v.append(""+c(w,u.result,o,l));setTimeout(()=>{const e=String(s).toLowerCase()==="image/svg+xml"?true:false;const t=$("#"+w);let i=false;let a=Math.round(t.width())||1;let o=Math.round(t.height())||1;let r=false;if(y===true){if(s==="image/gif"){r=true}}if(e||r){if(String(u.result).length<=1024*1024*m){i=true;if(typeof p=="function"){try{p(String(u.result),a,o,e,String(s),String(u.result).length,String(n))}catch(e){R.val("");_p$.error(_N$,U,"ERR:","SVG CallBack Failed:",e);return}}}else{R.val("");v.text(C+"Size is higher than allowed size: "+String(u.result).length+" Bytes")}if(i){v.empty().html("");if(!d){v.html(String(_)+"\n"+c(w,u.result,g,h))}}}else{$("#"+w).remove();v.append('<canvas id="uxm-img-uploader-result-cnvs" width="'+_Utils$.escape_html(a)+'" height="'+_Utils$.escape_html(o)+'" style="border: 1px dotted #ECECEC;"></canvas>');const l=new Image;l.width=a;l.height=o;l.onload=()=>{const e=$("#uxm-img-uploader-result-cnvs")[0];if(!e){R.val("");_p$.error(_N$,U,"ERR:","Failed to Get Resizable Container");return}const t=e.getContext("2d");if(!t){R.val("");_p$.error(_N$,U,"ERR:","Failed to Get Resizable Container Context");return}try{t.drawImage(l,0,0,a,o)}catch(e){R.val("");_p$.error(_N$,U,"ERR:","Failed to Draw Canvas Image:",e);return}const r=e.toDataURL(String(s),f);if(String(r).length<=1024*1024*m){i=true;if(typeof p=="function"){try{p(String(r),a,o,false,String(s),String(r).length,String(n))}catch(e){R.val("");_p$.error(_N$,U,"ERR:","IMG CallBack Failed:",e);return}}if(i){v.empty().html("");if(!d){v.html(String(_)+"\n"+c(w,r,g,h))}}}else{R.val("");v.text(C+"Image (resized) Size is higher than allowed: "+String(r).length+" Bytes");return}};l.src=String(u.result)}},500)};try{u.readAsDataURL(e)}catch(e){R.val("");_p$.error(_N$,U,"ERR: Failed to Read Data URL:",e);return}}catch(e){R.val("");_p$.error(_N$,U,"ERR:",e);return}})};_C$.VirtualImageUploadHandler=VirtualImageUploadHandler;const DateSmartField=e=>{const t="DateSmartField";if(e.length<=0){_p$.warn(_N$,t,"Element is Empty");return}try{const i=$(e);if(i.length<=0||i.is("input")!=true||i.attr("type")!="date"){_p$.warn(_N$,t,"Element is Not an Input type Date");return}const r=_Utils$.stringPureVal(i.attr("min"),true);const a=_Utils$.stringPureVal(i.attr("max"),true);const o=_Utils$.stringPureVal(i.attr("step"),true);if(!i.prop("readonly")){i.addClass("ux-fake-readonly")}i.attr("data-readonly",i.prop("readonly")?"true":"false").attr("data-min",r).attr("data-max",a).attr("data-step",o).attr("placeholder","yyyy-mm-dd");i.removeAttr("step").removeAttr("max").removeAttr("min").attr("type","text");i.prop("readonly",true);i.on("click",e=>{const t=$(e.currentTarget);const r=_Utils$.stringPureVal(t.attr("data-readonly"),true);if(r==="true"){return}const i=_Utils$.stringPureVal(t.attr("data-min"),true);const a=_Utils$.stringPureVal(t.attr("data-max"),true);const o=_Utils$.stringPureVal(t.attr("data-step"),true);t.prop("readonly",false);t.attr("type","date").attr("min",i).attr("max",a).attr("step",o)}).on("blur",e=>{const t=$(e.currentTarget);const r=_Utils$.stringPureVal(t.attr("data-readonly"),true);if(r==="true"){i.removeClass("ux-fake-readonly")}else{i.addClass("ux-fake-readonly")}t.removeAttr("step").removeAttr("max").removeAttr("min").attr("type","text");t.prop("readonly",true)})}catch(e){_p$.error(_N$,t,"ERR:",e)}};_C$.DateSmartField=DateSmartField;const DateSmartsFields=e=>{const t="DateSmartsFields";e=_Utils$.stringTrim(_Utils$.create_htmid(_Utils$.stringPureVal(e,true)));if(e==""){_p$.warn(_N$,t,"ClassName is Empty or Invalid");return""}$("input[type=date]."+e).each((e,t)=>{DateSmartField(t)})};_C$.DateSmartsFields=DateSmartsFields;const SelectReadOnly=e=>{const t="SelectReadOnly";if(e.length<=0){_p$.warn(_N$,t,"Element is Empty");return}if(e.is("select")!==true){_p$.warn(_N$,t,"Element is Not a Select List");return}try{e.attr("readonly","").find("option:not(:selected)").each((e,t)=>{$(t).prop("disabled",true)})}catch(e){_p$.error(_N$,t,"ERR:",e)}};_C$.SelectReadOnly=SelectReadOnly;const allowModalBox=function(){let e=false;if(_C$.param_ModalBoxActive==1&&!_Te$tBrowser.checkIsMobileDevice()){e=!!_C$.param_ModalBoxActive}else if(_C$.param_ModalBoxActive>1){e=!!_C$.param_ModalBoxActive}return!!e};const allowModalCascading=function(){const t="allowModalCascading";let e=true;if(!!_C$.param_ModalBoxNoCascade){e=false}try{if(typeof smartJ$ModalBox!="undefined"){if(self.name){if(self.name==smartJ$ModalBox.getName()){return e}}}}catch(e){_p$.error(_N$,t,"ERR: Failed for Self:",e)}try{if(typeof parent.smartJ$ModalBox!="undefined"){if(parent.name){if(parent.name==parent.smartJ$ModalBox.getName()){return e}}}}catch(e){_p$.error(_N$,t,"ERR: Failed for Parent:",e)}return true};const OverlayValidID=e=>{e=_Utils$.stringPureVal(e,true);e=_Utils$.create_htmid(e);if(e==""){e=String(sfOverlayID)}return String(e)};const DialogSelectType=()=>{switch(_C$.param_NotificationDialogType){case"alertable":if(typeof $.alertable!="undefined"){return"alertable"}break;case"ui":case"auto":if(typeof smartJ$UI=="object"&&typeof smartJ$UI.DialogAlert=="function"&&typeof smartJ$UI.DialogConfirm=="function"){return"ui"}else if(_C$.param_NotificationDialogType==="auto"&&typeof $.alertable!="undefined"){return"alertable"}break}return"native"};const GrowlSelectType=()=>{if(_C$.param_Notifications!=="growl"){return""}switch(_C$.param_NotificationGrowlType){case"toastr":if(typeof $.toastr!="undefined"){return"toastr"}break;case"ui":case"auto":if(typeof smartJ$UI!="undefined"&&typeof smartJ$UI.GrowlAdd=="function"&&typeof smartJ$UI.GrowlRemove=="function"){return"ui"}else if(_C$.param_NotificationGrowlType==="auto"&&typeof $.toastr!="undefined"){return"toastr"}break}return""};const getValidjQueryAjaxType=e=>{e=_Utils$.stringPureVal(e,true);switch(e){case"jsonp":case"json":case"script":case"html":case"xml":case"text":break;default:e="text"}return String(e)};const initModalOrPopUp=function(_,c,u,f,e,t,m){const p="initModalOrPopUp";_=_Utils$.stringPureVal(_);c=_Utils$.stringPureVal(c);u=_Utils$.format_number_int(parseInt(u),false);f=_Utils$.format_number_int(parseInt(f),false);e=_Utils$.format_number_int(parseInt(e),true);t=_Utils$.format_number_int(parseInt(t),true);m=_Utils$.format_number_int(parseInt(m),true);if((typeof smartJ$ModalBox!="undefined"&&allowModalCascading()&&e!=1||e==-1)&&allowModalBox()){if(m<=0){smartJ$ModalBox.setRefreshParent(_C$.getFlag("RefreshState"),_C$.getFlag("RefreshURL"))}_C$.setFlag("RefreshState",0);_C$.setFlag("RefreshURL","");if(t!=1){smartJ$ModalBox.LoadURL(_,_C$.param_ModalBoxProtected)}else{smartJ$ModalBox.LoadURL(_,_C$.param_ModalBoxProtected,u,f)}}else{if(c==""||c.toLowerCase()=="_blank"||c.toLowerCase()=="_self"){c=String(defSmartPopupTarget)}let e=0;try{e=_Utils$.format_number_int(parseInt(screen.width))}catch(e){}if(e<=0){e=920}let t=0;try{t=_Utils$.format_number_int(parseInt(screen.height))}catch(e){}if(t<=0){t=700}let r=_Utils$.format_number_int(Math.round(e*.9));if(u>r){u=r}let i=_Utils$.format_number_int(Math.round(t*.8));if(f>i){f=i}if(u<200||f<100){u=r;f=i}let a=50;let o=_Utils$.format_number_int(Math.round(e/2-u/2));if(o<10){o=10}if(objRefWinPopup){windowFocus(objRefWinPopup)}let l=true;let n=true;if(m==-1){n=false}else if(m==1){l=false}else if(m==2){l=false;n=false}let s=String(_C$.param_LoaderBlank);if(n!==true){s=_}try{objRefWinPopup=window.open(s,c,"top="+a+",left="+o+",width="+u+",height="+f+",toolbar=0,scrollbars=1,resizable=1")}catch(e){_p$.error(_N$,p,"ERROR raising a new PopUp Window:",e)}if(objRefWinPopup){windowFocus(objRefWinPopup);if(n===true){try{setTimeout(()=>{objRefWinPopup.location=_},_C$.param_TimeDelayCloseWnd)}catch(e){_p$.error(_N$,p,"ERROR redirecting the PopUp Window to ["+_+"]:",e)}}if(l!==true){_C$.setFlag("RefreshState",0);_C$.setFlag("RefreshURL","")}else{try{const d=setInterval(()=>{if(getFlag("PageAway")!==true){let e=_C$.getRefPopup();if(e&&e.closed){clearInterval(d);try{if(_C$.getFlag("RefreshState")){if(!_C$.getFlag("RefreshURL")){self.location=self.location}else{self.location=String(_C$.getFlag("RefreshURL"))}_C$.setFlag("RefreshState",0);_C$.setFlag("RefreshURL","")}}catch(e){_p$.warn(_N$,p,"WARN: Failed to Set Refresh on Self:",e)}return false}}},250)}catch(e){}}}}}}};smartJ$Browser.secureClass();window.smartJ$Browser=smartJ$Browser;
// #END
