// JS-Script (UM): jRate.js @ 2025-02-15 03:03:27 +0000
(function(S,O){S.fn.jRate=function(t){"use strict";var n=S(this);var s=n.attr("id");if(s==O||s==""){throw Error("jRate: Element ID is empty or missing");return}var r={rating:0,shape:"STAR",count:5,width:"20",height:"20",widthGrowth:0,heightGrowth:0,backgroundColor:"#EEEEEE",startColor:"#FFCC00",endColor:"#FFAA00",strokeColor:"#ECECEC",transparency:1,shapeGap:"0px",opacity:1,min:0,max:5,precision:.1,minSelected:0,strokeWidth:"2px",horizontal:true,reverse:false,readOnly:false,touch:true,onChange:null,onSet:null};var c=S.extend({},r,t);var a,f,h;function l(t){return typeof t!=="undefined"}function e(){if(l(c)){return c.rating}}function o(t){if(!l(t)||t<c.min||t>c.max){throw Error("jRate: "+t+" is not in range("+min+","+max+")");return}c.rating=t;g(t)}function i(t){var r='<svg width="'+c.width+'" height="'+c.height+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" ';var e="</svg>";var o=c.horizontal;var n=s;var i='<defs><linearGradient id="'+n+"_grad"+t+'" x1="0%" y1="0%" x2="'+(o?100:0)+'%" y2="'+(o?0:100)+'%">'+'<stop offset="0%"  stop-color="'+c.backgroundColor+'"></stop>'+'<stop offset="0%" stop-color="'+c.backgroundColor+'"></stop>'+"</linearGradient></defs>";var a="";switch(c["shape"]){case"STAR":a=r+'viewBox="0 12.705 512 486.59"'+">"+i+'<polygon style="fill: url(#'+n+"_grad"+t+");stroke:"+c.strokeColor+";fill-opacity:"+ +c.transparency+";stroke-width:"+c.strokeWidth+';" points="256.814,12.705 317.205,198.566'+" 512.631,198.566 354.529,313.435 "+"414.918,499.295 256.814,384.427 "+"98.713,499.295 159.102,313.435 "+'1,198.566 196.426,198.566"/>'+e;break;case"RECTANGLE":a=r+">"+i+'<rect width="'+c.width+'" height="'+c.height+'" fill="url(#'+n+"_grad"+t+')" style="stroke:'+c.strokeColor+";fill-opacity:"+ +c.transparency+";stroke-width:"+c.strokeWidth+';"/>'+e;break;case"RHOMBUS":a=r+">"+i+'<polygon points="'+c.width/2+",0 "+c.width+","+c.height/2+" "+c.width/2+","+c.height+" 0,"+c.height/2+'" fill="url(#'+n+"_grad"+t+')"  style="stroke:'+c.strokeColor+";fill-opacity:"+ +c.transparency+";stroke-width:"+c.strokeWidth+';"/>'+e;break;case"TRIANGLE":a=r+">"+i+'<polygon points="'+c.width/2+",0 0,"+c.height+" "+c.width+","+c.height+'" fill="url(#'+n+"_grad"+t+')" style="stroke:'+c.strokeColor+";fill-opacity:"+ +c.transparency+";stroke-width:"+c.strokeWidth+';"/>'+e;break;case"CIRCLE":a=r+">"+i+'<circle  cx="'+c.width/2+'" cy="'+c.height/2+'" r="'+c.width/2+'" fill="url(#'+n+"_grad"+t+')" style="stroke:'+c.strokeColor+";fill-opacity:"+ +c.transparency+";stroke-width:"+c.strokeWidth+';"/>'+e;break;default:throw Error("jRate: No such shape as "+c["shape"]);return""}return a}function d(){n.css("white-space","nowrap");if(!c.readOnly){n.css("cursor","pointer")}else{n.css("cursor","help")}n.css("fill",c["shape"])}function u(t,r){t.on("mousemove",C(r)).on("mouseenter",C(r)).on("click",x(r)).on("mouseover",C(r)).on("hover",C(r)).on("mouseleave",w).on("mouseout",w).on("JRate.change",b).on("JRate.set",E);if(c.touch){t.on("touchstart",R(r)).on("touchmove",R(r)).on("touchend",_(r)).on("tap",_(r))}}function p(){var t=s;for(var r=0;r<c.count;r++){h.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(0).attr({offset:"0%"});h.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(0).attr({"stop-color":c.backgroundColor});h.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(1).attr({offset:"0%"});h.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(1).attr({"stop-color":c.backgroundColor})}}function g(t){p();var r=(c.max-c.min)/c.count;t=(t-c.min)/r;var e=c.startColor;var o=s;if(c.reverse){for(var n=0;n<t;n++){var i=c.count-1-n;h.eq(i).find("#"+o+"_grad"+(i+1)).find("stop").eq(0).attr({offset:"100%"});h.eq(i).find("#"+o+"_grad"+(i+1)).find("stop").eq(0).attr({"stop-color":e});if(parseInt(t)!==t){var a=Math.ceil(c.count-t)-1;h.eq(a).find("#"+o+"_grad"+(a+1)).find("stop").eq(0).attr({offset:100-t*10%10*10+"%"});h.eq(a).find("#"+o+"_grad"+(a+1)).find("stop").eq(0).attr({"stop-color":c.backgroundColor});h.eq(a).find("#"+o+"_grad"+(a+1)).find("stop").eq(1).attr({offset:100-t*10%10*10+"%"});h.eq(a).find("#"+o+"_grad"+(a+1)).find("stop").eq(1).attr({"stop-color":e})}if(l(f)){e=m(c.count-1,n)}}}else{for(var n=0;n<t;n++){h.eq(n).find("#"+o+"_grad"+(n+1)).find("stop").eq(0).attr({offset:"100%"});h.eq(n).find("#"+o+"_grad"+(n+1)).find("stop").eq(0).attr({"stop-color":e});if(t*10%10>0){h.eq(Math.ceil(t)-1).find("#"+o+"_grad"+(n+1)).find("stop").eq(0).attr({offset:t*10%10*10+"%"});h.eq(Math.ceil(t)-1).find("#"+o+"_grad"+(n+1)).find("stop").eq(0).attr({"stop-color":e})}if(l(f)){e=m(c.count,n)}}}}var m=function(t,r){var e=[];for(var o=0;o<3;o++){var n=Math.round((a[o]-f[o])/t);var i=a[o]+n*(r+1);if(i/256){e[o]=(a[o]-n*(r+1))%256}else{e[o]=(a[o]+n*(r+1))%256}}return"rgba("+e[0]+","+e[1]+","+e[2]+","+c.opacity+")"};function v(t,r){var e=parseInt(t.slice(1,3),16);var o=parseInt(t.slice(3,5),16);var n=parseInt(t.slice(5,7),16);if(typeof r==O){r=1}if(r<0){r=0}else if(r>1){r=1}var i=Math.floor(r*255);return[e,o,n,i]}function w(){if(!c.readOnly){g(c.rating);b(null,{rating:c.rating})}}function y(t){var r=1/c.precision;return Math.ceil(t*r)/r}function k(t,r,e,o){if(c.readOnly){return}var n=h.eq(r-1);var i;if(c.horizontal){i=(t.pageX-n.offset().left)/n.width()}else{i=(t.pageY-n.offset().top)/n.height()}var a=(c.max-c.min)/c.count;i=c.reverse?i:1-i;var s=((c.reverse?c.max-c.min-r+1:r)-i)*a;s=c.min+Number(y(s));if(s<c.minSelected){s=c.minSelected}if(s<=c.max&&s>=c.min){g(s);if(o){c.rating=s}n.trigger(e,{rating:s})}}function q(t,r,e,o){if(c.readOnly){return}var n=t.originalEvent.changedTouches;if(n.length>1){return}var i=n[0];var a=h.eq(r-1);var s;if(c.horizontal){s=(i.pageX-a.offset().left)/a.width()}else{s=(i.pageY-a.offset().top)/a.height()}var f=(c.max-c.min)/c.count;s=c.reverse?s:1-s;var l=((c.reverse?c.max-c.min-r+1:r)-s)*f;l=c.min+Number(y(l));if(l<c.minSelected){l=c.minSelected}if(l<=c.max&&l>=c.min){g(l);if(o){c.rating=l}a.trigger(e,{rating:l})}}function C(r){return function(t){k(t,r,"JRate.change")}}function x(r){return function(t){k(t,r,"JRate.set",true)}}function R(r){return function(t){q(t,r,"JRate.touch")}}function _(r){return function(t){q(t,r,"JRate.tap",true)}}function b(t,r){if(c.onChange&&typeof c.onChange==="function"){c.onChange.apply(this,[r.rating])}}function E(t,r){if(c.onSet&&typeof c.onSet==="function"){c.onSet.apply(this,[r.rating])}}function G(){var t,r,e,o;for(r=0;r<c.count;r++){n.append(i(r+1))}h=n.find("svg");for(r=0;r<c.count;r++){t=h.eq(r);u(t,r+1);if(!c.horizontal){t.css({display:"block","margin-bottom":c.shapeGap||"0px"})}else{t.css("margin-right",c.shapeGap||"0px")}if(c.widthGrowth){e="scaleX("+(1+c.widthGrowth*r)+")";t.css({transform:e,"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e})}if(c.heightGrowth){o="scaleY("+(1+c.heightGrowth*r)+")";t.css({transform:o,"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o})}}p();g(c.rating);h.attr({width:c.width,height:c.height})}if(c.startColor){a=v(c.startColor)}if(c.endColor){f=v(c.endColor)}d();G();return S.extend({},this,{getRating:e,setRating:o,setReadOnly:function(t){c.readOnly=t},isReadOnly:function(){return c.readOnly}})}})(jQuery);
// #END
