// JS-Script (UM): jquery.pinlogin.js @ 2025-02-15 03:03:27 +0000
(function(o,t,e,i){"use strict";var n="pinlogin",s={fields:6,placeholder:"\u2022",hideinput:true,delay:250,autofocus:false,complete:function(t){},invalid:function(t,e){},keydown:function(t,e,i){},input:function(t,e,i){}};function a(t,e){this.element=t;this.settings=o.extend({},s,e);this._defaults=s;this._name=n;this.init()}o.extend(a.prototype,{init:function(){this._values=new Array(this.settings.fields);this._container=o("<div></div>").prop({id:this._name,class:this._name});for(var t=0;t<this.settings.fields;t++){var e=this._createInput(this._getFieldId(t),t);this._attachEvents(e,t);this._container.append(e)}o(this.element).append(this._container);this.reset()},_createInput:function(t,e){return o("<input>").prop({type:"tel",id:t,name:t,maxlength:1,inputmode:"numeric","x-inputmode":"numeric",pattern:"^[0-9]*$",autocomplete:"off",class:"pinlogin-field"})},_attachEvents:function(t,n){var s=this;t.on("focus",o.proxy(function(t){o(this).val("")}));t.on("blur",o.proxy(function(t){if(s._values[n]!=i&&!!s._values[n].length&&s.settings.hideinput){var e=o(this);setTimeout(function(){e.val(s.settings.placeholder)},s.settings.delay)}}));t.on("input",o.proxy(function(t){var e=new RegExp(o(this).prop("pattern"));if(!o(this).val().match(e)){o(this).val("").addClass("invalid");s.settings.invalid(o(this),n);t.preventDefault();t.stopPropagation();return}else{o(this).removeClass("invalid")}s.settings.input(t,o(this),n);s._values[n]=o(this).val();if(n<s.settings.fields-1){s._getField(n+1).removeProp("readonly");s.focus(n+1)}else{var i=s._values.join("");s._getField(n).trigger("blur");s.settings.complete(i)}}));t.on("keydown",o.proxy(function(t){s.settings.keydown(t,o(this),n);if((t.keyCode==37||t.keyCode==8)&&n>=0){s.resetField(n);if(n>0){s.focus(n-1)}t.preventDefault();t.stopPropagation()}}))},_getFieldId:function(t){return this.element.id+"_"+this._name+"_"+t},_getField:function(t){return o("#"+this._getFieldId(t))},focus:function(t){this.enableField(t);this._getField(t).focus()},reset:function(){var i=this;this._values=new Array(this.settings.fields);this._container.children("input").each(function(t){var e=o(this);setTimeout(function(){e.val("");if(t>0){e.prop("readonly",true).removeClass("invalid")}},i.settings.delay+250)});if(this.settings.autofocus){this.focus(0)}},resetField:function(t){this._values[t]="";if(t>0){this._getField(t).val("").prop("readonly",true).removeClass("invalid")}else{this._getField(t).val("").removeClass("invalid")}},disable:function(){this._container.children("input").each(function(t){o(this).prop("readonly",true)})},disableField:function(t){this._getField(t).prop("readonly",true)},enable:function(){this._container.children("input").each(function(t){o(this).prop("readonly",false)})},enableField:function(t){this._getField(t).prop("readonly",false)}});o.fn[n]=function(t){var e;this.each(function(){e=o.data(this,"plugin_"+n);if(!e){e=new a(this,t);o.data(this,"plugin_"+n,e)}});return e}})(jQuery,window,document);
// #END
