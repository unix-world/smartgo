// JS-Script (UM): dialog.js @ 2023-11-25 11:00:43 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(c){function d(e,o,n){var t=e.getWrapperElement();var i;i=t.appendChild(document.createElement("div"));if(n){i.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{i.className="CodeMirror-dialog CodeMirror-dialog-top"}if(typeof o=="string"){i.innerHTML=o}else{i.appendChild(o)}c.addClass(t,"dialog-opened");return i}function p(e,o){if(e.state.currentNotificationClose){e.state.currentNotificationClose()}e.state.currentNotificationClose=o}c.defineExtension("openDialog",function(e,o,n){if(!n){n={}}p(this,null);var t=d(this,e,n.bottom);var i=false,r=this;function f(e){if(typeof e=="string"){l.value=e}else{if(i){return}i=true;c.rmClass(t.parentNode,"dialog-opened");t.parentNode.removeChild(t);r.focus();if(n.onClose){n.onClose(t)}}}var l=t.getElementsByTagName("input")[0],u;if(l){l.focus();if(n.value){l.value=n.value;if(n.selectValueOnOpen!==false){l.select()}}if(n.onInput){c.on(l,"input",function(e){n.onInput(e,l.value,f)})}if(n.onKeyUp){c.on(l,"keyup",function(e){n.onKeyUp(e,l.value,f)})}c.on(l,"keydown",function(e){if(n&&n.onKeyDown&&n.onKeyDown(e,l.value,f)){return}if(e.keyCode==27||n.closeOnEnter!==false&&e.keyCode==13){l.blur();c.e_stop(e);f()}if(e.keyCode==13){o(l.value,e)}});if(n.closeOnBlur!==false){c.on(t,"focusout",function(e){if(e.relatedTarget!==null){f()}})}}else if(u=t.getElementsByTagName("button")[0]){c.on(u,"click",function(){f();r.focus()});if(n.closeOnBlur!==false){c.on(u,"blur",f)}u.focus()}return f});c.defineExtension("openConfirm",function(e,o,n){p(this,null);var t=d(this,e,n&&n.bottom);var i=t.getElementsByTagName("button");var r=false,f=this,l=1;function u(){if(r){return}r=true;c.rmClass(t.parentNode,"dialog-opened");t.parentNode.removeChild(t);f.focus()}i[0].focus();for(var a=0;a<i.length;++a){var s=i[a];(function(o){c.on(s,"click",function(e){c.e_preventDefault(e);u();if(o){o(f)}})})(o[a]);c.on(s,"blur",function(){--l;setTimeout(function(){if(l<=0){u()}},200)});c.on(s,"focus",function(){++l})}});c.defineExtension("openNotification",function(e,o){p(this,f);var n=d(this,e,o&&o.bottom);var t=false,i;var r=o&&typeof o.duration!=="undefined"?o.duration:5e3;function f(){if(t){return}t=true;clearTimeout(i);c.rmClass(n.parentNode,"dialog-opened");n.parentNode.removeChild(n)}c.on(n,"click",function(e){c.e_preventDefault(e);f()});if(r){i=setTimeout(f,r)}return f})});
// #END
