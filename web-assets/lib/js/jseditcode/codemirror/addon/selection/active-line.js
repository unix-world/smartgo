// JS-Script (UM): active-line.js @ 2022-09-20 09:51:37 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(r){"use strict";var s="CodeMirror-activeline";var f="CodeMirror-activeline-background";var l="CodeMirror-activeline-gutter";r.defineOption("styleActiveLine",false,function(e,t,i){var n=i==r.Init?false:i;if(t==n)return;if(n){e.off("beforeSelectionChange",o);c(e);delete e.state.activeLines}if(t){e.state.activeLines=[];a(e,e.listSelections());e.on("beforeSelectionChange",o)}});function c(e){for(var t=0;t<e.state.activeLines.length;t++){e.removeLineClass(e.state.activeLines[t],"wrap",s);e.removeLineClass(e.state.activeLines[t],"background",f);e.removeLineClass(e.state.activeLines[t],"gutter",l)}}function v(e,t){if(e.length!=t.length)return false;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return false;return true}function a(t,e){var i=[];for(var n=0;n<e.length;n++){var r=e[n];var a=t.getOption("styleActiveLine");if(typeof a=="object"&&a.nonEmpty?r.anchor.line!=r.head.line:!r.empty())continue;var o=t.getLineHandleVisualStart(r.head.line);if(i[i.length-1]!=o)i.push(o)}if(v(t.state.activeLines,i))return;t.operation(function(){c(t);for(var e=0;e<i.length;e++){t.addLineClass(i[e],"wrap",s);t.addLineClass(i[e],"background",f);t.addLineClass(i[e],"gutter",l)}t.state.activeLines=i})}function o(e,t){a(e,t.ranges)}});
// #END
