// JS-Script (UM): comment-fold.js @ 2023-12-03 00:03:55 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(y){"use strict";y.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),r=n.blockCommentStart,o=n.blockCommentEnd;if(!r||!o){return}var i=t.line,f=e.getLine(i);var l;for(var c=t.ch,m=0;;){var a=c<=0?-1:f.lastIndexOf(r,c-1);if(a==-1){if(m==1){return}m=1;c=f.length;continue}if(m==1&&a<t.ch){return}if(/comment/.test(e.getTokenTypeAt(y.Pos(i,a+1)))&&(a==0||f.slice(a-o.length,a)==o||!/comment/.test(e.getTokenTypeAt(y.Pos(i,a))))){l=a+r.length;break}c=a-1}var s=1,u=e.lastLine(),d,b;e:for(var g=i;g<=u;++g){var h=e.getLine(g),k=g==i?l:0;for(;;){var v=h.indexOf(r,k),p=h.indexOf(o,k);if(v<0){v=h.length}if(p<0){p=h.length}k=Math.min(v,p);if(k==h.length){break}if(k==v){++s}else if(!--s){d=g;b=k;break e}++k}}if(d==null||i==d&&b==l){return}return{from:y.Pos(i,l),to:y.Pos(d,b)}})});
// #END
