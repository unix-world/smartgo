// JS-Script (UM): foldcode.js @ 2022-09-20 09:51:31 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(a){"use strict";function t(t,i,e,f){if(e&&e.call){var l=e;e=null}else{var l=s(t,e,"rangeFinder")}if(typeof i=="number")i=a.Pos(i,0);var d=s(t,e,"minFoldSize");function n(e){var n=l(t,i);if(!n||n.to.line-n.from.line<d)return null;var o=t.findMarksAt(n.from);for(var r=0;r<o.length;++r){if(o[r].__isFold&&f!=="fold"){if(!e)return null;n.cleared=true;o[r].clear()}}return n}var o=n(true);if(s(t,e,"scanUp"))while(!o&&i.line>t.firstLine()){i=a.Pos(i.line-1,0);o=n(false)}if(!o||o.cleared||f==="unfold")return;var r=c(t,e,o);a.on(r,"mousedown",function(e){u.clear();a.e_preventDefault(e)});var u=t.markText(o.from,o.to,{replacedWith:r,clearOnEnter:s(t,e,"clearOnEnter"),__isFold:true});u.on("clear",function(e,n){a.signal(t,"unfold",t,e,n)});a.signal(t,"fold",t,o.from,o.to)}function c(e,n,o){var r=s(e,n,"widget");if(typeof r=="function"){r=r(o.from,o.to)}if(typeof r=="string"){var t=document.createTextNode(r);r=document.createElement("span");r.appendChild(t);r.className="CodeMirror-foldmarker"}else if(r){r=r.cloneNode(true)}return r}a.newFoldFunction=function(o,r){return function(e,n){t(e,n,{rangeFinder:o,widget:r})}};a.defineExtension("foldCode",function(e,n,o){t(this,e,n,o)});a.defineExtension("isFolded",function(e){var n=this.findMarksAt(e);for(var o=0;o<n.length;++o)if(n[o].__isFold)return true});a.commands.toggleFold=function(e){e.foldCode(e.getCursor())};a.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")};a.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")};a.commands.foldAll=function(o){o.operation(function(){for(var e=o.firstLine(),n=o.lastLine();e<=n;e++)o.foldCode(a.Pos(e,0),null,"fold")})};a.commands.unfoldAll=function(o){o.operation(function(){for(var e=o.firstLine(),n=o.lastLine();e<=n;e++)o.foldCode(a.Pos(e,0),null,"unfold")})};a.registerHelper("fold","combine",function(){var t=Array.prototype.slice.call(arguments,0);return function(e,n){for(var o=0;o<t.length;++o){var r=t[o](e,n);if(r)return r}}});a.registerHelper("fold","auto",function(e,n){var o=e.getHelpers(n,"fold");for(var r=0;r<o.length;r++){var t=o[r](e,n);if(t)return t}});var i={rangeFinder:a.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false,clearOnEnter:true};a.defineOption("foldOptions",null);function s(e,n,o){if(n&&n[o]!==undefined)return n[o];var r=e.options.foldOptions;if(r&&r[o]!==undefined)return r[o];return i[o]}a.defineExtension("foldOption",function(e,n){return s(this,e,n)})});
// #END
