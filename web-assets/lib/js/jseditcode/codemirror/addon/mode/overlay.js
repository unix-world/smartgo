// JS-Script (UM): overlay.js @ 2023-11-25 11:00:32 +0000
(function(e){if(typeof exports=="object"&&typeof module=="object"){e(require("../../lib/codemirror"))}else if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],e)}else{e(CodeMirror)}})(function(r){"use strict";r.overlayMode=function(a,n,t){return{startState:function(){return{base:r.startState(a),overlay:r.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:r.copyState(a,e.base),overlay:r.copyState(n,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,r){if(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start){r.streamSeen=e;r.basePos=r.overlayPos=e.start}if(e.start==r.basePos){r.baseCur=a.token(e,r.base);r.basePos=e.pos}if(e.start==r.overlayPos){e.pos=e.start;r.overlayCur=n.token(e,r.overlay);r.overlayPos=e.pos}e.pos=Math.min(r.basePos,r.overlayPos);if(r.overlayCur==null){return r.baseCur}else if(r.baseCur!=null&&r.overlay.combineTokens||t&&r.overlay.combineTokens==null){return r.baseCur+" "+r.overlayCur}else{return r.overlayCur}},indent:a.indent&&function(e,r,o){return a.indent(e.base,r,o)},electricChars:a.electricChars,innerMode:function(e){return{state:e.base,mode:a}},blankLine:function(e){var r,o;if(a.blankLine){r=a.blankLine(e.base)}if(n.blankLine){o=n.blankLine(e.overlay)}return o==null?r:t&&r!=null?r+" "+o:o}}}});
// #END
