// JS-Script (UM): mathquill.js @ 2022-09-20 09:51:48 +0000
(function(){var x=window.jQuery,p,o="mathquill-command-id",d="mathquill-block-id",m=Math.min,a=Math.max;function y(){}var r=[].slice;function t(i){var n=i.length-1;return function(){var t=r.call(arguments,0,n);var e=r.call(arguments,n);return i.apply(this,t.concat([e]))}}var s=t(function(i,n){return t(function(t,e){if(i in t)return t[i].apply(t,n.concat(e))})});function n(n){return t(function(e,i){if(typeof e!=="function")e=s(e);var t=function(t){return e.apply(t,[t].concat(i))};return n.call(this,t)})}function l(t){var e=r.call(arguments,1);return function(){return t.apply(this,e)}}function g(t,e){if(!e)throw new Error("prayer failed: "+t)}var c=function(l,c,u){function f(t){return typeof t==="object"}function h(t){return typeof t==="function"}function p(){}return function e(i,t){if(t===u){t=i;i=Object}function n(){var t=new r;if(h(t.init))t.init.apply(t,arguments);return t}function r(){}n.Bare=r;var s=p[l]=i[l];var a=r[l]=n[l]=n.p=new p;var o;a.constructor=n;n.mixin=function(t){r[l]=n[l]=e(n,t)[l];return n};return(n.open=function(t){o={};if(h(t)){o=t.call(n,a,s,n,i)}else if(f(t)){o=t}if(f(o)){for(var e in o){if(c.call(o,e)){a[e]=o[e]}}}if(!h(a.init)){a.init=i}return n})(t)}}("prototype",{}.hasOwnProperty);var v=-1;var b=1;function u(t){g("a direction was passed",t===v||t===b)}var w=c(x,function(t){t.insDirOf=function(t,e){return t===v?this.insertBefore(e.first()):this.insertAfter(e.last())};t.insAtDirEnd=function(t,e){return t===v?this.prependTo(e):this.appendTo(e)}});var f=c(function(t){t.parent=0;t[v]=0;t[b]=0;t.init=function(t,e,i){this.parent=t;this[v]=e;this[b]=i};this.copy=function(t){return f(t.parent,t[v],t[b])}});var q=c(function(t){t[v]=0;t[b]=0;t.parent=0;var e=0;function i(){return e+=1}this.byId={};t.init=function(){this.id=i();q.byId[this.id]=this;this.ends={};this.ends[v]=0;this.ends[b]=0};t.dispose=function(){delete q.byId[this.id]};t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"};t.jQ=w();t.jQadd=function(t){return this.jQ=this.jQ.add(t)};t.jQize=function(t){var t=w(t||this.html());function n(t){if(t.getAttribute){var e=t.getAttribute("mathquill-command-id");var i=t.getAttribute("mathquill-block-id");if(e)q.byId[e].jQadd(t);if(i)q.byId[i].jQadd(t)}for(t=t.firstChild;t;t=t.nextSibling){n(t)}}for(var e=0;e<t.length;e+=1)n(t[e]);return t};t.createDir=function(t,e){u(t);var i=this;i.jQize();i.jQ.insDirOf(t,e.jQ);e[t]=i.adopt(e.parent,e[v],e[b]);return i};t.createLeftOf=function(t){return this.createDir(v,t)};t.selectChildren=function(t,e){return T(t,e)};t.bubble=n(function(t){for(var e=this;e;e=e.parent){var i=t(e);if(i===false)break}return this});t.postOrder=n(function(i){(function t(e){e.eachChild(t);i(e)})(this);return this});t.isEmpty=function(){return this.ends[v]===0&&this.ends[b]===0};t.children=function(){return O(this.ends[v],this.ends[b])};t.eachChild=function(){var t=this.children();t.each.apply(t,arguments);return this};t.foldChildren=function(t,e){return this.children().fold(t,e)};t.withDirAdopt=function(t,e,i,n){O(this,this).withDirAdopt(t,e,i,n);return this};t.adopt=function(t,e,i){O(this,this).adopt(t,e,i);return this};t.disown=function(){O(this,this).disown();return this};t.remove=function(){this.jQ.remove();this.postOrder("dispose");return this.disown()}});function h(t,e,i){g("a parent is always present",t);g("leftward is properly set up",function(){if(!e)return t.ends[v]===i;return e[b]===i&&e.parent===t}());g("rightward is properly set up",function(){if(!i)return t.ends[b]===e;return i[v]===e&&i.parent===t}())}var O=c(function(t){t.init=function(t,e,i){if(i===p)i=v;u(i);g("no half-empty fragments",!t===!e);this.ends={};if(!t)return;g("withDir is passed to Fragment",t instanceof q);g("oppDir is passed to Fragment",e instanceof q);g("withDir and oppDir have the same parent",t.parent===e.parent);this.ends[i]=t;this.ends[-i]=e;var n=this.fold([],function(t,e){t.push.apply(t,e.jQ.get());return t});this.jQ=this.jQ.add(n)};t.jQ=w();t.withDirAdopt=function(t,e,i,n){return t===v?this.adopt(e,i,n):this.adopt(e,n,i)};t.adopt=function(e,i,t){h(e,i,t);var n=this;n.disowned=false;var r=n.ends[v];if(!r)return this;var s=n.ends[b];if(i){}else{e.ends[v]=r}if(t){t[v]=s}else{e.ends[b]=s}n.ends[b][b]=t;n.each(function(t){t[v]=i;t.parent=e;if(i)i[b]=t;i=t});return n};t.disown=function(){var t=this;var e=t.ends[v];if(!e||t.disowned)return t;t.disowned=true;var i=t.ends[b];var n=e.parent;h(n,e[v],e);h(n,i,i[b]);if(e[v]){e[v][b]=i[b]}else{n.ends[v]=i[b]}if(i[b]){i[b][v]=e[v]}else{n.ends[b]=e[v]}return t};t.remove=function(){this.jQ.remove();this.each("postOrder","dispose");return this.disown()};t.each=n(function(t){var e=this;var i=e.ends[v];if(!i)return e;for(;i!==e.ends[b][b];i=i[b]){var n=t(i);if(n===false)break}return e});t.fold=function(e,i){this.each(function(t){e=i.call(this,e,t)});return e}});var k={},j={};var Q=c(f,function(t){t.init=function(t,e){this.parent=t;this.options=e;var i=this.jQ=this._jQ=w('<span class="mq-cursor">&#8203;</span>');this.blink=function(){i.toggleClass("mq-blink")};this.upDownCache={}};t.show=function(){this.jQ=this._jQ.removeClass("mq-blink");if("intervalId"in this)clearInterval(this.intervalId);else{if(this[b]){if(this.selection&&this.selection.ends[v][v]===this[v])this.jQ.insertBefore(this.selection.jQ);else this.jQ.insertBefore(this[b].jQ.first())}else this.jQ.appendTo(this.parent.jQ);this.parent.focus()}this.intervalId=setInterval(this.blink,500);return this};t.hide=function(){if("intervalId"in this)clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=w();return this};t.withDirInsertAt=function(t,e,i,n){var r=this.parent;this.parent=e;this[t]=i;this[-t]=n;if(r!==e&&r.blur)r.blur()};t.insDirOf=function(t,e){u(t);this.jQ.insDirOf(t,e.jQ);this.withDirInsertAt(t,e.parent,e[t],e);this.parent.jQ.addClass("mq-hasCursor");return this};t.insLeftOf=function(t){return this.insDirOf(v,t)};t.insRightOf=function(t){return this.insDirOf(b,t)};t.insAtDirEnd=function(t,e){u(t);this.jQ.insAtDirEnd(t,e.jQ);this.withDirInsertAt(t,e,0,e.ends[t]);e.focus();return this};t.insAtLeftEnd=function(t){return this.insAtDirEnd(v,t)};t.insAtRightEnd=function(t){return this.insAtDirEnd(b,t)};t.jumpUpDown=function(t,e){var i=this;i.upDownCache[t.id]=f.copy(i);var n=i.upDownCache[e.id];if(n){n[b]?i.insLeftOf(n[b]):i.insAtRightEnd(n.parent)}else{var r=i.offset().left;e.seek(r,i)}};t.offset=function(){var t=this,e=t.jQ.removeClass("mq-cursor").offset();t.jQ.addClass("mq-cursor");return e};t.unwrapGramp=function(){var e=this.parent.parent;var i=e.parent;var n=e[b];var t=this;var r=e[v];e.disown().eachChild(function(t){if(t.isEmpty())return;t.children().adopt(i,r,n).each(function(t){t.jQ.insertBefore(e.jQ.first())});r=t.ends[b]});if(!this[b]){if(this[v])this[b]=this[v][b];else{while(!this[b]){this.parent=this.parent[b];if(this.parent)this[b]=this.parent.ends[v];else{this[b]=e[b];this.parent=i;break}}}}if(this[b])this.insLeftOf(this[b]);else this.insAtRightEnd(i);e.jQ.remove();if(e[v].siblingDeleted)e[v].siblingDeleted(t.options,b);if(e[b].siblingDeleted)e[b].siblingDeleted(t.options,v)};t.startSelection=function(){var t=this.anticursor=f.copy(this);var e=t.ancestors={};for(var i=t;i.parent;i=i.parent){e[i.parent.id]=i}};t.endSelection=function(){delete this.anticursor};t.select=function(){var t=this.anticursor;if(this[v]===t[v]&&this.parent===t.parent)return false;for(var e=this;e.parent;e=e.parent){if(e.parent.id in t.ancestors){var i=e.parent;break}}g("cursor and anticursor in the same tree",i);var n=t.ancestors[i.id];var r,s,a=b;if(e[v]!==n){for(var o=e;o;o=o[b]){if(o[b]===n[b]){a=v;r=e;s=n;break}}}if(a===b){r=n;s=e}if(r instanceof f)r=r[b];if(s instanceof f)s=s[v];this.hide().selection=i.selectChildren(r,s);this.insDirOf(a,this.selection.ends[a]);this.selectionChanged();return true};t.clearSelection=function(){if(this.selection){this.selection.clear();delete this.selection;this.selectionChanged()}return this};t.deleteSelection=function(){if(!this.selection)return;this[v]=this.selection.ends[v][v];this[b]=this.selection.ends[b][b];this.selection.remove();this.selectionChanged();delete this.selection};t.replaceSelection=function(){var t=this.selection;if(t){this[v]=t.ends[v][v];this[b]=t.ends[b][b];delete this.selection}return t}});var T=c(O,function(t,e){t.init=function(){e.init.apply(this,arguments);this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()};t.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return e.adopt.apply(this,arguments)};t.clear=function(){this.jQ.replaceWith(this.jQ[0].childNodes);return this};t.join=function(i){return this.fold("",function(t,e){return t+e[i]()})}});var C=c(function(t){t.init=function(t,e,i){this.id=t.id;this.data={};this.root=t;this.container=e;this.options=i;t.controller=this;this.cursor=t.cursor=Q(t,i)};t.handle=function(t,e){var i=this.options.handlers;if(i&&i.fns[t]){var n=i.APIClasses[this.KIND_OF_MQ](this);if(e===v||e===b)i.fns[t](e,n);else i.fns[t](n)}};var e=[];this.onNotify=function(t){e.push(t)};t.notify=function(){for(var t=0;t<e.length;t+=1){e[t].apply(this.cursor,arguments)}return this}});var D={},_=c(),S={},L=c(),E={};function i(){if(window.console)console.warn("You are using the MathQuill API without specifying an interface version, "+"which will fail in v1.0.0. You can fix this easily by doing this before "+"doing anything else:\n"+"\n"+"    MathQuill = MathQuill.getInterface(1);\n"+"    // now MathQuill.MathField() works like it used to\n"+"\n"+'See also the "`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at\n'+"  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide")}function A(t){i();return $t(t)}A.prototype=L.p;A.interfaceVersion=function(t){if(t!==1)throw"Only interface version 1 supported. You specified: "+t;i=function(){if(window.console)console.warn("You called MathQuill.interfaceVersion(1); to specify the interface "+"version, which will fail in v1.0.0. You can fix this easily by doing "+"this before doing anything else:\n"+"\n"+"    MathQuill = MathQuill.getInterface(1);\n"+"    // now MathQuill.MathField() works like it used to\n"+"\n"+'See also the "`dev` branch (2014\u20132015) \u2192 v0.10.0 Migration Guide" at\n'+"  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide")};i();return A};A.getInterface=e;var R=e.MIN=1,I=e.MAX=2;function e(a){if(!(R<=a&&a<=I))throw"Only interface versions between "+R+" and "+I+" supported. You specified: "+a;function o(t){if(!t||!t.nodeType)return null;var e=w(t).children(".mq-root-block").attr(d);var i=e&&q.byId[e].controller;return i?l[i.KIND_OF_MQ](i):null}var l={};o.L=v;o.R=b;function e(t,e){if(e&&e.handlers){e.handlers={fns:e.handlers,APIClasses:l}}for(var i in e)if(e.hasOwnProperty(i)){var n=e[i],r=S[i];t[i]=r?r(n):n}}o.config=function(t){e(_.p,t);return this};o.registerEmbed=function(t,e){if(!/^[a-z][a-z0-9]*$/i.test(t)){throw"Embed name must start with letter and be only letters and digits"}E[t]=e};var t=l.AbstractMathQuill=c(L,function(t){t.init=function(t){this.__controller=t;this.__options=t.options;this.id=t.id;this.data=t.data};t.__mathquillify=function(t){var e=this.__controller,i=e.root,n=e.container;e.createTextarea();var r=n.addClass(t).contents().detach();i.jQ=w('<span class="mq-root-block"></span>').attr(d,i.id).appendTo(n);this.latex(r.text());this.revert=function(){return n.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(r)}};t.config=function(t){e(this.__options,t);return this};t.el=function(){return this.__controller.container[0]};t.text=function(){return this.__controller.exportText()};t.latex=function(t){if(arguments.length>0){this.__controller.renderLatexMath(t);if(this.__controller.blurred)this.__controller.cursor.hide().parent.blur();return this}return this.__controller.exportLatex()};t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")};t.reflow=function(){this.__controller.root.postOrder("reflow");return this}});o.prototype=t.prototype;l.EditableField=c(t,function(t,e){t.__mathquillify=function(){e.__mathquillify.apply(this,arguments);this.__controller.editable=true;this.__controller.delegateMouseEvents();this.__controller.editablesTextareaEvents();return this};t.focus=function(){this.__controller.textarea.focus();return this};t.blur=function(){this.__controller.textarea.blur();return this};t.write=function(t){this.__controller.writeLatex(t);this.__controller.scrollHoriz();if(this.__controller.blurred)this.__controller.cursor.hide().parent.blur();return this};t.cmd=function(t){var e=this.__controller.notify(),i=e.cursor;if(/^\\[a-z]+$/i.test(t)){t=t.slice(1);var n=k[t];if(n){t=n(t);if(i.selection)t.replaces(i.replaceSelection());t.createLeftOf(i.show());this.__controller.scrollHoriz()}else;}else i.parent.write(i,t);if(e.blurred)i.hide().parent.blur();return this};t.select=function(){var t=this.__controller;t.notify("move").cursor.insAtRightEnd(t.root);while(t.cursor[v])t.selectLeft();return this};t.clearSelection=function(){this.__controller.cursor.clearSelection();return this};t.moveToDirEnd=function(t){this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root);return this};t.moveToLeftEnd=function(){return this.moveToDirEnd(v)};t.moveToRightEnd=function(){return this.moveToDirEnd(b)};t.keystroke=function(t){var t=t.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var e=0;e<t.length;e+=1){this.__controller.keystroke(t[e],{preventDefault:y})}return this};t.typedText=function(t){for(var e=0;e<t.length;e+=1)this.__controller.typedText(t.charAt(e));return this};t.dropEmbedded=function(t,e,i){var n=t-w(window).scrollLeft();var r=e-w(window).scrollTop();var s=document.elementFromPoint(n,r);this.__controller.seek(w(s),t,e);var a=Ft().setOptions(i);a.createLeftOf(this.__controller.cursor)}});o.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"};o.EditableField.prototype=l.EditableField.prototype;for(var i in D)(function(r,t){var s=l[r]=t(l);o[r]=function(t,e){var i=o(t);if(i instanceof s||!t||!t.nodeType)return i;var n=C(s.RootBlock(),w(t),_());n.KIND_OF_MQ=r;return s(n).__mathquillify(e,a)};o[r].prototype=s.prototype})(i,D[i]);return o}A.noConflict=function(){window.MathQuill=z;return A};var z=window.MathQuill;window.MathQuill=A;function M(t){var e="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" ");for(var i=0;i<e.length;i+=1)(function(e){t[e]=function(t){this.controller.handle(e,t)}})(e[i]);t.reflow=function(){this.controller.handle("reflow");this.controller.handle("edited");this.controller.handle("edit")}}var B=c(function(t,e,o){function i(t,e){if(t){t="'"+t+"'"}else{t="EOF"}throw"Parse Error: "+e+" at "+t}t.init=function(t){this._=t};t.parse=function(t){return this.skip(v)._(""+t,e,i);function e(t,e){return e}};t.or=function(r){g("or is passed a parser",r instanceof o);var s=this;return o(function(e,i,n){return s._(e,i,t);function t(t){return r._(e,i,n)}})};t.then=function(s){var i=this;return o(function(t,n,r){return i._(t,e,r);function e(t,e){var i=s instanceof o?s:s(e);g("a parser is returned",i instanceof o);return i._(t,n,r)}})};t.many=function(){var a=this;return o(function(i,t,e){var n=[];while(a._(i,r,s));return t(i,n);function r(t,e){i=t;n.push(e);return true}function s(){return false}})};t.times=function(u,f){if(arguments.length<2)f=u;var h=this;return o(function(i,t,e){var n=[];var r=true;var s;for(var a=0;a<u;a+=1){r=h._(i,o,l);if(!r)return e(i,s)}for(;a<f&&r;a+=1){r=h._(i,o,c)}return t(i,n);function o(t,e){n.push(e);i=t;return true}function l(t,e){s=e;i=t;return false}function c(t,e){return false}})};t.result=function(t){return this.then(s(t))};t.atMost=function(t){return this.times(0,t)};t.atLeast=function(t){var i=this;return i.times(t).then(function(e){return i.many().map(function(t){return e.concat(t)})})};t.map=function(e){return this.then(function(t){return s(e(t))})};t.skip=function(e){return this.then(function(t){return e.result(t)})};var n=this.string=function(r){var s=r.length;var a="expected '"+r+"'";return o(function(t,e,i){var n=t.slice(0,s);if(n===r){return e(t.slice(s),n)}else{return i(t,a)}})};var r=this.regex=function(s){g("regexp parser is anchored",s.toString().charAt(1)==="^");var a="expected "+s;return o(function(t,e,i){var n=s.exec(t);if(n){var r=n[0];return e(t.slice(r.length),r)}else{return i(t,a)}})};var s=o.succeed=function(i){return o(function(t,e){return e(t,i)})};var a=o.fail=function(n){return o(function(t,e,i){return i(t,n)})};var l=o.letter=r(/^[a-z]/i);var c=o.letters=r(/^[a-z]*/i);var u=o.digit=r(/^[0-9]/);var f=o.digits=r(/^[0-9]*/);var h=o.whitespace=r(/^\s+/);var p=o.optWhitespace=r(/^\s*/);var d=o.any=o(function(t,e,i){if(!t)return i(t,"expected any character");return e(t.slice(1),t.charAt(0))});var m=o.all=o(function(t,e,i){return e("",t)});var v=o.eof=o(function(t,e,i){if(t)return i(t,"expected EOF");return e(t,t)})});var F=function(){var s={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};function q(t){var e=t.which||t.keyCode;var i=s[e];var n;var r=[];if(t.ctrlKey)r.push("Ctrl");if(t.originalEvent&&t.originalEvent.metaKey)r.push("Meta");if(t.altKey)r.push("Alt");if(t.shiftKey)r.push("Shift");n=i||String.fromCharCode(e);if(!r.length&&!i)return n;r.push(n);return r.join("-")}return function t(e,i){var n=null;var r=null;var s=x(e);var a=x(i.container||s);var o=y,l;function c(t){o=t;clearTimeout(l);l=setTimeout(t)}a.bind("keydown keypress input keyup focusout paste",function(t){o(t)});function u(t){o();o=y;clearTimeout(l);s.val(t);if(t&&s[0].select)s[0].select();f=!!t}var f=false;function h(){var t=s[0];if(!("selectionStart"in t))return false;return t.selectionStart!==t.selectionEnd}function p(){i.keystroke(q(n),n)}function d(t){n=t;r=null;if(f)c(function(t){if(!(t&&t.type==="focusout")&&s[0].select){s[0].select()}o=y;clearTimeout(l)});p()}function m(t){if(n&&r)p();r=t;c(v)}function v(){if(h())return;var t=s.val();if(t.length===1){s.val("");i.typedText(t)}else if(t&&s[0].select)s[0].select()}function g(){n=r=null}function b(t){s.focus();c(w)}function w(){var t=s.val();s.val("");if(t)i.paste(t)}a.bind({keydown:d,keypress:m,focusout:g,paste:b});return{select:u}}}();C.open(function(t,e){t.exportText=function(){return this.root.foldChildren("",function(t,e){return t+e.text()})}});C.open(function(t){t.focusBlurEvents=function(){var t=this,e=t.root,i=t.cursor;var n;t.textarea.focus(function(){t.blurred=false;clearTimeout(n);t.container.addClass("mq-focused");if(!i.parent)i.insAtRightEnd(e);if(i.selection){i.selection.jQ.removeClass("mq-blur");t.selectionChanged()}else i.show()}).blur(function(){t.blurred=true;n=setTimeout(function(){e.postOrder("intentionalBlur");i.clearSelection().endSelection();s()});w(window).on("blur",r)});function r(){clearTimeout(n);if(i.selection)i.selection.jQ.addClass("mq-blur");s()}function s(){i.hide().parent.blur();t.container.removeClass("mq-focused");w(window).off("blur",r)}t.blurred=true;i.hide().parent.blur()}});C.open(function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}});q.open(function(t){t.keystroke=function(t,e,i){var n=i.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":i.ctrlDeleteDir(v);break;case"Shift-Backspace":case"Backspace":i.backspace();break;case"Esc":case"Tab":i.escapeDir(b,t,e);return;case"Shift-Tab":case"Shift-Esc":i.escapeDir(v,t,e);return;case"End":i.notify("move").cursor.insAtRightEnd(n.parent);break;case"Ctrl-End":i.notify("move").cursor.insAtRightEnd(i.root);break;case"Shift-End":while(n[b]){i.selectRight()}break;case"Ctrl-Shift-End":while(n[b]||n.parent!==i.root){i.selectRight()}break;case"Home":i.notify("move").cursor.insAtLeftEnd(n.parent);break;case"Ctrl-Home":i.notify("move").cursor.insAtLeftEnd(i.root);break;case"Shift-Home":while(n[v]){i.selectLeft()}break;case"Ctrl-Shift-Home":while(n[v]||n.parent!==i.root){i.selectLeft()}break;case"Left":i.moveLeft();break;case"Shift-Left":i.selectLeft();break;case"Ctrl-Left":break;case"Right":i.moveRight();break;case"Shift-Right":i.selectRight();break;case"Ctrl-Right":break;case"Up":i.moveUp();break;case"Down":i.moveDown();break;case"Shift-Up":if(n[v]){while(n[v])i.selectLeft()}else{i.selectLeft()}case"Shift-Down":if(n[b]){while(n[b])i.selectRight()}else{i.selectRight()}case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":i.ctrlDeleteDir(b);break;case"Shift-Del":case"Del":i.deleteForward();break;case"Meta-A":case"Ctrl-A":i.notify("move").cursor.insAtRightEnd(i.root);while(n[v])i.selectLeft();break;default:return}e.preventDefault();i.scrollHoriz()};t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){g("overridden or never called on this node")}});C.open(function(t){this.onNotify(function(t){if(t==="move"||t==="upDown")this.show().clearSelection()});t.escapeDir=function(t,e,i){u(t);var n=this.cursor;if(n.parent!==this.root)i.preventDefault();if(n.parent===this.root)return;n.parent.moveOutOf(t,n);return this.notify("move")};S.leftRightIntoCmdGoes=function(t){if(t&&t!=="up"&&t!=="down"){throw'"up" or "down" required for leftRightIntoCmdGoes option, '+'got "'+t+'"'}return t};t.moveDir=function(t){u(t);var e=this.cursor,i=e.options.leftRightIntoCmdGoes;if(e.selection){e.insDirOf(t,e.selection.ends[t])}else if(e[t])e[t].moveTowards(t,e,i);else e.parent.moveOutOf(t,e,i);return this.notify("move")};t.moveLeft=function(){return this.moveDir(v)};t.moveRight=function(){return this.moveDir(b)};t.moveUp=function(){return e(this,"up")};t.moveDown=function(){return e(this,"down")};function e(t,e){var i=t.notify("upDown").cursor;var n=e+"Into",r=e+"OutOf";if(i[b][n])i.insAtLeftEnd(i[b][n]);else if(i[v][n])i.insAtRightEnd(i[v][n]);else{i.parent.bubble(function(t){var e=t[r];if(e){if(typeof e==="function")e=t[r](i);if(e instanceof q)i.jumpUpDown(t,e);if(e!==true)return false}})}return t}this.onNotify(function(t){if(t!=="upDown")this.upDownCache={}});this.onNotify(function(t){if(t==="edit")this.show().deleteSelection()});t.deleteDir=function(t){u(t);var e=this.cursor;var i=e.selection;this.notify("edit");if(!i){if(e[t])e[t].deleteTowards(t,e);else e.parent.deleteOutOf(t,e)}if(e[v].siblingDeleted)e[v].siblingDeleted(e.options,b);if(e[b].siblingDeleted)e[b].siblingDeleted(e.options,v);e.parent.bubble("reflow");return this};t.ctrlDeleteDir=function(t){u(t);var e=this.cursor;if(!e[v]||e.selection)return ctrlr.deleteDir();this.notify("edit");O(e.parent.ends[v],e[v]).remove();e.insAtDirEnd(v,e.parent);if(e[v].siblingDeleted)e[v].siblingDeleted(e.options,b);if(e[b].siblingDeleted)e[b].siblingDeleted(e.options,v);e.parent.bubble("reflow");return this};t.backspace=function(){return this.deleteDir(v)};t.deleteForward=function(){return this.deleteDir(b)};this.onNotify(function(t){if(t!=="select")this.endSelection()});t.selectDir=function(t){var e=this.notify("select").cursor,i=e.selection;u(t);if(!e.anticursor)e.startSelection();var n=e[t];if(n){if(i&&i.ends[t]===n&&e.anticursor[-t]!==n){n.unselectInto(t,e)}else n.selectTowards(t,e)}else e.parent.selectOutOf(t,e);e.clearSelection();e.select()||e.show()};t.selectLeft=function(){return this.selectDir(v)};t.selectRight=function(){return this.selectDir(b)}});var $=function(){function t(t){var e=G();t.adopt(e,0,0);return e}function e(t){var e=t[0]||G();for(var i=1;i<t.length;i+=1){t[i].children().adopt(e,e.ends[b],0)}return e}var i=B.string;var n=B.regex;var r=B.letter;var s=B.any;var a=B.optWhitespace;var o=B.succeed;var l=B.fail;var c=r.map(function(t){return nt(t)});var u=n(/^[^${}\\_^]/).map(function(t){return W(t)});var f=n(/^[^\\a-eg-zA-Z]/).or(i("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(s))).then(function(t){var e=k[t];if(e){return e(t).parser()}else{return l("unknown command: \\"+t)}});var h=f.or(c).or(u);var p=i("{").then(function(){return m}).skip(i("}"));var d=a.then(p.or(h.map(t)));var m=d.many().map(e).skip(a);var v=i("[").then(d.then(function(t){return t.join("latex")!=="]"?o(t):l()}).many().map(e).skip(a)).skip(i("]"));var g=m;g.block=d;g.optBlock=v;return g}();C.open(function(t,e){t.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")};t.writeLatex=function(t){var e=this.notify("edit").cursor;var i=B.all;var n=B.eof;var r=$.skip(n).or(i.result(false)).parse(t);if(r&&!r.isEmpty()){r.children().adopt(e.parent,e[v],e[b]);var s=r.jQize();s.insertBefore(e.jQ);e[v]=r.ends[b];r.finalizeInsert(e.options,e);if(r.ends[b][b].siblingCreated)r.ends[b][b].siblingCreated(e.options,v);if(r.ends[v][v].siblingCreated)r.ends[v][v].siblingCreated(e.options,b);e.parent.bubble("reflow")}return this};t.renderLatexMath=function(t){var e=this.root,i=this.cursor;var n=B.all;var r=B.eof;var s=$.skip(r).or(n.result(false)).parse(t);e.eachChild("postOrder","dispose");e.ends[v]=e.ends[b]=0;if(s){s.children().adopt(e,0,0)}var a=e.jQ;if(s){var o=s.join("html");a.html(o);e.jQize(a.children());e.finalizeInsert(i.options)}else{a.empty()}delete i.selection;i.insAtRightEnd(e)};t.renderLatexText=function(t){var e=this.root,n=this.cursor;e.jQ.children().slice(1).remove();e.eachChild("postOrder","dispose");e.ends[v]=e.ends[b]=0;delete n.selection;n.show().insAtRightEnd(e);var i=B.regex;var r=B.string;var s=B.eof;var a=B.all;var o=r("$").then($).skip(r("$").or(s)).map(function(t){var e=V(n);e.createBlocks();var i=e.ends[v];t.children().adopt(i,0,0);return e});var l=r("\\$").result("$");var c=l.or(i(/^[^$]/)).map(W);var u=o.or(c).many();var f=u.skip(s).or(a.result(false)).parse(t);if(f){for(var h=0;h<f.length;h+=1){f[h].adopt(e,e.ends[b],0)}e.jQize().appendTo(e.jQ);e.finalizeInsert(n.options)}}});C.open(function(t){t.delegateMouseEvents=function(){var h=this.root.jQ;this.container.bind("mousedown.mathquill",function(t){var e=w(t.target).closest(".mq-root-block");var i=q.byId[e.attr(d)||h.attr(d)];var n=i.controller,r=n.cursor,s=r.blink;var a=n.textareaSpan,o=n.textarea;var l;function c(t){l=w(t.target)}function u(t){if(!r.anticursor)r.startSelection();n.seek(l,t.pageX,t.pageY).cursor.select();l=p}function f(t){r.blink=s;if(!r.selection){if(n.editable){r.show()}else{a.detach()}}e.unbind("mousemove",c);w(t.target.ownerDocument).unbind("mousemove",u).unbind("mouseup",f)}if(n.blurred){if(!n.editable)e.prepend(a);o.focus()}t.preventDefault();t.target.unselectable=true;r.blink=y;n.seek(w(t.target),t.pageX,t.pageY).cursor.startSelection();e.mousemove(c);w(t.target.ownerDocument).mousemove(u).mouseup(f)})}});C.open(function(t){t.seek=function(t,e,i){var n=this.notify("select").cursor;if(t){var r=t.attr(d)||t.attr(o);if(!r){var s=t.parent();r=s.attr(d)||s.attr(o)}}var a=r?q.byId[r]:this.root;g("nodeId is the id of some Node that exists",a);n.clearSelection().show();a.seek(e,n);this.scrollHoriz();return this}});C.open(function(t){t.scrollHoriz=function(){var t=this.cursor,e=t.selection;var i=this.root.jQ[0].getBoundingClientRect();if(!e){var n=t.jQ[0].getBoundingClientRect().left;if(n>i.right-20)var r=n-(i.right-20);else if(n<i.left+20)var r=n-(i.left+20);else return}else{var s=e.jQ[0].getBoundingClientRect();var a=s.left-(i.left+20);var o=s.right-(i.right-20);if(e.ends[v]===t[b]){if(a<0)var r=a;else if(o>0){if(s.left-o<i.left+20)var r=a;else var r=o}else return}else{if(o>0)var r=o;else if(a<0){if(s.right-a>i.right-20)var r=o;else var r=a}else return}}this.root.jQ.stop().animate({scrollLeft:"+="+r},100)}});C.open(function(t){_.p.substituteTextarea=function(){return w("<textarea autocapitalize=off autocomplete=off autocorrect=off "+"spellcheck=false x-palm-disable-ste-all=true></textarea>")[0]};t.createTextarea=function(){var t=this.textareaSpan=w('<span class="mq-textarea"></span>'),e=this.options.substituteTextarea();if(!e.nodeType){throw"substituteTextarea() must return a DOM element, got "+e}e=this.textarea=w(e).appendTo(t);var i=this;i.cursor.selectionChanged=function(){i.selectionChanged()};i.container.bind("copy",function(){i.setTextareaSelection()})};t.selectionChanged=function(){var t=this;gt(t.container[0]);if(t.textareaSelectionTimeout===p){t.textareaSelectionTimeout=setTimeout(function(){t.setTextareaSelection()})}};t.setTextareaSelection=function(){this.textareaSelectionTimeout=p;var t="";if(this.cursor.selection){t=this.cursor.selection.join("latex");if(this.options.statelessClipboard){t="$"+t+"$"}}this.selectFn(t)};t.staticMathTextareaEvents=function(){var t=this,e=t.root,i=t.cursor,n=t.textarea,r=t.textareaSpan;this.container.prepend('<span class="mq-selectable">$'+t.exportLatex()+"$</span>");t.blurred=true;n.bind("cut paste",false).focus(function(){t.blurred=false}).blur(function(){if(i.selection)i.selection.clear();setTimeout(s)});function s(){r.detach();t.blurred=true}t.selectFn=function(t){n.val(t);if(t)n.select()}};t.editablesTextareaEvents=function(){var e=this,t=e.root,i=e.cursor,n=e.textarea,r=e.textareaSpan;var s=F(n,this);this.selectFn=function(t){s.select(t)};this.container.prepend(r).on("cut",function(t){if(i.selection){setTimeout(function(){e.notify("edit");i.parent.bubble("reflow")})}});this.focusBlurEvents()};t.typedText=function(t){if(t==="\n")return this.handle("enter");var e=this.notify().cursor;e.parent.write(e,t);this.scrollHoriz()};t.paste=function(t){if(this.options.statelessClipboard){if(t.slice(0,1)==="$"&&t.slice(-1)==="$"){t=t.slice(1,-1)}else{t="\\text{"+t+"}"}}this.writeLatex(t).cursor.show()}});var N=c(q,function(t,e){t.finalizeInsert=function(t,e){var i=this;i.postOrder("finalizeTree",t);i.postOrder("contactWeld",e);i.postOrder("blur");i.postOrder("reflow");if(i[b].siblingCreated)i[b].siblingCreated(t,v);if(i[v].siblingCreated)i[v].siblingCreated(t,b);i.bubble("reflow")}});var P=c(N,function(t,r){t.init=function(t,e,i){var n=this;r.init.call(n);if(!n.ctrlSeq)n.ctrlSeq=t;if(e)n.htmlTemplate=e;if(i)n.textTemplate=i};t.replaces=function(t){t.disown();this.replacedFragment=t};t.isEmpty=function(){return this.foldChildren(true,function(t,e){return t&&e.isEmpty()})};t.parser=function(){var t=$.block;var i=this;return t.times(i.numBlocks()).map(function(t){i.blocks=t;for(var e=0;e<t.length;e+=1){t[e].adopt(i,i.ends[b],0)}return i})};t.createLeftOf=function(t){var e=this;var i=e.replacedFragment;e.createBlocks();r.createLeftOf.call(e,t);if(i){i.adopt(e.ends[v],0,0);i.jQ.appendTo(e.ends[v].jQ)}e.finalizeInsert(t.options);e.placeCursor(t)};t.createBlocks=function(){var t=this,e=t.numBlocks(),i=t.blocks=Array(e);for(var n=0;n<e;n+=1){var r=i[n]=G();r.adopt(t,t.ends[b],0)}};t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[v],function(t,e){return t.isEmpty()?t:e}))};t.moveTowards=function(t,e,i){var n=i&&this[i+"Into"];e.insAtDirEnd(-t,n||this.ends[-t])};t.deleteTowards=function(t,e){if(this.isEmpty())e[t]=this.remove()[t];else this.moveTowards(t,e,null)};t.selectTowards=function(t,e){e[-t]=this;e[t]=this[t]};t.selectChildren=function(){return T(this,this)};t.unselectInto=function(t,e){e.insAtDirEnd(-t,e.anticursor.ancestors[this.id])};t.seek=function(i,n){function r(t){var e={};e[v]=t.jQ.offset().left;e[b]=e[v]+t.jQ.outerWidth();return e}var s=this;var a=r(s);if(i<a[v])return n.insLeftOf(s);if(i>a[b])return n.insRightOf(s);var o=a[v];s.eachChild(function(t){var e=r(t);if(i<e[v]){if(i-o<e[v]-i){if(t[v])n.insAtRightEnd(t[v]);else n.insLeftOf(s)}else n.insAtLeftEnd(t);return false}else if(i>e[b]){if(t[b])o=e[b];else{if(a[b]-i<i-e[b]){n.insRightOf(s)}else n.insAtRightEnd(t)}}else{t.seek(i,n);return false}})};t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0};t.html=function(){var t=this;var i=t.blocks;var e=" mathquill-command-id="+t.id;var n=t.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);g("no unmatched angle brackets",n.join("")===this.htmlTemplate);for(var r=0,s=n[0];s;r+=1,s=n[r]){if(s.slice(-2)==="/>"){n[r]=s.slice(0,-2)+e+"/>"}else if(s.charAt(0)==="<"){g("not an unmatched top-level close tag",s.charAt(1)!=="/");n[r]=s.slice(0,-1)+e+">";var a=1;do{r+=1,s=n[r];g("no missing close tags",s);if(s.slice(0,2)==="</"){a-=1}else if(s.charAt(0)==="<"&&s.slice(-2)!=="/>"){a+=1}}while(a>0)}}return n.join("").replace(/>&(\d+)/g,function(t,e){return" mathquill-block-id="+i[e].id+">"+i[e].join("html")})};t.latex=function(){return this.foldChildren(this.ctrlSeq,function(t,e){return t+"{"+(e.latex()||" ")+"}"})};t.textTemplate=[""];t.text=function(){var n=this,r=0;return n.foldChildren(n.textTemplate[r],function(t,e){r+=1;var i=e.text();if(t&&n.textTemplate[r]==="("&&i[0]==="("&&i.slice(-1)===")")return t+i.slice(1,-1)+n.textTemplate[r];return t+e.text()+(n.textTemplate[r]||"")})}});var U=c(P,function(t,n){t.init=function(t,e,i){if(!i)i=t&&t.length>1?t.slice(1):t;n.init.call(this,t,e,[i])};t.parser=function(){return B.succeed(this)};t.numBlocks=function(){return 0};t.replaces=function(t){t.remove()};t.createBlocks=y;t.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ);e[-t]=this;e[t]=this[t]};t.deleteTowards=function(t,e){e[t]=this.remove()[t]};t.seek=function(t,e){if(t-this.jQ.offset().left<this.jQ.outerWidth()/2)e.insLeftOf(this);else e.insRightOf(this)};t.latex=function(){return this.ctrlSeq};t.text=function(){return this.textTemplate};t.placeCursor=y;t.isEmpty=function(){return true}});var W=c(U,function(t,i){t.init=function(t,e){i.init.call(this,t,"<span>"+(e||t)+"</span>")}});var H=c(U,function(t,n){t.init=function(t,e,i){n.init.call(this,t,'<span class="mq-binary-operator">'+e+"</span>",i)}});var G=c(N,function(t,n){t.join=function(i){return this.foldChildren("",function(t,e){return t+e[i]()})};t.html=function(){return this.join("html")};t.latex=function(){return this.join("latex")};t.text=function(){return this.ends[v]===this.ends[b]&&this.ends[v]!==0?this.ends[v].text():this.join("text")};t.keystroke=function(t,e,i){if(i.options.spaceBehavesLikeTab&&(t==="Spacebar"||t==="Shift-Spacebar")){e.preventDefault();i.escapeDir(t==="Shift-Spacebar"?v:b,t,e);return}return n.keystroke.apply(this,arguments)};t.moveOutOf=function(t,e,i){var n=i&&this.parent[i+"Into"];if(!n&&this[t])e.insAtDirEnd(-t,this[t]);else e.insDirOf(t,this.parent)};t.selectOutOf=function(t,e){e.insDirOf(t,this.parent)};t.deleteOutOf=function(t,e){e.unwrapGramp()};t.seek=function(t,e){var i=this.ends[b];if(!i||i.jQ.offset().left+i.jQ.outerWidth()<t){return e.insAtRightEnd(this)}if(t<this.ends[v].jQ.offset().left)return e.insAtLeftEnd(this);while(t<i.jQ.offset().left)i=i[v];return i.seek(t,e)};t.chToCmd=function(t){var e;if(t.match(/^[a-eg-zA-Z]$/))return nt(t);else if(/^\d$/.test(t))return et(t);else if(e=j[t]||k[t])return e(t);else return W(t)};t.write=function(t,e){var i=this.chToCmd(e);if(t.selection)i.replaces(t.replaceSelection());i.createLeftOf(t.show())};t.focus=function(){this.jQ.addClass("mq-hasCursor");this.jQ.removeClass("mq-empty");return this};t.blur=function(){this.jQ.removeClass("mq-hasCursor");if(this.isEmpty())this.jQ.addClass("mq-empty");return this}});D.StaticMath=function(i){return c(i.AbstractMathQuill,function(t,e){this.RootBlock=G;t.__mathquillify=function(){e.__mathquillify.call(this,"mq-math-mode");this.__controller.delegateMouseEvents();this.__controller.staticMathTextareaEvents();return this};t.init=function(){e.init.apply(this,arguments);this.__controller.root.postOrder("registerInnerField",this.innerFields=[],i.MathField)};t.latex=function(){var t=e.latex.apply(this,arguments);if(arguments.length>0){this.__controller.root.postOrder("registerInnerField",this.innerFields=[],i.MathField)}return t}})};var K=c(G,M);D.MathField=function(t){return c(t.EditableField,function(t,i){this.RootBlock=K;t.__mathquillify=function(t,e){this.config(t);if(e>1)this.__controller.root.reflow=y;i.__mathquillify.call(this,"mq-editable-field mq-math-mode");delete this.__controller.root.reflow;return this}})};var Y=c(q,function(t,r){t.ctrlSeq="\\text";t.replaces=function(t){if(t instanceof O)this.replacedText=t.remove().jQ.text();else if(typeof t==="string")this.replacedText=t};t.jQadd=function(t){r.jQadd.call(this,t);if(this.ends[v])this.ends[v].jQadd(this.jQ[0].firstChild)};t.createLeftOf=function(t){var e=this;r.createLeftOf.call(this,t);if(e[b].siblingCreated)e[b].siblingCreated(t.options,v);if(e[v].siblingCreated)e[v].siblingCreated(t.options,b);e.bubble("reflow");t.insAtRightEnd(e);if(e.replacedText)for(var i=0;i<e.replacedText.length;i+=1)e.write(t,e.replacedText.charAt(i))};t.parser=function(){var e=this;var t=B.string;var i=B.regex;var n=B.optWhitespace;return n.then(t("{")).then(i(/^[^}]*/)).skip(t("}")).map(function(t){X(t).adopt(e,0,0);return e})};t.textContents=function(){return this.foldChildren("",function(t,e){return t+e.text})};t.text=function(){return'"'+this.textContents()+'"'};t.latex=function(){return"\\text{"+this.textContents()+"}"};t.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"};t.moveTowards=function(t,e){e.insAtDirEnd(-t,this)};t.moveOutOf=function(t,e){e.insDirOf(t,this)};t.unselectInto=t.moveTowards;t.selectTowards=P.prototype.selectTowards;t.deleteTowards=P.prototype.deleteTowards;t.selectOutOf=function(t,e){e.insDirOf(t,this)};t.deleteOutOf=function(t,e){if(this.isEmpty())e.insRightOf(this)};t.write=function(t,e){t.show().deleteSelection();if(e!=="$"){if(!t[v])X(e).createLeftOf(t);else t[v].appendText(e)}else if(this.isEmpty()){t.insRightOf(this);W("\\$","$").createLeftOf(t)}else if(!t[b])t.insRightOf(this);else if(!t[v])t.insLeftOf(this);else{var i=Y();var n=this.ends[v];n.disown();n.adopt(i,0,0);t.insLeftOf(this);r.createLeftOf.call(i,t)}};t.seek=function(t,e){e.hide();var i=u(this);var n=this.jQ.width()/this.text.length;var r=Math.round((t-this.jQ.offset().left)/n);if(r<=0)e.insAtLeftEnd(this);else if(r>=i.text.length)e.insAtRightEnd(this);else e.insLeftOf(i.splitRight(r));var s=t-e.show().offset().left;var a=s&&s<0?v:b;var o=a;while(e[a]&&s*o>0){e[a].moveTowards(a,e);o=s;s=t-e.offset().left}if(a*s<-a*o)e[-a].moveTowards(-a,e);if(!e.anticursor){this.anticursorPosition=e[v]&&e[v].text.length}else if(e.anticursor.parent===this){var l=e[v]&&e[v].text.length;if(this.anticursorPosition===l){e.anticursor=f.copy(e)}else{if(this.anticursorPosition<l){var c=e[v].splitRight(this.anticursorPosition);e[v]=c}else{var c=e[b].splitRight(this.anticursorPosition-l)}e.anticursor=f(this,c[v],c)}}};t.blur=function(){G.prototype.blur.call(this);u(this)};function u(t){t.jQ[0].normalize();var e=t.jQ[0].firstChild;g("only node in TextBlock span is Text node",e.nodeType===3);var i=X(e.data);i.jQadd(e);t.children().disown();return i.adopt(t,0,0)}t.focus=G.prototype.focus});var X=c(q,function(t,e){t.init=function(t){e.init.call(this);this.text=t};t.jQadd=function(t){this.dom=t;this.jQ=w(t)};t.jQize=function(){return this.jQadd(document.createTextNode(this.text))};t.appendText=function(t){this.text+=t;this.dom.appendData(t)};t.prependText=function(t){this.text=t+this.text;this.dom.insertData(0,t)};t.insTextAtDirEnd=function(t,e){u(e);if(e===b)this.appendText(t);else this.prependText(t)};t.splitRight=function(t){var e=X(this.text.slice(t)).adopt(this.parent,this,this[b]);e.jQadd(this.dom.splitText(t));this.text=this.text.slice(0,t);return e};function a(t,e){return e.charAt(t===v?0:-1+e.length)}t.moveTowards=function(t,e){u(t);var i=a(-t,this.text);var n=this[-t];if(n)n.insTextAtDirEnd(i,t);else X(i).createDir(-t,e);return this.deleteTowards(t,e)};t.latex=function(){return this.text};t.deleteTowards=function(t,e){if(this.text.length>1){if(t===b){this.dom.deleteData(0,1);this.text=this.text.slice(1)}else{this.dom.deleteData(-1+this.text.length,1);this.text=this.text.slice(0,-1)}}else{this.remove();this.jQ.remove();e[t]=this[t]}};t.selectTowards=function(t,e){u(t);var i=e.anticursor;var n=a(-t,this.text);if(i[t]===this){var r=X(n).createDir(t,e);i[t]=r;e.insDirOf(t,r)}else{var s=this[-t];if(s)s.insTextAtDirEnd(n,t);else{var r=X(n).createDir(-t,e);r.jQ.insDirOf(-t,e.selection.jQ)}if(this.text.length===1&&i[-t]===this){i[-t]=this[-t]}}return this.deleteTowards(t,e)}});j.$=k.text=k.textnormal=k.textrm=k.textup=k.textmd=Y;function Z(t,e,i){return c(Y,{ctrlSeq:t,htmlTemplate:"<"+e+" "+i+">&0</"+e+">"})}k.em=k.italic=k.italics=k.emph=k.textit=k.textsl=Z("\\textit","i",'class="mq-text-mode"');k.strong=k.bold=k.textbf=Z("\\textbf","b",'class="mq-text-mode"');k.sf=k.textsf=Z("\\textsf","span",'class="mq-sans-serif mq-text-mode"');k.tt=k.texttt=Z("\\texttt","span",'class="mq-monospace mq-text-mode"');k.textsc=Z("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"');k.uppercase=Z("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"');k.lowercase=Z("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"');var V=c(P,function(t,e){t.init=function(t){e.init.call(this,"$");this.cursor=t};t.htmlTemplate='<span class="mq-math-mode">&0</span>';t.createBlocks=function(){e.createBlocks.call(this);this.ends[v].cursor=this.cursor;this.ends[v].write=function(t,e){if(e!=="$")G.prototype.write.call(this,t,e);else if(this.isEmpty()){t.insRightOf(this.parent);this.parent.deleteTowards(dir,t);W("\\$","$").createLeftOf(t.show())}else if(!t[b])t.insRightOf(this.parent);else if(!t[v])t.insLeftOf(this.parent);else G.prototype.write.call(this,t,e)}};t.latex=function(){return"$"+this.ends[v].latex()+"$"}});var J=c(K,function(t,e){t.keystroke=function(t){if(t==="Spacebar"||t==="Shift-Spacebar")return;return e.keystroke.apply(this,arguments)};t.write=function(t,e){t.show().deleteSelection();if(e==="$")V(t).createLeftOf(t);else{var i;if(e==="<")i="&lt;";else if(e===">")i="&gt;";W(e,i).createLeftOf(t)}}});D.TextField=function(t){return c(t.EditableField,function(t,e){this.RootBlock=J;t.__mathquillify=function(){return e.__mathquillify.call(this,"mq-editable-field mq-text-mode")};t.latex=function(t){if(arguments.length>0){this.__controller.renderLatexText(t);if(this.__controller.blurred)this.__controller.cursor.hide().parent.blur();return this}return this.__controller.exportLatex()}})};var tt=j["\\"]=c(P,function(t,n){t.ctrlSeq="\\";t.replaces=function(t){this._replacedFragment=t.disown();this.isEmpty=function(){return false}};t.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>';t.textTemplate=["\\"];t.createBlocks=function(){n.createBlocks.call(this);this.ends[v].focus=function(){this.parent.jQ.addClass("mq-hasCursor");if(this.isEmpty())this.parent.jQ.removeClass("mq-empty");return this};this.ends[v].blur=function(){this.parent.jQ.removeClass("mq-hasCursor");if(this.isEmpty())this.parent.jQ.addClass("mq-empty");return this};this.ends[v].write=function(t,e){t.show().deleteSelection();if(e.match(/[a-z]/i))W(e).createLeftOf(t);else{this.parent.renderCommand(t);if(e!=="\\"||!this.isEmpty())this.parent.parent.write(t,e)}};this.ends[v].keystroke=function(t,e,i){if(t==="Tab"||t==="Enter"||t==="Spacebar"){this.parent.renderCommand(i.cursor);e.preventDefault();return}return n.keystroke.apply(this,arguments)}};t.createLeftOf=function(t){n.createLeftOf.call(this,t);if(this._replacedFragment){var e=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",function(t){w(t.target=e).trigger(t);return false}).insertBefore(this.jQ).add(this.jQ)}};t.latex=function(){return"\\"+this.ends[v].latex()+" "};t.renderCommand=function(t){this.jQ=this.jQ.last();this.remove();if(this[b]){t.insLeftOf(this[b])}else{t.insAtRightEnd(this.parent)}var e=this.ends[v].latex();if(!e)e=" ";var i=k[e];if(i){i=i(e);if(this._replacedFragment)i.replaces(this._replacedFragment);i.createLeftOf(t)}else{i=Y();i.replaces(e);i.createLeftOf(t);t.insRightOf(i);if(this._replacedFragment)this._replacedFragment.remove()}}});k.notin=k.cong=k.equiv=k.oplus=k.otimes=c(H,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}});k["\u2260"]=k.ne=k.neq=l(H,"\\ne ","&ne;");k.ast=k.star=k.loast=k.lowast=l(H,"\\ast ","&lowast;");k.therefor=k.therefore=l(H,"\\therefore ","&there4;");k.cuz=k.because=l(H,"\\because ","&#8757;");k.prop=k.propto=l(H,"\\propto ","&prop;");k["\u2248"]=k.asymp=k.approx=l(H,"\\approx ","&asymp;");k.isin=k["in"]=l(H,"\\in ","&isin;");k.ni=k.contains=l(H,"\\ni ","&ni;");k.notni=k.niton=k.notcontains=k.doesnotcontain=l(H,"\\not\\ni ","&#8716;");k.sub=k.subset=l(H,"\\subset ","&sub;");k.sup=k.supset=k.superset=l(H,"\\supset ","&sup;");k.nsub=k.notsub=k.nsubset=k.notsubset=l(H,"\\not\\subset ","&#8836;");k.nsup=k.notsup=k.nsupset=k.notsupset=k.nsuperset=k.notsuperset=l(H,"\\not\\supset ","&#8837;");k.sube=k.subeq=k.subsete=k.subseteq=l(H,"\\subseteq ","&sube;");k.supe=k.supeq=k.supsete=k.supseteq=k.supersete=k.superseteq=l(H,"\\supseteq ","&supe;");k.nsube=k.nsubeq=k.notsube=k.notsubeq=k.nsubsete=k.nsubseteq=k.notsubsete=k.notsubseteq=l(H,"\\not\\subseteq ","&#8840;");k.nsupe=k.nsupeq=k.notsupe=k.notsupeq=k.nsupsete=k.nsupseteq=k.notsupsete=k.notsupseteq=k.nsupersete=k.nsuperseteq=k.notsupersete=k.notsuperseteq=l(H,"\\not\\supseteq ","&#8841;");k.N=k.naturals=k.Naturals=l(W,"\\mathbb{N}","&#8469;");k.P=k.primes=k.Primes=k.projective=k.Projective=k.probability=k.Probability=l(W,"\\mathbb{P}","&#8473;");k.Z=k.integers=k.Integers=l(W,"\\mathbb{Z}","&#8484;");k.Q=k.rationals=k.Rationals=l(W,"\\mathbb{Q}","&#8474;");k.R=k.reals=k.Reals=l(W,"\\mathbb{R}","&#8477;");k.C=k.complex=k.Complex=k.complexes=k.Complexes=k.complexplane=k.Complexplane=k.ComplexPlane=l(W,"\\mathbb{C}","&#8450;");k.H=k.Hamiltonian=k.quaternions=k.Quaternions=l(W,"\\mathbb{H}","&#8461;");k.quad=k.emsp=l(W,"\\quad ","    ");k.qquad=l(W,"\\qquad ","        ");k.diamond=l(W,"\\diamond ","&#9671;");k.bigtriangleup=l(W,"\\bigtriangleup ","&#9651;");k.ominus=l(W,"\\ominus ","&#8854;");k.uplus=l(W,"\\uplus ","&#8846;");k.bigtriangledown=l(W,"\\bigtriangledown ","&#9661;");k.sqcap=l(W,"\\sqcap ","&#8851;");k.triangleleft=l(W,"\\triangleleft ","&#8882;");k.sqcup=l(W,"\\sqcup ","&#8852;");k.triangleright=l(W,"\\triangleright ","&#8883;");k.odot=k.circledot=l(W,"\\odot ","&#8857;");k.bigcirc=l(W,"\\bigcirc ","&#9711;");k.dagger=l(W,"\\dagger ","&#0134;");k.ddagger=l(W,"\\ddagger ","&#135;");k.wr=l(W,"\\wr ","&#8768;");k.amalg=l(W,"\\amalg ","&#8720;");k.models=l(W,"\\models ","&#8872;");k.prec=l(W,"\\prec ","&#8826;");k.succ=l(W,"\\succ ","&#8827;");k.preceq=l(W,"\\preceq ","&#8828;");k.succeq=l(W,"\\succeq ","&#8829;");k.simeq=l(W,"\\simeq ","&#8771;");k.mid=l(W,"\\mid ","&#8739;");k.ll=l(W,"\\ll ","&#8810;");k.gg=l(W,"\\gg ","&#8811;");k.parallel=l(W,"\\parallel ","&#8741;");k.nparallel=l(W,"\\nparallel ","&#8742;");k.bowtie=l(W,"\\bowtie ","&#8904;");k.sqsubset=l(W,"\\sqsubset ","&#8847;");k.sqsupset=l(W,"\\sqsupset ","&#8848;");k.smile=l(W,"\\smile ","&#8995;");k.sqsubseteq=l(W,"\\sqsubseteq ","&#8849;");k.sqsupseteq=l(W,"\\sqsupseteq ","&#8850;");k.doteq=l(W,"\\doteq ","&#8784;");k.frown=l(W,"\\frown ","&#8994;");k.vdash=l(W,"\\vdash ","&#8870;");k.dashv=l(W,"\\dashv ","&#8867;");k.nless=l(W,"\\nless ","&#8814;");k.ngtr=l(W,"\\ngtr ","&#8815;");k.longleftarrow=l(W,"\\longleftarrow ","&#8592;");k.longrightarrow=l(W,"\\longrightarrow ","&#8594;");k.Longleftarrow=l(W,"\\Longleftarrow ","&#8656;");k.Longrightarrow=l(W,"\\Longrightarrow ","&#8658;");k.longleftrightarrow=l(W,"\\longleftrightarrow ","&#8596;");k.updownarrow=l(W,"\\updownarrow ","&#8597;");k.Longleftrightarrow=l(W,"\\Longleftrightarrow ","&#8660;");k.Updownarrow=l(W,"\\Updownarrow ","&#8661;");k.mapsto=l(W,"\\mapsto ","&#8614;");k.nearrow=l(W,"\\nearrow ","&#8599;");k.hookleftarrow=l(W,"\\hookleftarrow ","&#8617;");k.hookrightarrow=l(W,"\\hookrightarrow ","&#8618;");k.searrow=l(W,"\\searrow ","&#8600;");k.leftharpoonup=l(W,"\\leftharpoonup ","&#8636;");k.rightharpoonup=l(W,"\\rightharpoonup ","&#8640;");k.swarrow=l(W,"\\swarrow ","&#8601;");k.leftharpoondown=l(W,"\\leftharpoondown ","&#8637;");k.rightharpoondown=l(W,"\\rightharpoondown ","&#8641;");k.nwarrow=l(W,"\\nwarrow ","&#8598;");k.ldots=l(W,"\\ldots ","&#8230;");k.cdots=l(W,"\\cdots ","&#8943;");k.vdots=l(W,"\\vdots ","&#8942;");k.ddots=l(W,"\\ddots ","&#8945;");k.surd=l(W,"\\surd ","&#8730;");k.triangle=l(W,"\\triangle ","&#9651;");k.ell=l(W,"\\ell ","&#8467;");k.top=l(W,"\\top ","&#8868;");k.flat=l(W,"\\flat ","&#9837;");k.natural=l(W,"\\natural ","&#9838;");k.sharp=l(W,"\\sharp ","&#9839;");k.wp=l(W,"\\wp ","&#8472;");k.bot=l(W,"\\bot ","&#8869;");k.clubsuit=l(W,"\\clubsuit ","&#9827;");k.diamondsuit=l(W,"\\diamondsuit ","&#9826;");k.heartsuit=l(W,"\\heartsuit ","&#9825;");k.spadesuit=l(W,"\\spadesuit ","&#9824;");k.parallelogram=l(W,"\\parallelogram ","&#9649;");k.square=l(W,"\\square ","&#11036;");k.oint=l(W,"\\oint ","&#8750;");k.bigcap=l(W,"\\bigcap ","&#8745;");k.bigcup=l(W,"\\bigcup ","&#8746;");k.bigsqcup=l(W,"\\bigsqcup ","&#8852;");k.bigvee=l(W,"\\bigvee ","&#8744;");k.bigwedge=l(W,"\\bigwedge ","&#8743;");k.bigodot=l(W,"\\bigodot ","&#8857;");k.bigotimes=l(W,"\\bigotimes ","&#8855;");k.bigoplus=l(W,"\\bigoplus ","&#8853;");k.biguplus=l(W,"\\biguplus ","&#8846;");k.lfloor=l(W,"\\lfloor ","&#8970;");k.rfloor=l(W,"\\rfloor ","&#8971;");k.lceil=l(W,"\\lceil ","&#8968;");k.rceil=l(W,"\\rceil ","&#8969;");k.opencurlybrace=k.lbrace=l(W,"\\lbrace ","{");k.closecurlybrace=k.rbrace=l(W,"\\rbrace ","}");k.lbrack=l(W,"[");k.rbrack=l(W,"]");k["\u222b"]=k["int"]=k.integral=l(U,"\\int ","<big>&int;</big>");k.slash=l(W,"/");k.vert=l(W,"|");k.perp=k.perpendicular=l(W,"\\perp ","&perp;");k.nabla=k.del=l(W,"\\nabla ","&nabla;");k.hbar=l(W,"\\hbar ","&#8463;");k.AA=k.Angstrom=k.angstrom=l(W,"\\text\\AA ","&#8491;");k.ring=k.circ=k.circle=l(W,"\\circ ","&#8728;");k.bull=k.bullet=l(W,"\\bullet ","&bull;");k.setminus=k.smallsetminus=l(W,"\\setminus ","&#8726;");k.not=k["\xac"]=k.neg=l(W,"\\neg ","&not;");k["\u2026"]=k.dots=k.ellip=k.hellip=k.ellipsis=k.hellipsis=l(W,"\\dots ","&hellip;");k.converges=k.darr=k.dnarr=k.dnarrow=k.downarrow=l(W,"\\downarrow ","&darr;");k.dArr=k.dnArr=k.dnArrow=k.Downarrow=l(W,"\\Downarrow ","&dArr;");k.diverges=k.uarr=k.uparrow=l(W,"\\uparrow ","&uarr;");k.uArr=k.Uparrow=l(W,"\\Uparrow ","&uArr;");k.to=l(H,"\\to ","&rarr;");k.rarr=k.rightarrow=l(W,"\\rightarrow ","&rarr;");k.implies=l(H,"\\Rightarrow ","&rArr;");k.rArr=k.Rightarrow=l(W,"\\Rightarrow ","&rArr;");k.gets=l(H,"\\gets ","&larr;");k.larr=k.leftarrow=l(W,"\\leftarrow ","&larr;");k.impliedby=l(H,"\\Leftarrow ","&lArr;");k.lArr=k.Leftarrow=l(W,"\\Leftarrow ","&lArr;");k.harr=k.lrarr=k.leftrightarrow=l(W,"\\leftrightarrow ","&harr;");k.iff=l(H,"\\Leftrightarrow ","&hArr;");k.hArr=k.lrArr=k.Leftrightarrow=l(W,"\\Leftrightarrow ","&hArr;");k.Re=k.Real=k.real=l(W,"\\Re ","&real;");k.Im=k.imag=k.image=k.imagin=k.imaginary=k.Imaginary=l(W,"\\Im ","&image;");k.part=k.partial=l(W,"\\partial ","&part;");k.infty=k.infin=k.infinity=l(W,"\\infty ","&infin;");k.alef=k.alefsym=k.aleph=k.alephsym=l(W,"\\aleph ","&alefsym;");k.xist=k.xists=k.exist=k.exists=l(W,"\\exists ","&exist;");k.and=k.land=k.wedge=l(W,"\\wedge ","&and;");k.or=k.lor=k.vee=l(W,"\\vee ","&or;");k.o=k.O=k.empty=k.emptyset=k.oslash=k.Oslash=k.nothing=k.varnothing=l(H,"\\varnothing ","&empty;");k.cup=k.union=l(H,"\\cup ","&cup;");k.cap=k.intersect=k.intersection=l(H,"\\cap ","&cap;");k.deg=k.degree=l(W,"\\degree ","&deg;");k.ang=k.angle=l(W,"\\angle ","&ang;");k.measuredangle=l(W,"\\measuredangle ","&#8737;");var et=c(W,function(t,e){t.createLeftOf=function(t){if(t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[v]instanceof it&&t[v].isItalic!==false||t[v]instanceof Qt&&t[v][v]instanceof it&&t[v][v].isItalic!==false)){k._().createLeftOf(t);e.createLeftOf.call(this,t);t.insRightOf(t.parent.parent)}else e.createLeftOf.call(this,t)}});var it=c(U,function(t,i){t.init=function(t,e){i.init.call(this,t,"<dfn>"+(e||t)+"</dfn>")};t.text=function(){var t=this.ctrlSeq;if(this[v]&&!(this[v]instanceof it)&&!(this[v]instanceof H)&&this[v].ctrlSeq!=="\\ ")t="*"+t;if(this[b]&&!(this[b]instanceof H)&&!(this[b]instanceof Qt))t+="*";return t}});_.p.autoCommands={_maxLength:0};S.autoCommands=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t)){throw'"'+t+'" not a space-delimited list of only letters'}var e=t.split(" "),i={},n=0;for(var r=0;r<e.length;r+=1){var s=e[r];if(s.length<2){throw'autocommand "'+s+'" not minimum length of 2'}if(k[s]===ot){throw'"'+s+'" is a built-in operator name'}i[s]=1;n=a(n,s.length)}i._maxLength=n;return i};var nt=c(it,function(t,a){t.init=function(t){return a.init.call(this,this.letter=t)};t.createLeftOf=function(t){var e=t.options.autoCommands,i=e._maxLength;if(i>0){var n=this.letter,r=t[v],s=1;while(r instanceof nt&&s<i){n=r.letter+n,r=r[v],s+=1}while(n.length){if(e.hasOwnProperty(n)){for(var s=2,r=t[v];s<n.length;s+=1,r=r[v]);O(r,t[v]).remove();t[v]=r[v];return k[n](n).createLeftOf(t)}n=n.slice(1)}}a.createLeftOf.apply(this,arguments)};t.italicize=function(t){this.isItalic=t;this.jQ.toggleClass("mq-operator-name",!t);return this};t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){if(e!==v&&this[b]instanceof nt)return;this.autoUnItalicize(t)};t.autoUnItalicize=function(t){var e=t.autoOperatorNames;if(e._maxLength===0)return;var i=this.letter;for(var n=this[v];n instanceof nt;n=n[v])i=n.letter+i;for(var r=this[b];r instanceof nt;r=r[b])i+=r.letter;O(n[b]||this.parent.ends[v],r[v]||this.parent.ends[b]).each(function(t){t.italicize(true).jQ.removeClass("mq-first mq-last");t.ctrlSeq=t.letter});t:for(var s=0,a=n[b]||this.parent.ends[v];s<i.length;s+=1,a=a[b]){for(var o=m(e._maxLength,i.length-s);o>0;o-=1){var l=i.slice(s,s+o);if(e.hasOwnProperty(l)){for(var c=0,u=a;c<o;c+=1,u=u[b]){u.italicize(false);var f=u}var h=rt.hasOwnProperty(l);a.ctrlSeq=(h?"\\":"\\operatorname{")+a.ctrlSeq;f.ctrlSeq+=h?" ":"}";if(at.hasOwnProperty(l))f[v][v][v].jQ.addClass("mq-last");if(p(a[v]))a.jQ.addClass("mq-first");if(p(f[b]))f.jQ.addClass("mq-last");s+=o-1;a=f;continue t}}}};function p(t){return t instanceof U&&!(t instanceof H)}});var rt={};var st=_.p.autoOperatorNames={_maxLength:9};var at={limsup:1,liminf:1,projlim:1,injlim:1};(function(){var t=("arg deg det dim exp gcd hom inf ker lg lim ln log max min sup"+" limsup liminf injlim projlim Pr").split(" ");for(var e=0;e<t.length;e+=1){rt[t[e]]=st[t[e]]=1}var i="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(var e=0;e<i.length;e+=1){rt[i[e]]=1}var n="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(var e=0;e<n.length;e+=1){st[n[e]]=st["arc"+n[e]]=st[n[e]+"h"]=st["ar"+n[e]+"h"]=st["arc"+n[e]+"h"]=1}var r="gcf hcf lcm proj span".split(" ");for(var e=0;e<r.length;e+=1){st[r[e]]=1}})();S.autoOperatorNames=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t)){throw'"'+t+'" not a space-delimited list of only letters'}var e=t.split(" "),i={},n=0;for(var r=0;r<e.length;r+=1){var s=e[r];if(s.length<2){throw'"'+s+'" not minimum length of 2'}i[s]=1;n=a(n,s.length)}i._maxLength=n;return i};var ot=c(U,function(t,e){t.init=function(t){this.ctrlSeq=t};t.createLeftOf=function(t){var e=this.ctrlSeq;for(var i=0;i<e.length;i+=1){nt(e.charAt(i)).createLeftOf(t)}};t.parser=function(){var t=this.ctrlSeq;var e=G();for(var i=0;i<t.length;i+=1){nt(t.charAt(i)).adopt(e,e.ends[b],0)}return B.succeed(e.children())}});for(var lt in st)if(st.hasOwnProperty(lt)){k[lt]=ot}k.operatorname=c(P,function(t){t.createLeftOf=y;t.numBlocks=function(){return 1};t.parser=function(){return $.block.map(function(t){return t.children()})}});k.f=c(nt,function(t,e){t.init=function(){U.p.init.call(this,this.letter="f",'<dfn class="mq-f">f</dfn>')};t.italicize=function(t){this.jQ.html("f").toggleClass("mq-f",t);return e.italicize.apply(this,arguments)}});k[" "]=k.space=l(W,"\\ ","&nbsp;");k["'"]=k.prime=l(W,"'","&prime;");k.backslash=l(W,"\\backslash ","\\");if(!j["\\"])j["\\"]=k.backslash;k.$=l(W,"\\$","$");var ct=c(U,function(t,i){t.init=function(t,e){i.init.call(this,t,'<span class="mq-nonSymbola">'+(e||t)+"</span>")}});k["@"]=ct;k["&"]=l(ct,"\\&","&amp;");k["%"]=l(ct,"\\%","%");k.alpha=k.beta=k.gamma=k.delta=k.zeta=k.eta=k.theta=k.iota=k.kappa=k.mu=k.nu=k.xi=k.rho=k.sigma=k.tau=k.chi=k.psi=k.omega=c(it,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}});k.phi=l(it,"\\phi ","&#981;");k.phiv=k.varphi=l(it,"\\varphi ","&phi;");k.epsilon=l(it,"\\epsilon ","&#1013;");k.epsiv=k.varepsilon=l(it,"\\varepsilon ","&epsilon;");k.piv=k.varpi=l(it,"\\varpi ","&piv;");k.sigmaf=k.sigmav=k.varsigma=l(it,"\\varsigma ","&sigmaf;");k.thetav=k.vartheta=k.thetasym=l(it,"\\vartheta ","&thetasym;");k.upsilon=k.upsi=l(it,"\\upsilon ","&upsilon;");k.gammad=k.Gammad=k.digamma=l(it,"\\digamma ","&#989;");k.kappav=k.varkappa=l(it,"\\varkappa ","&#1008;");k.rhov=k.varrho=l(it,"\\varrho ","&#1009;");k.pi=k["\u03c0"]=l(ct,"\\pi ","&pi;");k.lambda=l(ct,"\\lambda ","&lambda;");k.Upsilon=k.Upsi=k.upsih=k.Upsih=l(U,"\\Upsilon ",'<dfn style="font-family: serif">&upsih;</dfn>');k.Gamma=k.Delta=k.Theta=k.Lambda=k.Xi=k.Pi=k.Sigma=k.Phi=k.Psi=k.Omega=k.forall=c(W,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}});var ut=c(P,function(t){t.init=function(t){this.latex=t};t.createLeftOf=function(t){var e=$.parse(this.latex);e.children().adopt(t.parent,t[v],t[b]);t[v]=e.ends[b];e.jQize().insertBefore(t.jQ);e.finalizeInsert(t.options,t);if(e.ends[b][b].siblingCreated)e.ends[b][b].siblingCreated(t.options,v);if(e.ends[v][v].siblingCreated)e.ends[v][v].siblingCreated(t.options,b);t.parent.bubble("reflow")};t.parser=function(){var t=$.parse(this.latex).children();return B.succeed(t)}});k["\xb9"]=l(ut,"^1");k["\xb2"]=l(ut,"^2");k["\xb3"]=l(ut,"^3");k["\xbc"]=l(ut,"\\frac14");k["\xbd"]=l(ut,"\\frac12");k["\xbe"]=l(ut,"\\frac34");var ft=c(H,function(t){t.init=W.prototype.init;t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,e){if(e===b)return;this.jQ[0].className=!this[v]||this[v]instanceof H?"":"mq-binary-operator";return this}});k["+"]=l(ft,"+","+");k["\u2013"]=k["-"]=l(ft,"-","&minus;");k["\xb1"]=k.pm=k.plusmn=k.plusminus=l(ft,"\\pm ","&plusmn;");k.mp=k.mnplus=k.minusplus=l(ft,"\\mp ","&#8723;");j["*"]=k.sdot=k.cdot=l(H,"\\cdot ","&middot;","*");var ht=c(H,function(t,n){t.init=function(t,e){this.data=t;this.strict=e;var i=e?"Strict":"";n.init.call(this,t["ctrlSeq"+i],t["html"+i],t["text"+i])};t.swap=function(t){this.strict=t;var e=t?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+e];this.jQ.html(this.data["html"+e]);this.textTemplate=[this.data["text"+e]]};t.deleteTowards=function(t,e){if(t===v&&!this.strict){this.swap(true);this.bubble("reflow");return}n.deleteTowards.apply(this,arguments)}});var pt={ctrlSeq:"\\le ",html:"&le;",text:"\u2264",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"};var dt={ctrlSeq:"\\ge ",html:"&ge;",text:"\u2265",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};k["<"]=k.lt=l(ht,pt,true);k[">"]=k.gt=l(ht,dt,true);k["\u2264"]=k.le=k.leq=l(ht,pt,false);k["\u2265"]=k.ge=k.geq=l(ht,dt,false);var mt=c(H,function(t,e){t.init=function(){e.init.call(this,"=","=")};t.createLeftOf=function(t){if(t[v]instanceof ht&&t[v].strict){t[v].swap(false);t[v].bubble("reflow");return}e.createLeftOf.apply(this,arguments)}});k["="]=mt;k["\xd7"]=k.times=l(H,"\\times ","&times;","[x]");k["\xf7"]=k.div=k.divide=k.divides=l(H,"\\div ","&divide;","[/]");j["~"]=k.sim=l(H,"\\sim ","~","~");var vt,gt=y,bt=document.createElement("div"),wt=bt.style,qt={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},xt;for(var yt in qt){if(yt in wt){xt=yt;break}}if(xt){vt=function(t,e,i){t.css(xt,"scale("+e+","+i+")")}}else if("filter"in wt){gt=function(t){t.className=t.className};vt=function(t,e,i){e/=1+(i-1)/2;t.css("fontSize",i+"em");if(!t.hasClass("mq-matrixed-container")){t.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>')}var n=t.children().css("filter","progid:DXImageTransform.Microsoft"+".Matrix(M11="+e+",SizingMethod='auto expand')");function r(){t.css("marginRight",(n.width()-1)*(e-1)/e+"px")}r();var s=setInterval(r);w(window).load(function(){clearTimeout(s);r()})}}else{vt=function(t,e,i){t.css("fontSize",i+"em")}}var Ot=c(P,function(t,n){t.init=function(t,e,i){n.init.call(this,t,"<"+e+" "+i+">&0</"+e+">")}});k.mathrm=l(Ot,"\\mathrm","span",'class="mq-roman mq-font"');k.mathit=l(Ot,"\\mathit","i",'class="mq-font"');k.mathbf=l(Ot,"\\mathbf","b",'class="mq-font"');k.mathsf=l(Ot,"\\mathsf","span",'class="mq-sans-serif mq-font"');k.mathtt=l(Ot,"\\mathtt","span",'class="mq-monospace mq-font"');k.underline=l(Ot,"\\underline","span",'class="mq-non-leaf mq-underline"');k.overline=k.bar=l(Ot,"\\overline","span",'class="mq-non-leaf mq-overline"');k.overrightarrow=l(Ot,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"');k.overleftarrow=l(Ot,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"');var kt=k.textcolor=c(P,function(t,r){t.setColor=function(t){this.color=t;this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'};t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"};t.parser=function(){var e=this;var t=B.optWhitespace;var i=B.string;var n=B.regex;return t.then(i("{")).then(n(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(t){e.setColor(t);return r.parser.call(e)})}});var jt=k["class"]=c(P,function(t,n){t.parser=function(){var e=this,t=B.string,i=B.regex;return B.optWhitespace.then(t("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(t("}")).then(function(t){e.htmlTemplate='<span class="mq-class '+t+'">&0</span>';return n.parser.call(e)})}});var Qt=c(P,function(t,n){t.ctrlSeq="_{...}^{...}";t.createLeftOf=function(t){if(!t[v]&&t.options.supSubsRequireOperand)return;return n.createLeftOf.apply(this,arguments)};t.contactWeld=function(t){for(var n=v;n;n=n===v?b:false){if(this[n]instanceof Qt){for(var e="sub";e;e=e==="sub"?"sup":false){var i=this[e],r=this[n][e];if(!i)continue;if(!r)this[n].addBlock(i.disown());else if(!i.isEmpty()){i.jQ.children().insAtDirEnd(-n,r.jQ);var s=i.children().disown();var a=f(r,s.ends[b],r.ends[v]);if(n===v)s.adopt(r,r.ends[b],0);else s.adopt(r,0,r.ends[v])}else var a=f(r,0,r.ends[v]);this.placeCursor=function(e,i){return function(t){t.insAtDirEnd(-n,e||i)}}(r,i)}this.remove();if(t&&t[v]===this){if(n===b&&a){a[v]?t.insRightOf(a[v]):t.insAtLeftEnd(a.parent)}else t.insRightOf(this[n])}break}}this.respace()};_.p.charsThatBreakOutOfSupSub="";t.finalizeTree=function(){this.ends[v].write=function(t,e){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if(e==="_")return;var i=this.chToCmd(e);if(i instanceof U)t.deleteSelection();else t.clearSelection().insRightOf(this.parent);return i.createLeftOf(t.show())}if(t[v]&&!t[b]&&!t.selection&&t.options.charsThatBreakOutOfSupSub.indexOf(e)>-1){t.insRightOf(this.parent)}G.p.write.apply(this,arguments)}};t.moveTowards=function(t,e,i){if(e.options.autoSubscriptNumerals&&!this.sup){e.insDirOf(t,this)}else n.moveTowards.apply(this,arguments)};t.deleteTowards=function(t,e){if(e.options.autoSubscriptNumerals&&this.sub){var i=this.sub.ends[-t];if(i instanceof U)i.remove();else if(i)i.deleteTowards(t,e.insAtDirEnd(-t,this.sub));if(this.sub.isEmpty()){this.sub.deleteOutOf(v,e.insAtLeftEnd(this.sub));if(this.sup)e.insDirOf(-t,this)}}else n.deleteTowards.apply(this,arguments)};t.latex=function(){function t(t,e){var i=e&&e.latex();return e?t+(i.length===1?i:"{"+(i||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)};t.respace=t.siblingCreated=t.siblingDeleted=function(t,e){if(e===b)return;this.jQ.toggleClass("mq-limit",this[v].ctrlSeq==="\\int ")};t.addBlock=function(t){if(this.supsub==="sub"){this.sup=this.upInto=this.sub.upOutOf=t;t.adopt(this,this.sub,0).downOutOf=this.sub;t.jQ=w('<span class="mq-sup"></span>').append(t.jQ.children()).attr(d,t.id).prependTo(this.jQ)}else{this.sub=this.downInto=this.sup.downOutOf=t;t.adopt(this,0,this.sup).upOutOf=this.sup;t.jQ=w('<span class="mq-sub"></span>').append(t.jQ.children()).attr(d,t.id).appendTo(this.jQ.removeClass("mq-sup-only"));this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>')}for(var e=0;e<2;e+=1)(function(n,r,s,a){n[r].deleteOutOf=function(t,e){e.insDirOf(this[t]?-t:t,this.parent);if(!this.isEmpty()){var i=this.ends[t];this.children().disown().withDirAdopt(t,e.parent,e[t],e[-t]).jQ.insDirOf(-t,e.jQ);e[-t]=i}n.supsub=s;delete n[r];delete n[a+"Into"];n[s][a+"OutOf"]=Tt;delete n[s].deleteOutOf;if(r==="sub")w(n.jQ.addClass("mq-sup-only")[0].lastChild).remove();this.remove()}})(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}});function Tt(t){var e=this.parent,i=t;do{if(i[b])return t.insLeftOf(e);i=i.parent.parent}while(i!==e);t.insRightOf(e)}k.subscript=k._=c(Qt,function(t,e){t.supsub="sub";t.htmlTemplate='<span class="mq-supsub mq-non-leaf">'+'<span class="mq-sub">&0</span>'+'<span style="display:inline-block;width:0">&#8203;</span>'+"</span>";t.textTemplate=["_"];t.finalizeTree=function(){this.downInto=this.sub=this.ends[v];this.sub.upOutOf=Tt;e.finalizeTree.call(this)}});k.superscript=k.supscript=k["^"]=c(Qt,function(t,e){t.supsub="sup";t.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only">'+'<span class="mq-sup">&0</span>'+"</span>";t.textTemplate=["^"];t.finalizeTree=function(){this.upInto=this.sup=this.ends[b];this.sup.downOutOf=Tt;e.finalizeTree.call(this)}});var Ct=c(P,function(t,e){t.init=function(t,e){var i='<span class="mq-large-operator mq-non-leaf">'+'<span class="mq-to"><span>&1</span></span>'+"<big>"+e+"</big>"+'<span class="mq-from"><span>&0</span></span>'+"</span>";U.prototype.init.call(this,t,i)};t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments);if(t.options.sumStartsWithNEquals){nt("n").createLeftOf(t);mt().createLeftOf(t)}};t.latex=function(){function t(t){return t.length===1?t:"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[v].latex())+"^"+t(this.ends[b].latex())};t.parser=function(){var t=B.string;var e=B.optWhitespace;var i=B.succeed;var n=$.block;var r=this;var s=r.blocks=[G(),G()];for(var a=0;a<s.length;a+=1){s[a].adopt(r,r.ends[b],0)}return e.then(t("_").or(t("^"))).then(function(t){var e=s[t==="_"?0:1];return n.then(function(t){t.children().adopt(e,e.ends[b],0);return i(r)})}).many().result(r)};t.finalizeTree=function(){this.downInto=this.ends[v];this.upInto=this.ends[b];this.ends[v].upOutOf=this.ends[b];this.ends[b].downOutOf=this.ends[v]}});k["\u2211"]=k.sum=k.summation=l(Ct,"\\sum ","&sum;");k["\u220f"]=k.prod=k.product=l(Ct,"\\prod ","&prod;");k.coprod=k.coproduct=l(Ct,"\\coprod ","&#8720;");var Dt=k.frac=k.dfrac=k.cfrac=k.fraction=c(P,function(t,e){t.ctrlSeq="\\frac";t.htmlTemplate='<span class="mq-fraction mq-non-leaf">'+'<span class="mq-numerator">&0</span>'+'<span class="mq-denominator">&1</span>'+'<span style="display:inline-block;width:0">&#8203;</span>'+"</span>";t.textTemplate=["(",")/(",")"];t.finalizeTree=function(){this.upInto=this.ends[b].upOutOf=this.ends[v];this.downInto=this.ends[v].downOutOf=this.ends[b]}});var _t=k.over=j["/"]=c(Dt,function(t,i){t.createLeftOf=function(t){if(!this.replacedFragment){var e=t[v];while(e&&!(e instanceof H||e instanceof(k.text||y)||e instanceof Ct||e.ctrlSeq==="\\ "||/^[,;:]$/.test(e.ctrlSeq)))e=e[v];if(e instanceof Ct&&e[b]instanceof Qt){e=e[b];if(e[b]instanceof Qt&&e[b].ctrlSeq!=e.ctrlSeq)e=e[b]}if(e!==t[v]){this.replaces(O(e[b]||t.parent.ends[v],t[v]));t[v]=e}}i.createLeftOf.call(this,t)}});var St=k.sqrt=k["\u221a"]=c(P,function(t,e){t.ctrlSeq="\\sqrt";t.htmlTemplate='<span class="mq-non-leaf">'+'<span class="mq-scaled mq-sqrt-prefix">&radic;</span>'+'<span class="mq-non-leaf mq-sqrt-stem">&0</span>'+"</span>";t.textTemplate=["sqrt(",")"];t.parser=function(){return $.optBlock.then(function(i){return $.block.map(function(t){var e=Et();e.blocks=[i,t];i.adopt(e,0,0);t.adopt(e,i,0);return e})}).or(e.parser.call(this))};t.reflow=function(){var t=this.ends[b].jQ;vt(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}});var Lt=k.vec=c(P,function(t,e){t.ctrlSeq="\\vec";t.htmlTemplate='<span class="mq-non-leaf">'+'<span class="mq-vector-prefix">&rarr;</span>'+'<span class="mq-vector-stem">&0</span>'+"</span>";t.textTemplate=["vec(",")"]});var Et=k.nthroot=c(St,function(t,e){t.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup>'+'<span class="mq-scaled">'+'<span class="mq-sqrt-prefix mq-scaled">&radic;</span>'+'<span class="mq-sqrt-stem mq-non-leaf">&1</span>'+"</span>";t.textTemplate=["sqrt[","](",")"];t.latex=function(){return"\\sqrt["+this.ends[v].latex()+"]{"+this.ends[b].latex()+"}"}});function At(t,e){t.jQadd=function(){e.jQadd.apply(this,arguments);this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last"));this.contentjQ=this.jQ.children(":eq(1)")};t.reflow=function(){var t=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));vt(this.delimjQs,m(1+.2*(t-1),1.2),1.2*t)}}var Rt=c(c(P,At),function(t,s){t.init=function(t,e,i,n,r){s.init.call(this,"\\left"+n,p,[e,i]);this.side=t;this.sides={};this.sides[v]={ch:e,ctrlSeq:n};this.sides[b]={ch:i,ctrlSeq:r}};t.numBlocks=function(){return 1};t.html=function(){this.htmlTemplate='<span class="mq-non-leaf">'+'<span class="mq-scaled mq-paren'+(this.side===b?" mq-ghost":"")+'">'+this.sides[v].ch+"</span>"+'<span class="mq-non-leaf">&0</span>'+'<span class="mq-scaled mq-paren'+(this.side===v?" mq-ghost":"")+'">'+this.sides[b].ch+"</span>"+"</span>";return s.html.call(this)};t.latex=function(){return"\\left"+this.sides[v].ctrlSeq+this.ends[v].latex()+"\\right"+this.sides[b].ctrlSeq};t.oppBrack=function(t,e,i){return e instanceof Rt&&e.side&&e.side!==-i&&(this.sides[this.side].ch==="|"||e.side===-this.side)&&(!t.restrictMismatchedBrackets||It[this.sides[this.side].ch]===e.sides[e.side].ch||{"(":"]","[":")"}[this.sides[v].ch]===e.sides[b].ch)&&e};t.closeOpposing=function(t){t.side=0;t.sides[this.side]=this.sides[this.side];t.delimjQs.eq(this.side===v?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)};t.createLeftOf=function(t){if(!this.replacedFragment){var e=t.options;var i=this.oppBrack(e,t[v],v)||this.oppBrack(e,t[b],b)||this.oppBrack(e,t.parent.parent)}if(i){var n=this.side=-i.side;this.closeOpposing(i);if(i===t.parent.parent&&t[n]){O(t[n],t.parent.ends[n],-n).disown().withDirAdopt(-n,i.parent,i,i[n]).jQ.insDirOf(n,i.jQ);i.bubble("reflow")}}else{i=this,n=i.side;if(i.replacedFragment)i.side=0;else if(t[-n]){i.replaces(O(t[-n],t.parent.ends[-n],n));t[-n]=0}s.createLeftOf.call(i,t)}if(n===v)t.insAtLeftEnd(i.ends[v]);else t.insRightOf(i)};t.placeCursor=y;t.unwrap=function(){this.ends[v].children().disown().adopt(this.parent,this,this[b]).jQ.insertAfter(this.jQ);this.remove()};t.deleteSide=function(t,e,i){var n=this.parent,r=this[t],s=n.ends[t];if(t===this.side){this.unwrap();r?i.insDirOf(-t,r):i.insAtDirEnd(t,n);return}var a=i.options,o=!this.side;this.side=-t;if(this.oppBrack(a,this.ends[v].ends[this.side],t)){this.closeOpposing(this.ends[v].ends[this.side]);var l=this.ends[v].ends[t];this.unwrap();if(l.siblingCreated)l.siblingCreated(i.options,t);r?i.insDirOf(-t,r):i.insAtDirEnd(t,n)}else{if(this.oppBrack(a,this.parent.parent,t)){this.parent.parent.closeOpposing(this);this.parent.parent.unwrap()}else if(e&&o){this.unwrap();r?i.insDirOf(-t,r):i.insAtDirEnd(t,n);return}else{this.sides[t]={ch:It[this.sides[this.side].ch],ctrlSeq:It[this.sides[this.side].ctrlSeq]};this.delimjQs.removeClass("mq-ghost").eq(t===v?0:1).addClass("mq-ghost").html(this.sides[t].ch)}if(r){var l=this.ends[v].ends[t];O(r,s,-t).disown().withDirAdopt(-t,this.ends[v],l,0).jQ.insAtDirEnd(t,this.ends[v].jQ.removeClass("mq-empty"));if(l.siblingCreated)l.siblingCreated(i.options,t);i.insDirOf(-t,r)}else e?i.insDirOf(t,this):i.insAtDirEnd(t,this.ends[v])}};t.deleteTowards=function(t,e){this.deleteSide(-t,false,e)};t.finalizeTree=function(){this.ends[v].deleteOutOf=function(t,e){this.parent.deleteSide(t,true,e)};this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===v?1:0).removeClass("mq-ghost");this.side=0}};t.siblingCreated=function(t,e){if(e===-this.side)this.finalizeTree()}});var It={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"};function zt(t,e){var e=e||t,i=It[t],n=It[e];j[t]=l(Rt,v,t,i,e,n);j[i]=l(Rt,b,t,i,e,n)}zt("(");zt("[");zt("{","\\{");k.langle=l(Rt,v,"&lang;","&rang;","\\langle ","\\rangle ");k.rangle=l(Rt,b,"&lang;","&rang;","\\langle ","\\rangle ");j["|"]=l(Rt,v,"|","|","|","|");k.left=c(P,function(t){t.parser=function(){var t=B.regex;var e=B.string;var i=B.succeed;var a=B.optWhitespace;return a.then(t(/^(?:[([|]|\\\{)/)).then(function(r){var s=r.charAt(0)==="\\"?r.slice(1):r;return $.then(function(n){return e("\\right").skip(a).then(t(/^(?:[\])|]|\\\})/)).map(function(t){var e=t.charAt(0)==="\\"?t.slice(1):t;var i=Rt(0,s,e,r,t);i.blocks=[n];n.adopt(i,0,0);return i})})})}});k.right=c(P,function(t){t.parser=function(){return B.fail("unmatched \\right")}});var Mt=k.binom=k.binomial=c(c(P,At),function(t,e){t.ctrlSeq="\\binom";t.htmlTemplate='<span class="mq-non-leaf">'+'<span class="mq-paren mq-scaled">(</span>'+'<span class="mq-non-leaf">'+'<span class="mq-array mq-non-leaf">'+"<span>&0</span>"+"<span>&1</span>"+"</span>"+"</span>"+'<span class="mq-paren mq-scaled">)</span>'+"</span>";t.textTemplate=["choose(",",",")"]});var Bt=k.choose=c(Mt,function(t){t.createLeftOf=_t.prototype.createLeftOf});k.editable=k.MathQuillMathField=c(P,function(t,r){t.ctrlSeq="\\MathQuillMathField";t.htmlTemplate='<span class="mq-editable-field">'+'<span class="mq-root-block">&0</span>'+"</span>";t.parser=function(){var e=this,t=B.string,i=B.regex,n=B.succeed;return t("[").then(i(/^[a-z][a-z0-9]*/i)).skip(t("]")).map(function(t){e.name=t}).or(n()).then(r.parser.call(e))};t.finalizeTree=function(){var t=C(this.ends[v],this.jQ,_());t.KIND_OF_MQ="MathField";t.editable=true;t.createTextarea();t.editablesTextareaEvents();t.cursor.insAtRightEnd(t.root);M(t.root)};t.registerInnerField=function(t,e){t.push(t[this.name]=e(this.ends[v].controller))};t.latex=function(){return this.ends[v].latex()};t.text=function(){return this.ends[v].text()}});var Ft=k.embed=c(U,function(t,e){t.setOptions=function(t){function e(){return""}this.text=t.text||e;this.htmlTemplate=t.htmlString||"";this.latex=t.latex||e;return this};t.parser=function(){var i=this;string=B.string,regex=B.regex,succeed=B.succeed;return string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(e){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(t){return i.setOptions(E[e](t))})})}});var $t=e(1);for(var Nt in $t)(function(t,e){if(typeof e==="function"){A[t]=function(){i();return e.apply(this,arguments)};A[t].prototype=e.prototype}else A[t]=e})(Nt,$t[Nt])})();
// #END
