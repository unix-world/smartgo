// JS-Script (UM): smart-mathquill.js @ 2023-11-25 11:00:48 +0000
const smartRenderMathLatexFormula=(t,e,a)=>{if(t==undefined){return}if(!t.length){return}const r=smartJ$Utils.stringPureVal(t.text()||"",true);if(r==""){return}e=smartJ$Utils.stringTrim(smartJ$Utils.create_htmid(smartJ$Utils.stringPureVal(e,true)));const s="math-latex-uid-"+smartJ$Utils.uuid().toLowerCase();if(e==""){e=s}a=!!a;let i=smartJ$Utils.stringPureVal(t.attr("id"));if(i==""){i=s;t.attr("id",i)}const l="mathquill-render-area-"+e;let m='<div role="math" id="'+smartJ$Utils.escape_html(l)+'" class="math-render-latex" data-math-latex="'+smartJ$Utils.escape_html(i);m+='" title="Math Latex Formula Render #'+smartJ$Utils.escape_html(e);if(a===true){m+="\n"+"`"+smartJ$Utils.escape_html(r)+"`"}m+='"></div>';t.after(m);const n=jQuery("#"+l);if(!n.length){return}const u=MathQuill.getInterface(2);let d=true;try{u.StaticMath(n[0]).latex(r)}catch(t){d=false;console.warn("MathQuill ERR:",t)}if(d===true){const h=smartJ$Utils.stringTrim(jQuery("#"+l).text());if(h==""||h=="$$"){a=false;t.addClass("mathLatexRenderFail")}if(a===true){t.empty().html("")}t.attr("data-math-latex",smartJ$Utils.escape_url(r)).append(n)}else{t.addClass("mathLatexRenderFail")}};if(typeof SmartViewHelpersMathLatexHide=="undefined"){var SmartViewHelpersMathLatexHide=true}if(typeof SmartJS_Custom_Math_Latex_Render!="function"){var SmartJS_Custom_Math_Latex_Render=t=>{const r=jQuery;setTimeout(()=>{r(String(t)+" div.math-latex").each((t,e)=>{let a=r(e);smartRenderMathLatexFormula(a,t+1,!!SmartViewHelpersMathLatexHide)})},70)}}
// #END
