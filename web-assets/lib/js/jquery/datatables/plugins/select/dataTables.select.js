// JS-Script (UM): dataTables.select.js @ 2022-09-20 09:51:01 +0000
(function(l){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(e){return l(e,window,document)})}else if(typeof exports==="object"){module.exports=function(e,t){if(!e){e=window}if(!t||!t.fn.dataTable){t=require("datatables.net")(e,t).$}return l(t,e,e.document)}}else{l(jQuery,window,document)}})(function(d,f,e,m){"use strict";var v=d.fn.dataTable;v.select={};v.select.version="1.2.7";v.select.init=function(e){var t=e.settings()[0];var l=t.oInit.select;var s=v.defaults.select;var n=l===m?s:l;var c="row";var r="api";var a=false;var i=true;var o="td, th";var u="selected";var f=false;t._select={};if(n===true){r="os";f=true}else if(typeof n==="string"){r=n;f=true}else if(d.isPlainObject(n)){if(n.blurable!==m){a=n.blurable}if(n.info!==m){i=n.info}if(n.items!==m){c=n.items}if(n.style!==m){r=n.style;f=true}if(n.selector!==m){o=n.selector}if(n.className!==m){u=n.className}}e.select.selector(o);e.select.items(c);e.select.style(r);e.select.blurable(a);e.select.info(i);t._select.className=u;d.fn.dataTable.ext.order["select-checkbox"]=function(t,e){return this.api().column(e,{order:"index"}).nodes().map(function(e){if(t._select.items==="row"){return d(e).parent().hasClass(t._select.className)}else if(t._select.items==="cell"){return d(e).hasClass(t._select.className)}return false})};if(!f&&d(e.table().node()).hasClass("selectable")){e.select.style("os")}};function i(c,e,t){var l;var s;var n;var r=function(t,l){if(t>l){var e=l;l=t;t=e}var s=false;return c.columns(":visible").indexes().filter(function(e){if(e===t){s=true}if(e===l){s=false;return true}return s})};var a=function(t,l){var e=c.rows({search:"applied"}).indexes();if(e.indexOf(t)>e.indexOf(l)){var s=l;l=t;t=s}var n=false;return e.filter(function(e){if(e===t){n=true}if(e===l){n=false;return true}return n})};if(!c.cells({selected:true}).any()&&!t){s=r(0,e.column);n=a(0,e.row)}else{s=r(t.column,e.column);n=a(t.row,e.row)}l=c.cells(n,s).flatten();if(!c.cells(e,{selected:true}).any()){c.cells(l).select()}else{c.cells(l).deselect()}}function s(e){var t=e.settings()[0];var l=t._select.selector;d(e.table().container()).off("mousedown.dtSelect",l).off("mouseup.dtSelect",l).off("click.dtSelect",l);d("body").off("click.dtSelect"+e.table().node().id)}function n(o){var t=d(o.table().container());var l=o.settings()[0];var s=l._select.selector;var u;t.on("mousedown.dtSelect",s,function(e){if(e.shiftKey||e.metaKey||e.ctrlKey){t.css("-moz-user-select","none").one("selectstart.dtSelect",s,function(){return false})}if(f.getSelection){u=f.getSelection()}}).on("mouseup.dtSelect",s,function(){t.css("-moz-user-select","")}).on("click.dtSelect",s,function(e){var t=o.select.items();var l;if(f.getSelection){var s=f.getSelection();if(!s.anchorNode||d(s.anchorNode).closest("table")[0]===o.table().node()){if(s!==u){return}}}var n=o.settings()[0];var c=o.settings()[0].oClasses.sWrapper.replace(/ /g,".");if(d(e.target).closest("div."+c)[0]!=o.table().container()){return}var r=o.cell(d(e.target).closest("td, th"));if(!r.any()){return}var a=d.Event("user-select.dt");h(o,a,[t,r,e]);if(a.isDefaultPrevented()){return}var i=r.index();if(t==="row"){l=i.row;_(e,o,n,"row",l)}else if(t==="column"){l=r.index().column;_(e,o,n,"column",l)}else if(t==="cell"){l=r.index();_(e,o,n,"cell",l)}n._select_lastCell=i});d("body").on("click.dtSelect"+o.table().node().id,function(e){if(l._select.blurable){if(d(e.target).parents().filter(o.table().container()).length){return}if(d(e.target).parents("html").length===0){return}if(d(e.target).parents("div.DTE").length){return}a(l,true)}})}function h(e,t,l,s){if(s&&!e.flatten().length){return}if(typeof t==="string"){t=t+".dt"}l.unshift(e);d(e.table().node()).trigger(t,l)}function c(s){var e=s.settings()[0];if(!e._select.info||!e.aanFeatures.i){return}if(s.select.style()==="api"){return}var n=s.rows({selected:true}).flatten().length;var c=s.columns({selected:true}).flatten().length;var r=s.cells({selected:true}).flatten().length;var a=function(e,t,l){e.append(d('<span class="select-item"></span>').append(s.i18n("select."+t+"s",{_:"%d "+t+"s selected",0:"",1:"1 "+t+" selected"},l)))};d.each(e.aanFeatures.i,function(e,t){t=d(t);var l=d('<span class="select-info"></span>');a(l,"row",n);a(l,"column",c);a(l,"cell",r);var s=t.children("span.select-info");if(s.length){s.remove()}if(l.text()!==""){t.append(l)}})}function r(r){var l=new v.Api(r);r.aoRowCreatedCallback.push({fn:function(e,t,l){var s,n;var c=r.aoData[l];if(c._select_selected){d(e).addClass(r._select.className)}for(s=0,n=r.aoColumns.length;s<n;s++){if(r.aoColumns[s]._select_selected||c._selected_cells&&c._selected_cells[s]){d(c.anCells[s]).addClass(r._select.className)}}},sName:"select-deferRender"});l.on("preXhr.dt.dtSelect",function(){var e=l.rows({selected:true}).ids(true).filter(function(e){return e!==m});var t=l.cells({selected:true}).eq(0).map(function(e){var t=l.row(e.row).id(true);return t?{row:t,column:e.column}:m}).filter(function(e){return e!==m});l.one("draw.dt.dtSelect",function(){l.rows(e).select();if(t.any()){t.each(function(e){l.cells(e.row,e.column).select()})}})});l.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){c(l)});l.on("destroy.dtSelect",function(){s(l);l.off(".dtSelect")})}function o(e,t,l,s){var n=e[t+"s"]({search:"applied"}).indexes();var c=d.inArray(s,n);var r=d.inArray(l,n);if(!e[t+"s"]({selected:true}).any()&&c===-1){n.splice(d.inArray(l,n)+1,n.length)}else{if(c>r){var a=r;r=c;c=a}n.splice(r+1,n.length);n.splice(0,c)}if(!e[t](l,{selected:true}).any()){e[t+"s"](n).select()}else{n.splice(d.inArray(l,n),1);e[t+"s"](n).deselect()}}function a(e,t){if(t||e._select.style==="single"){var l=new v.Api(e);l.rows({selected:true}).deselect();l.columns({selected:true}).deselect();l.cells({selected:true}).deselect()}}function _(e,t,l,s,n){var c=t.select.style();var r=t[s](n,{selected:true}).any();if(c==="os"){if(e.ctrlKey||e.metaKey){t[s](n).select(!r)}else if(e.shiftKey){if(s==="cell"){i(t,n,l._select_lastCell||null)}else{o(t,s,n,l._select_lastCell?l._select_lastCell[s]:null)}}else{var a=t[s+"s"]({selected:true});if(r&&a.flatten().length===1){t[s](n).deselect()}else{a.deselect();t[s](n).select()}}}else if(c=="multi+shift"){if(e.shiftKey){if(s==="cell"){i(t,n,l._select_lastCell||null)}else{o(t,s,n,l._select_lastCell?l._select_lastCell[s]:null)}}else{t[s](n).select(!r)}}else{t[s](n).select(!r)}}d.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(e,i){v.ext.selector[i.type].push(function(e,t,l){var s=t.selected;var n;var c=[];if(s!==true&&s!==false){return l}for(var r=0,a=l.length;r<a;r++){n=e[i.prop][l[r]];if(s===true&&n._select_selected===true||s===false&&!n._select_selected){c.push(l[r])}}return c})});v.ext.selector.cell.push(function(e,t,l){var s=t.selected;var n;var c=[];if(s===m){return l}for(var r=0,a=l.length;r<a;r++){n=e.aoData[l[r].row];if(s===true&&n._selected_cells&&n._selected_cells[l[r].column]===true||s===false&&(!n._selected_cells||!n._selected_cells[l[r].column])){c.push(l[r])}}return c});var t=v.Api.register;var l=v.Api.registerPlural;t("select()",function(){return this.iterator("table",function(e){v.select.init(new v.Api(e))})});t("select.blurable()",function(t){if(t===m){return this.context[0]._select.blurable}return this.iterator("table",function(e){e._select.blurable=t})});t("select.info()",function(t){if(c===m){return this.context[0]._select.info}return this.iterator("table",function(e){e._select.info=t})});t("select.items()",function(t){if(t===m){return this.context[0]._select.items}return this.iterator("table",function(e){e._select.items=t;h(new v.Api(e),"selectItems",[t])})});t("select.style()",function(l){if(l===m){return this.context[0]._select.style}return this.iterator("table",function(e){e._select.style=l;if(!e._select_init){r(e)}var t=new v.Api(e);s(t);if(l!=="api"){n(t)}h(new v.Api(e),"selectStyle",[l])})});t("select.selector()",function(t){if(t===m){return this.context[0]._select.selector}return this.iterator("table",function(e){s(new v.Api(e));e._select.selector=t;if(e._select.style!=="api"){n(new v.Api(e))}})});l("rows().select()","row().select()",function(e){var l=this;if(e===false){return this.deselect()}this.iterator("row",function(e,t){a(e);e.aoData[t]._select_selected=true;d(e.aoData[t].nTr).addClass(e._select.className)});this.iterator("table",function(e,t){h(l,"select",["row",l[t]],true)});return this});l("columns().select()","column().select()",function(e){var l=this;if(e===false){return this.deselect()}this.iterator("column",function(e,t){a(e);e.aoColumns[t]._select_selected=true;var l=new v.Api(e).column(t);d(l.header()).addClass(e._select.className);d(l.footer()).addClass(e._select.className);l.nodes().to$().addClass(e._select.className)});this.iterator("table",function(e,t){h(l,"select",["column",l[t]],true)});return this});l("cells().select()","cell().select()",function(e){var l=this;if(e===false){return this.deselect()}this.iterator("cell",function(e,t,l){a(e);var s=e.aoData[t];if(s._selected_cells===m){s._selected_cells=[]}s._selected_cells[l]=true;if(s.anCells){d(s.anCells[l]).addClass(e._select.className)}});this.iterator("table",function(e,t){h(l,"select",["cell",l[t]],true)});return this});l("rows().deselect()","row().deselect()",function(){var l=this;this.iterator("row",function(e,t){e.aoData[t]._select_selected=false;d(e.aoData[t].nTr).removeClass(e._select.className)});this.iterator("table",function(e,t){h(l,"deselect",["row",l[t]],true)});return this});l("columns().deselect()","column().deselect()",function(){var l=this;this.iterator("column",function(s,e){s.aoColumns[e]._select_selected=false;var t=new v.Api(s);var l=t.column(e);d(l.header()).removeClass(s._select.className);d(l.footer()).removeClass(s._select.className);t.cells(null,e).indexes().each(function(e){var t=s.aoData[e.row];var l=t._selected_cells;if(t.anCells&&(!l||!l[e.column])){d(t.anCells[e.column]).removeClass(s._select.className)}})});this.iterator("table",function(e,t){h(l,"deselect",["column",l[t]],true)});return this});l("cells().deselect()","cell().deselect()",function(){var l=this;this.iterator("cell",function(e,t,l){var s=e.aoData[t];s._selected_cells[l]=false;if(s.anCells&&!e.aoColumns[l]._select_selected){d(s.anCells[l]).removeClass(e._select.className)}});this.iterator("table",function(e,t){h(l,"deselect",["cell",l[t]],true)});return this});function u(t,l){return function(e){return e.i18n("buttons."+t,l)}}function p(e){var t=e._eventNamespace;return"draw.dt.DT"+t+" select.dt.DT"+t+" deselect.dt.DT"+t}function b(e,t){if(d.inArray("rows",t.limitTo)!==-1&&e.rows({selected:true}).any()){return true}if(d.inArray("columns",t.limitTo)!==-1&&e.columns({selected:true}).any()){return true}if(d.inArray("cells",t.limitTo)!==-1&&e.cells({selected:true}).any()){return true}return false}var w=0;d.extend(v.ext.buttons,{selected:{text:u("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(e,t,l){var s=this;l._eventNamespace=".select"+w++;e.on(p(l),function(){s.enable(b(e,l))});this.disable()},destroy:function(e,t,l){e.off(l._eventNamespace)}},selectedSingle:{text:u("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(t,e,l){var s=this;l._eventNamespace=".select"+w++;t.on(p(l),function(){var e=t.rows({selected:true}).flatten().length+t.columns({selected:true}).flatten().length+t.cells({selected:true}).flatten().length;s.enable(e===1)});this.disable()},destroy:function(e,t,l){e.off(l._eventNamespace)}},selectAll:{text:u("selectAll","Select all"),className:"buttons-select-all",action:function(){var e=this.select.items();this[e+"s"]().select()}},selectNone:{text:u("selectNone","Deselect all"),className:"buttons-select-none",action:function(){a(this.settings()[0],true)},init:function(t,e,l){var s=this;l._eventNamespace=".select"+w++;t.on(p(l),function(){var e=t.rows({selected:true}).flatten().length+t.columns({selected:true}).flatten().length+t.cells({selected:true}).flatten().length;s.enable(e>0)});this.disable()},destroy:function(e,t,l){e.off(l._eventNamespace)}}});d.each(["Row","Column","Cell"],function(e,t){var n=t.toLowerCase();v.ext.buttons["select"+t+"s"]={text:u("select"+t+"s","Select "+n+"s"),className:"buttons-select-"+n+"s",action:function(){this.select.items(n)},init:function(e){var s=this;e.on("selectItems.dt.DT",function(e,t,l){s.active(l===n)})}}});d(e).on("preInit.dt.dtSelect",function(e,t){if(e.namespace!=="dt"){return}v.select.init(new v.Api(t))});return v.select});
// #END
