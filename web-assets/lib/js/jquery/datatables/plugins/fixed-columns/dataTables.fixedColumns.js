// JS-Script (UM): dataTables.fixedColumns.js @ 2022-09-20 09:51:00 +0000
(function(i){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(t){return i(t,window,document)})}else if(typeof exports==="object"){module.exports=function(t,e){if(!t){t=window}if(!e||!e.fn.dataTable){e=require("datatables.net")(t,e).$}return i(e,t,t.document)}}else{i(jQuery,window,document)}})(function(D,f,u,F){"use strict";var l=D.fn.dataTable;var e;var c=function(t,e){var i=this;if(!(this instanceof c)){alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.");return}if(e===F||e===true){e={}}var o=D.fn.dataTable.camelToLatinExtended;if(o){o(c.defaults,c.defaults,true);o(c.defaults,e)}var r=new D.fn.dataTable.Api(t).settings()[0];this.s={dt:r,iTableColumns:r.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:D(r.nTable).css("direction")==="rtl"};this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}};if(r._oFixedColumns){throw"FixedColumns already initialised on this table"}r._oFixedColumns=this;if(!r._bInitComplete){r.oApi._fnCallbackReg(r,"aoInitComplete",function(){i._fnConstruct(e)},"FixedColumns")}else{this._fnConstruct(e)}};D.extend(c.prototype,{fnUpdate:function(){this._fnDraw(true)},fnRedrawLayout:function(){this._fnColCalc();this._fnGridLayout();this.fnUpdate()},fnRecalculateHeight:function(t){delete t._DTTC_iHeight;t.style.height="auto"},fnSetRowHeight:function(t,e){t.style.height=e+"px"},fnGetPosition:function(t){var e;var i=this.s.dt.oInstance;if(!D(t).parents(".DTFC_Cloned").length){return i.fnGetPosition(t)}else{if(t.nodeName.toLowerCase()==="tr"){e=D(t).index();return i.fnGetPosition(D("tr",this.s.dt.nTBody)[e])}else{var o=D(t).index();e=D(t.parentNode).index();var r=i.fnGetPosition(D("tr",this.s.dt.nTBody)[e]);return[r,o,i.oApi._fnVisibleToColumnIndex(this.s.dt,o)]}}},_fnConstruct:function(t){var e,i,o,l=this;if(typeof this.s.dt.oInstance.fnVersionCheck!="function"||this.s.dt.oInstance.fnVersionCheck("1.8.0")!==true){alert("FixedColumns "+c.VERSION+" required DataTables 1.8.0 or later. "+"Please upgrade your DataTables installation");return}if(this.s.dt.oScroll.sX===""){return}this.s=D.extend(true,this.s,c.defaults,t);var r=this.s.dt.oClasses;this.dom.grid.dt=D(this.s.dt.nTable).parents("div."+r.sScrollWrapper)[0];this.dom.scroller=D("div."+r.sScrollBody,this.dom.grid.dt)[0];this._fnColCalc();this._fnGridSetup();var s;var n=false;D(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(t){if(t.button===0){n=true;D(u).one("mouseup",function(){n=false})}});D(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){if(!n){s="main"}}).on("scroll.DTFC",function(t){if(!s&&t.originalEvent){s="main"}if(s==="main"){if(l.s.iLeftColumns>0){l.dom.grid.left.liner.scrollTop=l.dom.scroller.scrollTop}if(l.s.iRightColumns>0){l.dom.grid.right.liner.scrollTop=l.dom.scroller.scrollTop}}});var d="onwheel"in u.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";if(l.s.iLeftColumns>0){D(l.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){if(!n){s="left"}}).on("scroll.DTFC",function(t){if(!s&&t.originalEvent){s="left"}if(s==="left"){l.dom.scroller.scrollTop=l.dom.grid.left.liner.scrollTop;if(l.s.iRightColumns>0){l.dom.grid.right.liner.scrollTop=l.dom.grid.left.liner.scrollTop}}}).on(d,function(t){var e=t.type==="wheel"?-t.originalEvent.deltaX:t.originalEvent.wheelDeltaX;l.dom.scroller.scrollLeft-=e})}if(l.s.iRightColumns>0){D(l.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){if(!n){s="right"}}).on("scroll.DTFC",function(t){if(!s&&t.originalEvent){s="right"}if(s==="right"){l.dom.scroller.scrollTop=l.dom.grid.right.liner.scrollTop;if(l.s.iLeftColumns>0){l.dom.grid.left.liner.scrollTop=l.dom.grid.right.liner.scrollTop}}}).on(d,function(t){var e=t.type==="wheel"?-t.originalEvent.deltaX:t.originalEvent.wheelDeltaX;l.dom.scroller.scrollLeft-=e})}D(f).on("resize.DTFC",function(){l._fnGridLayout.call(l)});var a=true;var h=D(this.s.dt.nTable);h.on("draw.dt.DTFC",function(){l._fnColCalc();l._fnDraw.call(l,a);a=false}).on("column-sizing.dt.DTFC",function(){l._fnColCalc();l._fnGridLayout(l)}).on("column-visibility.dt.DTFC",function(t,e,i,o,r){if(r===F||r){l._fnColCalc();l._fnGridLayout(l);l._fnDraw(true)}}).on("select.dt.DTFC deselect.dt.DTFC",function(t,e,i,o){if(t.namespace==="dt"){l._fnDraw(false)}}).on("destroy.dt.DTFC",function(){h.off(".DTFC");D(l.dom.scroller).off(".DTFC");D(f).off(".DTFC");D(l.s.dt.nTableWrapper).off(".DTFC");D(l.dom.grid.left.liner).off(".DTFC "+d);D(l.dom.grid.left.wrapper).remove();D(l.dom.grid.right.liner).off(".DTFC "+d);D(l.dom.grid.right.wrapper).remove()});this._fnGridLayout();this.s.dt.oInstance.fnDraw(false)},_fnColCalc:function(){var l=this;var s=0;var n=0;this.s.aiInnerWidths=[];this.s.aiOuterWidths=[];D.each(this.s.dt.aoColumns,function(t,e){var i=D(e.nTh);var o;if(!i.filter(":visible").length){l.s.aiInnerWidths.push(0);l.s.aiOuterWidths.push(0)}else{var r=i.outerWidth();if(l.s.aiOuterWidths.length===0){o=D(l.s.dt.nTable).css("border-left-width");r+=typeof o==="string"&&o.indexOf("px")===-1?1:parseInt(o,10)}if(l.s.aiOuterWidths.length===l.s.dt.aoColumns.length-1){o=D(l.s.dt.nTable).css("border-right-width");r+=typeof o==="string"&&o.indexOf("px")===-1?1:parseInt(o,10)}l.s.aiOuterWidths.push(r);l.s.aiInnerWidths.push(i.width());if(t<l.s.iLeftColumns){s+=r}if(l.s.iTableColumns-l.s.iRightColumns<=t){n+=r}}});this.s.iLeftWidth=s;this.s.iRightWidth=n},_fnGridSetup:function(){var t=this;var e=this._fnDTOverflow();var i;this.dom.body=this.s.dt.nTable;this.dom.header=this.s.dt.nTHead.parentNode;this.dom.header.parentNode.parentNode.style.position="relative";var o=D('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;">'+'<div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;" aria-hidden="true">'+'<div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div>'+'<div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;">'+'<div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div>'+"</div>"+'<div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div>'+"</div>"+'<div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;" aria-hidden="true">'+'<div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;">'+'<div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div>'+"</div>"+'<div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;">'+'<div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div>'+"</div>"+'<div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;">'+'<div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div>'+"</div>"+"</div>"+"</div>")[0];var r=o.childNodes[0];var l=o.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(o,this.dom.grid.dt);o.appendChild(this.dom.grid.dt);this.dom.grid.wrapper=o;if(this.s.iLeftColumns>0){this.dom.grid.left.wrapper=r;this.dom.grid.left.head=r.childNodes[0];this.dom.grid.left.body=r.childNodes[1];this.dom.grid.left.liner=D("div.DTFC_LeftBodyLiner",o)[0];o.appendChild(r)}if(this.s.iRightColumns>0){this.dom.grid.right.wrapper=l;this.dom.grid.right.head=l.childNodes[0];this.dom.grid.right.body=l.childNodes[1];this.dom.grid.right.liner=D("div.DTFC_RightBodyLiner",o)[0];l.style.right=e.bar+"px";i=D("div.DTFC_RightHeadBlocker",o)[0];i.style.width=e.bar+"px";i.style.right=-e.bar+"px";this.dom.grid.right.headBlock=i;i=D("div.DTFC_RightFootBlocker",o)[0];i.style.width=e.bar+"px";i.style.right=-e.bar+"px";this.dom.grid.right.footBlock=i;o.appendChild(l)}if(this.s.dt.nTFoot){this.dom.footer=this.s.dt.nTFoot.parentNode;if(this.s.iLeftColumns>0){this.dom.grid.left.foot=r.childNodes[2]}if(this.s.iRightColumns>0){this.dom.grid.right.foot=l.childNodes[2]}}if(this.s.rtl){D("div.DTFC_RightHeadBlocker",o).css({left:-e.bar+"px",right:""})}},_fnGridLayout:function(){var i=this;var t=this.dom.grid;var e=D(t.wrapper).width();var o=this.s.dt.nTable.parentNode.offsetHeight;var r=this.s.dt.nTable.parentNode.parentNode.offsetHeight;var l=this._fnDTOverflow();var s=this.s.iLeftWidth;var n=this.s.iRightWidth;var d=D(this.dom.body).css("direction")==="rtl";var a;var h=function(t,e){if(!l.bar){t.style.width=e+20+"px";t.style.paddingRight="20px";t.style.boxSizing="border-box"}else if(i._firefoxScrollError()){if(D(t).height()>34){t.style.width=e+l.bar+"px"}}else{t.style.width=e+l.bar+"px"}};if(l.x){o-=l.bar}t.wrapper.style.height=r+"px";if(this.s.iLeftColumns>0){a=t.left.wrapper;a.style.width=s+"px";a.style.height="1px";if(d){a.style.left="";a.style.right=0}else{a.style.left=0;a.style.right=""}t.left.body.style.height=o+"px";if(t.left.foot){t.left.foot.style.top=(l.x?l.bar:0)+"px"}h(t.left.liner,s);t.left.liner.style.height=o+"px";t.left.liner.style.maxHeight=o+"px"}if(this.s.iRightColumns>0){a=t.right.wrapper;a.style.width=n+"px";a.style.height="1px";if(this.s.rtl){a.style.left=l.y?l.bar+"px":0;a.style.right=""}else{a.style.left="";a.style.right=l.y?l.bar+"px":0}t.right.body.style.height=o+"px";if(t.right.foot){t.right.foot.style.top=(l.x?l.bar:0)+"px"}h(t.right.liner,n);t.right.liner.style.height=o+"px";t.right.liner.style.maxHeight=o+"px";t.right.headBlock.style.display=l.y?"block":"none";t.right.footBlock.style.display=l.y?"block":"none"}},_fnDTOverflow:function(){var t=this.s.dt.nTable;var e=t.parentNode;var i={x:false,y:false,bar:this.s.dt.oScroll.iBarWidth};if(t.offsetWidth>e.clientWidth){i.x=true}if(t.offsetHeight>e.clientHeight){i.y=true}return i},_fnDraw:function(t){this._fnGridLayout();this._fnCloneLeft(t);this._fnCloneRight(t);if(this.s.fnDrawCallback!==null){this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right)}D(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(t){if(this.s.iRightColumns<=0){return}var e=this,i,o,r=[];for(i=this.s.iTableColumns-this.s.iRightColumns;i<this.s.iTableColumns;i++){if(this.s.dt.aoColumns[i].bVisible){r.push(i)}}this._fnClone(this.dom.clone.right,this.dom.grid.right,r,t)},_fnCloneLeft:function(t){if(this.s.iLeftColumns<=0){return}var e=this,i,o,r=[];for(i=0;i<this.s.iLeftColumns;i++){if(this.s.dt.aoColumns[i].bVisible){r.push(i)}}this._fnClone(this.dom.clone.left,this.dom.grid.left,r,t)},_fnCopyLayout:function(t,e,i){var o=[];var r=[];var l=[];for(var s=0,n=t.length;s<n;s++){var d=[];d.nTr=D(t[s].nTr).clone(i,false)[0];for(var a=0,h=this.s.iTableColumns;a<h;a++){if(D.inArray(a,e)===-1){continue}var f=D.inArray(t[s][a].cell,l);if(f===-1){var u=D(t[s][a].cell).clone(i,false)[0];r.push(u);l.push(t[s][a].cell);d.push({cell:u,unique:t[s][a].unique})}else{d.push({cell:r[f],unique:t[s][a].unique})}}o.push(d)}return o},_fnClone:function(t,e,r,i){var l=this,o,s,n,d,a,h,f,u,c,p,g,m,C=this.s.dt;if(i){D(t.header).remove();t.header=D(this.dom.header).clone(true,false)[0];t.header.className+=" DTFC_Cloned";t.header.style.width="100%";e.head.appendChild(t.header);p=this._fnCopyLayout(C.aoHeader,r,true);g=D(">thead",t.header);g.empty();for(o=0,s=p.length;o<s;o++){g[0].appendChild(p[o].nTr)}C.oApi._fnDrawHead(C,p,true)}else{p=this._fnCopyLayout(C.aoHeader,r,false);m=[];C.oApi._fnDetectHeader(m,D(">thead",t.header)[0]);for(o=0,s=p.length;o<s;o++){for(n=0,d=p[o].length;n<d;n++){m[o][n].cell.className=p[o][n].cell.className;D("span.DataTables_sort_icon",m[o][n].cell).each(function(){this.className=D("span.DataTables_sort_icon",p[o][n].cell)[0].className})}}}this._fnEqualiseHeights("thead",this.dom.header,t.header);if(this.s.sHeightMatch=="auto"){D(">tbody>tr",l.dom.body).css("height","auto")}if(t.body!==null){D(t.body).remove();t.body=null}t.body=D(this.dom.body).clone(true)[0];t.body.className+=" DTFC_Cloned";t.body.style.paddingBottom=C.oScroll.iBarWidth+"px";t.body.style.marginBottom=C.oScroll.iBarWidth*2+"px";if(t.body.getAttribute("id")!==null){t.body.removeAttribute("id")}D(">thead>tr",t.body).empty();D(">tfoot",t.body).remove();var y=D("tbody",t.body)[0];D(y).empty();if(C.aiDisplay.length>0){var v=D(">thead>tr",t.body)[0];for(c=0;c<r.length;c++){f=r[c];u=D(C.aoColumns[f].nTh).clone(true)[0];u.innerHTML="";var b=u.style;b.paddingTop="0";b.paddingBottom="0";b.borderTopWidth="0";b.borderBottomWidth="0";b.height=0;b.width=l.s.aiInnerWidths[f]+"px";v.appendChild(u)}D(">tbody>tr",l.dom.body).each(function(t){var e=l.s.dt.oFeatures.bServerSide===false?l.s.dt.aiDisplay[l.s.dt._iDisplayStart+t]:t;var i=l.s.dt.aoData[e].anCells||D(this).children("td, th");var o=this.cloneNode(false);o.removeAttribute("id");o.setAttribute("data-dt-row",e);for(c=0;c<r.length;c++){f=r[c];if(i.length>0){u=D(i[f]).clone(true,true)[0];u.removeAttribute("id");u.setAttribute("data-dt-row",e);u.setAttribute("data-dt-column",f);o.appendChild(u)}}y.appendChild(o)})}else{D(">tbody>tr",l.dom.body).each(function(t){u=this.cloneNode(true);u.className+=" DTFC_NoData";D("td",u).html("");y.appendChild(u)})}t.body.style.width="100%";t.body.style.margin="0";t.body.style.padding="0";if(C.oScroller!==F){var T=C.oScroller.dom.force;if(!e.forcer){e.forcer=T.cloneNode(true);e.liner.appendChild(e.forcer)}else{e.forcer.style.height=T.style.height}}e.liner.appendChild(t.body);this._fnEqualiseHeights("tbody",l.dom.body,t.body);if(C.nTFoot!==null){if(i){if(t.footer!==null){t.footer.parentNode.removeChild(t.footer)}t.footer=D(this.dom.footer).clone(true,true)[0];t.footer.className+=" DTFC_Cloned";t.footer.style.width="100%";e.foot.appendChild(t.footer);p=this._fnCopyLayout(C.aoFooter,r,true);var _=D(">tfoot",t.footer);_.empty();for(o=0,s=p.length;o<s;o++){_[0].appendChild(p[o].nTr)}C.oApi._fnDrawHead(C,p,true)}else{p=this._fnCopyLayout(C.aoFooter,r,false);var x=[];C.oApi._fnDetectHeader(x,D(">tfoot",t.footer)[0]);for(o=0,s=p.length;o<s;o++){for(n=0,d=p[o].length;n<d;n++){x[o][n].cell.className=p[o][n].cell.className}}}this._fnEqualiseHeights("tfoot",this.dom.footer,t.footer)}var w=C.oApi._fnGetUniqueThs(C,D(">thead",t.header)[0]);D(w).each(function(t){f=r[t];this.style.width=l.s.aiInnerWidths[f]+"px"});if(l.s.dt.nTFoot!==null){w=C.oApi._fnGetUniqueThs(C,D(">tfoot",t.footer)[0]);D(w).each(function(t){f=r[t];this.style.width=l.s.aiInnerWidths[f]+"px"})}},_fnGetTrNodes:function(t){var e=[];for(var i=0,o=t.childNodes.length;i<o;i++){if(t.childNodes[i].nodeName.toUpperCase()=="TR"){e.push(t.childNodes[i])}}return e},_fnEqualiseHeights:function(t,e,i){if(this.s.sHeightMatch=="none"&&t!=="thead"&&t!=="tfoot"){return}var o=this,r,l,s,n,d,a,h=e.getElementsByTagName(t)[0],f=i.getElementsByTagName(t)[0],u=D(">"+t+">tr:eq(0)",e).children(":first"),c=u.outerHeight()-u.height(),p=this._fnGetTrNodes(h),g=this._fnGetTrNodes(f),m=[];for(r=0,l=g.length;r<l;r++){d=p[r].offsetHeight;a=g[r].offsetHeight;s=a>d?a:d;if(this.s.sHeightMatch=="semiauto"){p[r]._DTTC_iHeight=s}m.push(s)}for(r=0,l=g.length;r<l;r++){g[r].style.height=m[r]+"px";p[r].style.height=m[r]+"px"}},_firefoxScrollError:function(){if(e===F){var t=D("<div></div>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");e=t[0].clientWidth===t[0].offsetWidth&&this._fnDTOverflow().bar!==0;t.remove()}return e}});c.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"};c.version="3.2.6";l.Api.register("fixedColumns()",function(){return this});l.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(t){if(t._oFixedColumns){t._oFixedColumns.fnUpdate()}})});l.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(t){if(t._oFixedColumns){t._oFixedColumns.fnRedrawLayout()}})});l.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(t,e){if(t._oFixedColumns){t._oFixedColumns.fnRecalculateHeight(this.row(e).node())}})});l.Api.register("fixedColumns().rowIndex()",function(t){t=D(t);return t.parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[t.index()]:this.row(t).index()});l.Api.register("fixedColumns().cellIndex()",function(t){t=D(t);if(t.parents(".DTFC_Cloned").length){var e=t.parent().index();var i=this.rows({page:"current"}).indexes()[e];var o;if(t.parents(".DTFC_LeftWrapper").length){o=t.index()}else{var r=this.columns().flatten().length;o=r-this.context[0]._oFixedColumns.s.iRightColumns+t.index()}return{row:i,column:this.column.index("toData",o),columnVisible:o}}else{return this.cell(t).index()}});D(u).on("init.dt.fixedColumns",function(t,e){if(t.namespace!=="dt"){return}var i=e.oInit.fixedColumns;var o=l.defaults.fixedColumns;if(i||o){var r=D.extend({},i,o);if(i!==false){new c(e,r)}}});D.fn.dataTable.FixedColumns=c;D.fn.DataTable.FixedColumns=c;return c});
// #END
