// JS-Script (UM): dataTables.fixedHeader.js @ 2022-09-20 09:51:00 +0000
(function(o){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(e){return o(e,window,document)})}else if(typeof exports==="object"){module.exports=function(e,t){if(!e){e=window}if(!t||!t.fn.dataTable){t=require("datatables.net")(e,t).$}return o(t,e,e.document)}}else{o(jQuery,window,document)}})(function(d,f,n,a){"use strict";var s=d.fn.dataTable;var i=0;var r=function(e,t){if(!(this instanceof r)){throw"FixedHeader must be initialised with the 'new' keyword."}if(t===true){t={}}e=new s.Api(e);this.c=d.extend(true,{},r.defaults,t);this.s={dt:e,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:d(f).height(),visible:true},headerMode:null,footerMode:null,autoWidth:e.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+i++,scrollLeft:{header:-1,footer:-1},enable:true};this.dom={floatingHeader:null,thead:d(e.table().header()),tbody:d(e.table().body()),tfoot:d(e.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}};this.dom.header.host=this.dom.thead.parent();this.dom.footer.host=this.dom.tfoot.parent();var o=e.settings()[0];if(o._fixedHeader){throw"FixedHeader already initialised on table "+o.nTable.id}o._fixedHeader=this;this._constructor()};d.extend(r.prototype,{enable:function(e){this.s.enable=e;if(this.c.header){this._modeChange("in-place","header",true)}if(this.c.footer&&this.dom.tfoot.length){this._modeChange("in-place","footer",true)}this.update()},headerOffset:function(e){if(e!==a){this.c.headerOffset=e;this.update()}return this.c.headerOffset},footerOffset:function(e){if(e!==a){this.c.footerOffset=e;this.update()}return this.c.footerOffset},update:function(){this._positions();this._scroll(true)},_constructor:function(){var e=this;var t=this.s.dt;d(f).on("scroll"+this.s.namespace,function(){e._scroll()}).on("resize"+this.s.namespace,s.util.throttle(function(){e.s.position.windowHeight=d(f).height();e.update()},50));var o=d(".fh-fixedHeader");if(!this.c.headerOffset&&o.length){this.c.headerOffset=o.outerHeight()}var i=d(".fh-fixedFooter");if(!this.c.footerOffset&&i.length){this.c.footerOffset=i.outerHeight()}t.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc",function(){e.update()});t.on("destroy.dtfc",function(){if(e.c.header){e._modeChange("in-place","header",true)}if(e.c.footer&&e.dom.tfoot.length){e._modeChange("in-place","footer",true)}t.off(".dtfc");d(f).off(e.s.namespace)});this._positions();this._scroll()},_clone:function(e,t){var o=this.s.dt;var i=this.dom[e];var f=e==="header"?this.dom.thead:this.dom.tfoot;if(!t&&i.floating){i.floating.removeClass("fixedHeader-floating fixedHeader-locked")}else{if(i.floating){i.placeholder.remove();this._unsize(e);i.floating.children().detach();i.floating.remove()}i.floating=d(o.table().node().cloneNode(false)).css("table-layout","fixed").attr("aria-hidden","true").removeAttr("id").append(f).appendTo("body");i.placeholder=f.clone(false);i.placeholder.find("*[id]").removeAttr("id");i.host.prepend(i.placeholder);this._matchWidths(i.placeholder,i.floating)}},_matchWidths:function(t,o){var e=function(e){return d(e,t).map(function(){return d(this).width()}).toArray()};var i=function(e,t){d(e,o).each(function(e){d(this).css({width:t[e],minWidth:t[e]})})};var f=e("th");var a=e("td");i("th",f);i("td",a)},_unsize:function(e){var t=this.dom[e].floating;if(t&&(e==="footer"||e==="header"&&!this.s.autoWidth)){d("th, td",t).css({width:"",minWidth:""})}else if(t&&e==="header"){d("th, td",t).css("min-width","")}},_horizontal:function(e,t){var o=this.dom[e];var i=this.s.position;var f=this.s.scrollLeft;if(o.floating&&f[e]!==t){o.floating.css("left",i.left-t);f[e]=t}},_modeChange:function(e,t,o){var i=this.s.dt;var f=this.dom[t];var a=this.s.position;var s=this.dom[t==="footer"?"tfoot":"thead"];var r=d.contains(s[0],n.activeElement)?n.activeElement:null;if(r){r.blur()}if(e==="in-place"){if(f.placeholder){f.placeholder.remove();f.placeholder=null}this._unsize(t);if(t==="header"){f.host.prepend(s)}else{f.host.append(s)}if(f.floating){f.floating.remove();f.floating=null}}else if(e==="in"){this._clone(t,o);f.floating.addClass("fixedHeader-floating").css(t==="header"?"top":"bottom",this.c[t+"Offset"]).css("left",a.left+"px").css("width",a.width+"px");if(t==="footer"){f.floating.css("top","")}}else if(e==="below"){this._clone(t,o);f.floating.addClass("fixedHeader-locked").css("top",a.tfootTop-a.theadHeight).css("left",a.left+"px").css("width",a.width+"px")}else if(e==="above"){this._clone(t,o);f.floating.addClass("fixedHeader-locked").css("top",a.tbodyTop).css("left",a.left+"px").css("width",a.width+"px")}if(r&&r!==n.activeElement){setTimeout(function(){r.focus()},10)}this.s.scrollLeft.header=-1;this.s.scrollLeft.footer=-1;this.s[t+"Mode"]=e},_positions:function(){var e=this.s.dt;var t=e.table();var o=this.s.position;var i=this.dom;var f=d(t.node());var a=f.children("thead");var s=f.children("tfoot");var r=i.tbody;o.visible=f.is(":visible");o.width=f.outerWidth();o.left=f.offset().left;o.theadTop=a.offset().top;o.tbodyTop=r.offset().top;o.theadHeight=o.tbodyTop-o.theadTop;if(s.length){o.tfootTop=s.offset().top;o.tfootBottom=o.tfootTop+s.outerHeight();o.tfootHeight=o.tfootBottom-o.tfootTop}else{o.tfootTop=o.tbodyTop+r.outerHeight();o.tfootBottom=o.tfootTop;o.tfootHeight=o.tfootTop}},_scroll:function(e){var t=d(n).scrollTop();var o=d(n).scrollLeft();var i=this.s.position;var f,a;if(!this.s.enable){return}if(this.c.header){if(!i.visible||t<=i.theadTop-this.c.headerOffset){f="in-place"}else if(t<=i.tfootTop-i.theadHeight-this.c.headerOffset){f="in"}else{f="below"}if(e||f!==this.s.headerMode){this._modeChange(f,"header",e)}this._horizontal("header",o)}if(this.c.footer&&this.dom.tfoot.length){if(!i.visible||t+i.windowHeight>=i.tfootBottom+this.c.footerOffset){a="in-place"}else if(i.windowHeight+t>i.tbodyTop+i.tfootHeight+this.c.footerOffset){a="in"}else{a="above"}if(e||a!==this.s.footerMode){this._modeChange(a,"footer",e)}this._horizontal("footer",o)}}});r.version="3.1.5";r.defaults={header:true,footer:false,headerOffset:0,footerOffset:0};d.fn.dataTable.FixedHeader=r;d.fn.DataTable.FixedHeader=r;d(n).on("init.dt.dtfh",function(e,t,o){if(e.namespace!=="dt"){return}var i=t.oInit.fixedHeader;var f=s.defaults.fixedHeader;if((i||f)&&!t._fixedHeader){var a=d.extend({},f,i);if(i!==false){new r(t,a)}}});s.Api.register("fixedHeader()",function(){});s.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(e){var t=e._fixedHeader;if(t){t.update()}})});s.Api.register("fixedHeader.enable()",function(o){return this.iterator("table",function(e){var t=e._fixedHeader;o=o!==a?o:true;if(t&&o!==t.s.enable){t.enable(o)}})});s.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(e){var t=e._fixedHeader;if(t&&t.s.enable){t.enable(false)}})});d.each(["header","footer"],function(e,i){s.Api.register("fixedHeader."+i+"Offset()",function(o){var e=this.context;if(o===a){return e.length&&e[0]._fixedHeader?e[0]._fixedHeader[i+"Offset"]():a}return this.iterator("table",function(e){var t=e._fixedHeader;if(t){t[i+"Offset"](o)}})})});return r});
// #END
