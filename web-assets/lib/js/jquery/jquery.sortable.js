// JS-Script (UM): jquery.sortable.js @ 2022-09-20 09:51:14 +0000
!function(p,t,o,h){var s={drag:true,drop:true,exclude:"",nested:true,vertical:true},r={afterMove:function(t,e,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(t,e){return true},onCancel:function(t,e,i,s){},onDrag:function(t,e,i,s){t.css(e)},onDragStart:function(t,e,i,s){t.css({height:t.outerHeight(),width:t.outerWidth()});t.addClass(e.group.options.draggedClass);p("body").addClass(e.group.options.bodyClass)},onDrop:function(t,e,i,s){t.removeClass(e.group.options.draggedClass).removeAttr("style");p("body").removeClass(e.group.options.bodyClass)},onMousedown:function(t,e,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i)){i.preventDefault();return true}},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:true,serialize:function(t,e,i){var s=p.extend({},t.data());if(i){return[e]}else if(e[0]){s.children=e}delete s.subContainers;delete s.sortable;return s},tolerance:0},e={},n=0,d={left:0,top:0,bottom:0,right:0},a={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},l="subContainers";function u(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),s=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+s}function i(t,e,i,s){var o=t.length,r=s?"offset":"position";i=i||0;while(o--){var n=t[o].el?t[o].el:p(t[o]);var a=n[r]();a.left+=parseInt(n.css("margin-left"),10);a.top+=parseInt(n.css("margin-top"),10);e[o]=[a.left-i,a.left+n.outerWidth()+i,a.top-i,a.top+n.outerHeight()+i]}}function f(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function c(t,e,i){e=[e.left,e.top];i=i&&[i.left,i.top];var s,o=t.length,r=[];while(o--){s=t[o];r[o]=[o,u(s,e),i&&u(s,i)]}r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]});return r}function g(t){this.options=p.extend({},r,t);this.containers=[];if(!this.options.rootGroup){this.scrollProxy=p.proxy(this.scroll,this);this.dragProxy=p.proxy(this.drag,this);this.dropProxy=p.proxy(this.drop,this);this.placeholder=p(this.options.placeholder);if(!t.isValidTarget){this.options.isValidTarget=h}}}g.get=function(t){if(!e[t.group]){if(t.group===h){t.group=n++}e[t.group]=new g(t)}return e[t.group]};g.prototype={dragInit:function(t,e){this.$document=p(e.el[0].ownerDocument);var i=p(t.target).closest(this.options.itemSelector);if(i.length){this.item=i;this.itemContainer=e;if(this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,r.onMousedown,t)){return}this.setPointer(t);this.toggleListeners("on");this.setupDelayTimer();this.dragInitDone=true}},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet){return}this.options.onDragStart(this.item,this.itemContainer,r.onDragStart,t);this.item.before(this.placeholder);this.dragging=true}this.setPointer(t);this.options.onDrag(this.item,f(this.pointer,this.item.offsetParent()),r.onDrag,t);var e=this.getPointer(t),i=this.sameResultBox,s=this.options.tolerance;if(!i||i.top-s>e.top||i.bottom+s<e.top||i.left-s>e.left||i.right+s<e.left){if(!this.searchValidTarget()){this.placeholder.detach();this.lastAppendedItem=h}}},drop:function(t){this.toggleListeners("off");this.dragInitDone=false;if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach()}else{this.options.onCancel(this.item,this.itemContainer,r.onCancel,t)}this.options.onDrop(this.item,this.getContainer(this.item),r.onDrop,t);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=h;this.dragging=false}},searchValidTarget:function(t,e){if(!t){t=this.relativePointer||this.pointer;e=this.lastRelativePointer||this.lastPointer}var i=c(this.getContainerDimensions(),t,e);var s=i.length;while(s--){var o=i[s][0];var r=i[s][1];if(!r||this.options.pullPlaceholder){var n=this.containers[o];if(!n.disabled){if(!this.$getOffsetParent()){var a=n.getItemOffsetParent();t=f(t,a);e=f(e,a)}if(n.searchValidTarget(t,e)){return true}}}}if(this.sameResultBox){this.sameResultBox=h}},movePlaceholder:function(t,e,i,s){var o=this.lastAppendedItem;if(!s&&o&&o[0]===e[0]){return}e[i](this.placeholder);this.lastAppendedItem=e;this.sameResultBox=s;this.options.afterMove(this.placeholder,t,e)},getContainerDimensions:function(){if(!this.containerDimensions){i(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent())}return this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(o)},$getOffsetParent:function(){if(this.offsetParent===h){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup){while(t--){if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=false;break}}}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=f(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=i}this.lastPointer=this.pointer;this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){var e=t.originalEvent||t.originalEvent.touches&&t.originalEvent.touches[0];return{left:t.pageX||e.pageX,top:t.pageY||e.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay;if(!this.delayMet){clearTimeout(this._mouseDelayTimer);this._mouseDelayTimer=setTimeout(function(){t.delayMet=true},this.options.delay)}},scroll:function(t){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(i){var s=this,t=["drag","drop","scroll"];p.each(t,function(t,e){s.$document[i](a[e],s[e+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=h},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);var e=this.containers.length;while(e--){this.containers[e].traverse(t)}},_clearDimensions:function(){this.containerDimensions=h},_destroy:function(){e[this.options.group]=h}};function m(t,e){this.el=t;this.options=p.extend({},s,e);this.group=g.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var i=this.rootGroup.options.itemPath;this.target=i?this.el.find(i):this.el;this.target.on(a.start,this.handle,p.proxy(this.dragInit,this));if(this.options.drop){this.group.containers.push(this)}}m.prototype={dragInit:function(t){var e=this.rootGroup;if(!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)){e.dragInit(t,this)}},isValidDrag:function(t){return t.which==1||t.type=="touchstart"&&t.originalEvent.touches.length==1},searchValidTarget:function(t,e){var i=c(this.getItemDimensions(),t,e),s=i.length,o=this.rootGroup,r=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!s&&r){o.movePlaceholder(this,this.target,"append");return true}else{while(s--){var n=i[s][0],a=i[s][1];if(!a&&this.hasChildGroup(n)){var h=this.getContainerGroup(n).searchValidTarget(t,e);if(h){return true}}else if(r){this.movePlaceholder(n,t);return true}}}},movePlaceholder:function(t,e){var i=p(this.items[t]),s=this.itemDimensions[t],o="after",r=i.outerWidth(),n=i.outerHeight(),a=i.offset(),h={left:a.left,right:a.left+r,top:a.top,bottom:a.top+n};if(this.options.vertical){var l=(s[2]+s[3])/2,u=e.top<=l;if(u){o="before";h.bottom-=n/2}else h.top+=n/2}else{var f=(s[0]+s[1])/2,c=e.left<=f;if(c){o="before";h.right-=r/2}else{h.left+=r/2}}if(this.hasChildGroup(t)){h=d}this.rootGroup.movePlaceholder(this,i,o,h)},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get();i(this.items,this.itemDimensions=[],this.options.tolerance)}return this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;if(e.css("position")==="relative"||e.css("position")==="absolute"||e.css("position")==="fixed"){t=e}else{t=e.offsetParent()}return t},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(t){var e=p.data(this.items[t],l);if(e===h){var i=this.$getChildren(this.items[t],"container");e=false;if(i[0]){var s=p.extend({},this.options,{rootGroup:this.rootGroup,group:n++});e=i[o](s).data(o).group}p.data(this.items[t],l,e)}return e},$getChildren:function(t,e){var i=this.rootGroup.options,s=i[e+"Path"],o=i[e+"Selector"];t=p(t);if(s){t=t.find(s)}return t.children(o)},_serialize:function(t,e){var i=this,s=e?"item":"container",o=this.$getChildren(t,s).not(this.options.exclude).map(function(){return i._serialize(p(this),!e)}).get();return this.rootGroup.options.serialize(t,o,e)},traverse:function(i){p.each(this.items||[],function(t){var e=p.data(this,l);if(e){e.traverse(i)}});i(this)},_clearDimensions:function(){this.itemDimensions=h},_destroy:function(){var e=this;this.target.off(a.start,this.handle);this.el.removeData(o);if(this.options.drop){this.group.containers=p.grep(this.group.containers,function(t){return t!=e})}p.each(this.items||[],function(){p.removeData(this,l)})}};var v={enable:function(){this.traverse(function(t){t.disabled=false})},disable:function(){this.traverse(function(t){t.disabled=true})},serialize:function(){return this._serialize(this.el,true)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};p.extend(m.prototype,v);p.fn[o]=function(i){var s=Array.prototype.slice.call(arguments,1);return this.map(function(){var t=p(this),e=t.data(o);if(e&&v[i]){return v[i].apply(e,s)||this}else if(!e&&(i===h||typeof i==="object")){t.data(o,new m(t,i))}return this})}}(jQuery,window,"sortable");
// #END
