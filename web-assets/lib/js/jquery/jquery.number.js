// JS-Script (UM): jquery.number.js @ 2022-09-20 09:51:12 +0000
(function(v){"use strict";function d(e,t){if(this.createTextRange){var i=this.createTextRange();i.collapse(true);i.moveStart("character",e);i.moveEnd("character",t-e);i.select()}else if(this.setSelectionRange){this.focus();this.setSelectionRange(e,t)}}function p(e){var t=this.value.length;e=e.toLowerCase()=="start"?"Start":"End";if(document.selection){var i=document.selection.createRange(),a,n,l;a=i.duplicate();a.expand("textedit");a.setEndPoint("EndToEnd",i);n=a.text.length-i.text.length;l=n+i.text.length;return e=="Start"?n:l}else if(typeof this["selection"+e]!="undefined"){t=this["selection"+e]}return t}var g={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};v.fn.number=function(e,c,o,f){f=typeof f==="undefined"?",":f;o=typeof o==="undefined"?".":o;c=typeof c==="undefined"?0:c;var t="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),i=new RegExp("[^"+t+"0-9]","g"),a=new RegExp(t,"g");if(e===true){if(this.is("input:text")){return this.on({"keydown.format":function(e){var t=v(this),i=t.data("numFormat"),a=e.keyCode?e.keyCode:e.which,n="",l=p.apply(this,["start"]),s=p.apply(this,["end"]),r="",u=false;if(g.codes.hasOwnProperty(a)){a=g.codes[a]}if(!e.shiftKey&&(a>=65&&a<=90)){a+=32}else if(!e.shiftKey&&(a>=69&&a<=105)){a-=48}else if(e.shiftKey&&g.shifts.hasOwnProperty(a)){n=g.shifts[a]}if(n=="")n=String.fromCharCode(a);if(a!=8&&a!=45&&a!=127&&n!=o&&!n.match(/[0-9]/)){var h=e.keyCode?e.keyCode:e.which;if(h==46||h==8||h==127||h==9||h==27||h==13||(h==65||h==82||h==80||h==83||h==70||h==72||h==66||h==74||h==84||h==90||h==61||h==173||h==48)&&(e.ctrlKey||e.metaKey)===true||(h==86||h==67||h==88)&&(e.ctrlKey||e.metaKey)===true||h>=35&&h<=39||h>=112&&h<=123){return}e.preventDefault();return false}if(l==0&&s==this.value.length){if(a==8){l=s=1;this.value="";i.init=c>0?-1:0;i.c=c>0?-(c+1):0;d.apply(this,[0,0])}else if(n==o){l=s=1;this.value="0"+o+new Array(c+1).join("0");i.init=c>0?1:0;i.c=c>0?-(c+1):0}else if(a==45){l=s=2;this.value="-0"+o+new Array(c+1).join("0");i.init=c>0?1:0;i.c=c>0?-(c+1):0;d.apply(this,[2,2])}else{i.init=c>0?-1:0;i.c=c>0?-c:0}}else{i.c=s-this.value.length}i.isPartialSelection=l==s?false:true;if(c>0&&n==o&&l==this.value.length-c-1){i.c++;i.init=Math.max(0,i.init);e.preventDefault();u=this.value.length+i.c}else if(a==45&&(l!=0||this.value.indexOf("-")==0)){e.preventDefault()}else if(n==o){i.init=Math.max(0,i.init);e.preventDefault()}else if(c>0&&a==127&&l==this.value.length-c-1){e.preventDefault()}else if(c>0&&a==8&&l==this.value.length-c){e.preventDefault();i.c--;u=this.value.length+i.c}else if(c>0&&a==127&&l>this.value.length-c-1){if(this.value==="")return;if(this.value.slice(l,l+1)!="0"){r=this.value.slice(0,l)+"0"+this.value.slice(l+1);t.val(r)}e.preventDefault();u=this.value.length+i.c}else if(c>0&&a==8&&l>this.value.length-c){if(this.value==="")return;if(this.value.slice(l-1,l)!="0"){r=this.value.slice(0,l-1)+"0"+this.value.slice(l);t.val(r)}e.preventDefault();i.c--;u=this.value.length+i.c}else if(a==127&&this.value.slice(l,l+1)==f){e.preventDefault()}else if(a==8&&this.value.slice(l-1,l)==f){e.preventDefault();i.c--;u=this.value.length+i.c}else if(c>0&&l==s&&this.value.length>c+1&&l>this.value.length-c-1&&isFinite(+n)&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&n.length===1){if(s===this.value.length){r=this.value.slice(0,l-1)}else{r=this.value.slice(0,l)+this.value.slice(l+1)}this.value=r;u=l}if(u!==false){d.apply(this,[u,u])}t.data("numFormat",i)},"keyup.format":function(e){var t=v(this),i=t.data("numFormat"),a=e.keyCode?e.keyCode:e.which,n=p.apply(this,["start"]),l=p.apply(this,["end"]),s;if(n===0&&l===0&&(a===189||a===109)){t.val("-"+t.val());n=1;i.c=1-this.value.length;i.init=1;t.data("numFormat",i);s=this.value.length+i.c;d.apply(this,[s,s])}if(this.value===""||(a<48||a>57)&&(a<96||a>105)&&a!==8&&a!==46&&a!==110)return;t.val(t.val());if(c>0){if(i.init<1){n=this.value.length-c-(i.init<0?1:0);i.c=n-this.value.length;i.init=1;t.data("numFormat",i)}else if(n>this.value.length-c&&a!=8){i.c++;t.data("numFormat",i)}}if(a==46&&!i.isPartialSelection){i.c++;t.data("numFormat",i)}s=this.value.length+i.c;d.apply(this,[s,s])},"paste.format":function(e){var t=v(this),i=e.originalEvent,a=null;if(window.clipboardData&&window.clipboardData.getData){a=window.clipboardData.getData("Text")}else if(i.clipboardData&&i.clipboardData.getData){a=i.clipboardData.getData("text/plain")}t.val(a);e.preventDefault();return false}}).each(function(){var e=v(this).data("numFormat",{c:-(c+1),decimals:c,thousands_sep:f,dec_point:o,regex_dec_num:i,regex_dec:a,init:this.value.indexOf(".")?true:false});if(this.value==="")return;e.val(e.val())})}else{return this.each(function(){var e=v(this),t=+e.text().replace(i,"").replace(a,".");e.number(!isFinite(t)?0:+t,c,o,f)})}}return this.text(v.number.apply(window,arguments))};var l=null,s=null;if(v.isPlainObject(v.valHooks.text)){if(v.isFunction(v.valHooks.text.get))l=v.valHooks.text.get;if(v.isFunction(v.valHooks.text.set))s=v.valHooks.text.set}else{v.valHooks.text={}}v.valHooks.text.get=function(e){var t=v(e),i,a,n=t.data("numFormat");if(!n){if(v.isFunction(l)){return l(e)}else{return undefined}}else{if(e.value==="")return"";i=+e.value.replace(n.regex_dec_num,"").replace(n.regex_dec,".");return(e.value.indexOf("-")===0?"-":"")+(isFinite(i)?i:0)}};v.valHooks.text.set=function(e,t){var i=v(e),a=i.data("numFormat");if(!a){if(v.isFunction(s)){return s(e,t)}else{return undefined}}else{var n=v.number(t,a.decimals,a.dec_point,a.thousands_sep);return v.isFunction(s)?s(e,n):e.value=n}};v.number=function(e,t,i,a){a=typeof a==="undefined"?new Number(1e3).toLocaleString()!=="1000"?new Number(1e3).toLocaleString().charAt(1):"":a;i=typeof i==="undefined"?new Number(.1).toLocaleString().charAt(1):i;t=!isFinite(+t)?0:Math.abs(t);var n="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);var l="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",i).replace(new RegExp(l,"g"),"").replace(new RegExp(n,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var s=!isFinite(+e)?0:+e,r="",u=function(e,t){return""+ +(Math.round((""+e).indexOf("e")>0?e:e+"e+"+t)+"e-"+t)};r=(t?u(s,t):""+Math.round(s)).split(".");if(r[0].length>3){r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)}if((r[1]||"").length<t){r[1]=r[1]||"";r[1]+=new Array(t-r[1].length+1).join("0")}return r.join(i)}})(jQuery);
// #END
