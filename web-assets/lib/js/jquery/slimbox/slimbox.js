// JS-Script (UM): slimbox.js @ 2022-09-20 09:51:07 +0000
(function(h){var p=h(window),f,u,v=-1,y,e,t,n,a,g,b,o=[],i=document.documentElement;var m={},l,x,M,w,k,I,D,r,T,z;h(function(){h("body").append(h([l=h('<div id="lbOverlay"></div>').click(E)[0],x=h('<div id="lbCenter"></div>')[0],D=h('<div id="lbBottomContainer"></div>')[0]]).css({display:"none"}));M=h('<div id="lbImage"></div>').appendTo(x).append(w=h('<div style="position: relative;"></div>').append([k=h('<a id="lbPrevLink" href="#"></a>').click(L)[0],I=h('<a id="lbNextLink" href="#"></a>').click(H)[0]])[0])[0];r=h('<div id="lbBottom"></div>').appendTo(D).append([h('<a id="lbCloseLink" href="#"></a>').click(E)[0],T=h('<div id="lbCaption"></div>')[0],z=h('<div id="lbNumber"></div>')[0],h('<div style="clear: both;"></div>')[0]])[0]});h.slimbox=function(i,e,t){f=h.extend({loop:false,overlayOpacity:.75,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"# {x} / {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},t);if(typeof i=="string"){i=[[i,e]];e=0}a=p.scrollTop()+p.height()/2;g=f.initialWidth;b=f.initialHeight;h(x).css({top:Math.ceil(Math.max(0,a-b/2))+"px",width:Math.ceil(g)+"px",height:Math.ceil(b)+"px",marginLeft:Math.ceil(-1*g/2)+"px"}).show();n=l.currentStyle&&l.currentStyle.position!="fixed";if(n){l.style.position="absolute"}h(l).css({opacity:f.overlayOpacity}).fadeIn(f.overlayFadeDuration);s();c(1);u=i;f.loop=f.loop&&u.length>1;return K(e)};h.fn.slimbox=function(o,l,r){l=l||function(i){return[i.href,i.title]};r=r||function(){return true};var s=this;return s.unbind("click").click(function(){var t=this,i=0,e,n=0,a;e=h.grep(s,function(i,e){return r.call(t,i,e)});for(a=e.length;n<a;++n){if(e[n]==t)i=n;e[n]=l(e[n],n)}return h.slimbox(e,i,o)})};function s(){var i=p.scrollLeft(),e=p.width();h([x,D]).css({left:Math.ceil(i+e/2)+"px"});if(n){h(l).css({left:Math.ceil(i)+"px",top:Math.ceil(p.scrollTop())+"px",width:Math.ceil(e)+"px",height:Math.ceil(p.height())+"px"})}}function c(i){if(i){h("object").add("embed").each(function(i,e){o[i]=[e,e.style.visibility];e.style.visibility="hidden"})}else{h.each(o,function(i,e){e[0].style.visibility=e[1]});o=[]}var e=i?"bind":"unbind";p[e]("scroll resize",s);h(document)[e]("keydown",d)}function d(i){var e=i.keyCode,t=h.inArray;return t(e,f.closeKeys)>=0?E():t(e,f.nextKeys)>=0?H():t(e,f.previousKeys)>=0?L():false}function L(){return K(e)}function H(){return K(t)}function K(i){if(i>=0){v=i;y=u[v][0];e=(v||(f.loop?u.length:0))-1;t=(v+1)%u.length||(f.loop?0:-1);W();x.className="lbLoading";m=new Image;m.onload=C;m.src=y}return false}function C(){var i=20;var e=20;var t=parseInt(m.width);var n=parseInt(m.height);if(t<=0){console.warn("Slideshow: Invalid Image Width !");t=800}if(n<=0){console.warn("Slideshow: Invalid Image Height !");n=800}var a=1;var o=p.height()-e-75;if(n>0&&n>o){a=o/n;n=Math.ceil(o);t=Math.ceil(t*a)}n=Math.ceil(n);var l=p.width()-i-5;if(t>0&&t>l){a=l/t;t=Math.ceil(l);n=Math.ceil(n*a)}t=Math.ceil(t);x.className="";h(M).css({"background-image":"url("+y+")","background-size":t+"px "+n+"px","background-repeat":"no-repeat","background-position":"center",visibility:"hidden",display:""});var r=t;if(r<250){r=250}var s=n;if(s<100){s=100}h(w).width(r);h([w,k,I]).height(s);h(T).html(u[v][1]||"");h(z).html((u.length>1&&f.counterText||"").replace(/{x}/,v+1).replace(/{y}/,u.length));g=parseInt(M.offsetWidth);b=parseInt(M.offsetHeight);var c=parseInt(p.scrollTop());var d=Math.ceil(c+10);if(x.offsetHeight!=b){h(x).animate({height:b,top:d},f.resizeDuration,f.resizeEasing)}if(x.offsetWidth!=g){h(x).animate({width:g,marginLeft:Math.ceil(-1*g/2)},f.resizeDuration,f.resizeEasing)}h(x).queue(function(){h(D).css({width:Math.ceil(g)+"px",top:Math.ceil(d+b)+"px",marginLeft:Math.ceil(-1*g/2)+"px",visibility:"hidden",display:""});h(M).css({display:"none",visibility:"",opacity:""}).fadeIn(f.imageFadeDuration,F)})}function F(){if(e>=0)h(k).show();if(t>=0)h(I).show();h(r).css({marginTop:Math.ceil(-1*r.offsetHeight)+"px"}).animate({marginTop:0},f.captionAnimationDuration);D.style.visibility=""}function W(){m.onload=null;m.src=y;h([x,M,r]).stop(true);h([k,I,M,D]).hide()}function E(){if(v>=0){W();v=e=t=-1;h(x).hide();h(l).stop().fadeOut(f.overlayFadeDuration,c)}return false}})(jQuery);
// #END
