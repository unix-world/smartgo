// JS-Script (US): jquery.tagedit.js @ 2022-10-19 22:05:28 +0000
(function(jQuery){jQuery.fn.tagEdit=function(options){var defaults={items:[],separator:",",tagMaxChars:20,tagMaxNum:10,tagNamePattern:/^[A-Za-z0-9\- ]+$/g,tagCssClass:"tagEdit",tagRemoveText:"Remove this Tag",readOnly:false};options=jQuery.extend(defaults,options);var itemDataList,itemDataText=this,itemDataHiddenFld;var itemDataArr=[];var itemDataObj={};var maxTagLen=Math.floor(options.tagMaxChars)>=1&&Math.floor(options.tagMaxChars)<=255?Math.floor(options.tagMaxChars):10;var maxTagNum=Math.floor(options.tagMaxNum)>=1&&Math.floor(options.tagMaxNum)<=1024?Math.floor(options.tagMaxNum):5;return this.each(function(){function addTag(tag){try{new RegExp(options.tagNamePattern)}catch(e){console.error("jQuery TagEdit: Invalid Regex: "+options.tagNamePattern);return false}tag=String(jQuery.trim(tag));if(tag.length<=0){return false}if(tag.length>maxTagLen){return false}if(!tag.match(options.tagNamePattern)){return false}var objLen=0;for(var obj in itemDataObj){if(itemDataObj[obj]===true){objLen++}}if(objLen>=maxTagNum){return false}if(typeof itemDataObj[tag]=="undefined"){itemDataObj[tag]=false}if(itemDataObj[tag]===true){return false}var item=jQuery("<li></li>");if(options.readOnly!==true){item.attr("class",options.tagCssClass)}item.text(tag);if(options.readOnly!==true){item.attr("title",String(options.tagRemoveText));item.click(function(){var txt=jQuery.trim(jQuery(this).text());if(txt!=""){itemDataObj[txt]=false}jQuery(this).remove();dataParse()})}itemDataList.append(item);itemDataObj[tag]=true;return true}function dataStructBuild(){itemDataArr=[];var items=jQuery("li",itemDataList);for(var i=0;i<items.length;i++){itemDataArr.push(jQuery.trim(jQuery(items[i]).text()))}if(options.readOnly!==true){itemDataHiddenFld.val(itemDataArr.join(options.separator))}}function dataParse(){var items=itemDataText.val().split(options.separator);for(var i=0;i<items.length;i++){addTag(String(jQuery.trim(items[i])))}itemDataText.val("");dataStructBuild()}function keyEvtHandler(ev){var keyCode=ev.which?ev.which:ev.keyCode;switch(keyCode){case 13:var theVal=jQuery.trim(itemDataText.val());if(theVal==""){return true}dataParse();return false;break;default:}return true}jQuery.fn.extend({tagEditTagsGet:function(){return itemDataArr.join(options.separator)},tagEditTagAdd:function(tag){return addTag(tag)}});itemDataText.after('<div style="clear:both;"></div>');if(options.readOnly!==true){itemDataHiddenFld=jQuery('<input type="hidden">');itemDataHiddenFld.attr("name",itemDataText.attr("name"));itemDataText.attr("name","");itemDataText.attr("maxlength",maxTagLen);itemDataText.after(itemDataHiddenFld)}itemDataList=jQuery(document.createElement("ul"));itemDataList.attr("class",options.tagCssClass);jQuery(this).after(itemDataList);for(var i=0;i<options.items.length;i++){addTag(jQuery.trim(options.items[i]))}if(options.readOnly!==true){dataParse();jQuery(this).keypress(keyEvtHandler)}})}})(jQuery);
// #END
