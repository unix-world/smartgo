// JS-Script (US): jquery.unveil.js @ 2022-10-19 22:05:33 +0000
(function($){$.fn.unveil=function(options,callback){var defaults={threshold:0,attribute:"data-src",allowtags:{img:"src","picture.source":"srcset",iframe:"src"}};options=$.extend({},defaults,options);var $w=$(window);var th=Math.ceil(options.threshold>0?options.threshold:0)||0;var dataDefAttr="data-src";var dataAttr=String(dataDefAttr);if(options.attribute){options.attribute=String(options.attribute||"");if(options.attribute.indexOf("data-")===0){dataAttr=String(options.attribute)}}var allowTags={};if(options.allowtags&&$.isPlainObject(options.allowtags)){allowTags=options.allowtags}var objects=this;var loaded;this.one("unveil",function(){if($(this).attr("data-unveil")=="#unveiled!"){return}var source=$(this).attr(String(dataAttr));if(!source){return}source=String(source||"");if(source==""||source.indexOf("#unveil!")==0){return}var theParentTag=String($(this).parent().prop("tagName")||"").toLowerCase();var theTag=String($(this).prop("tagName")||"").toLowerCase();var isKeyValid,isParentValid,isValValid,isTagValid;var theElSrc,theUnveilDataAttr,theObjKey,theObjVal,theObjParent,theOriginalKey;var regexKey=/^[a-z\.]+$/;var regexVal=/^[a-z]+$/;if(allowTags&&$.isPlainObject(allowTags)){for(theObjKey in allowTags){isKeyValid=false;isParentValid=false;isValValid=false;isTagValid=false;theOriginalKey="";theObjVal="";theObjParent="";theObjKey=String(theObjKey||"").toLowerCase();theOriginalKey=theObjKey;if(theObjKey&&regexKey.test(theObjKey)){if(theObjKey.indexOf(".")!==-1){theObjParent=theObjKey.split(".");if(theObjParent.length==2){theObjKey=String(theObjParent[1]||"");theObjParent=String(theObjParent[0]||"");if(theObjParent&&theObjParent.length>=1&&theObjParent.length<=16&&regexVal.test(theObjParent)){isParentValid=true}}}else{isParentValid=true}if(isParentValid){if(theObjKey&&theObjKey.length>=1&&theObjKey.length<=16&&regexVal.test(theObjKey)){isKeyValid=true}if(isKeyValid){theObjVal=String(allowTags[String(theObjParent?String(String(theObjParent)+"."):"")+String(theObjKey)]||"").toLowerCase();if(theObjVal&&theObjVal.length>=1&&theObjVal.length<=16&&regexVal.test(theObjVal)){isValValid=true}}}}if(!isParentValid||!isValValid||!isValValid){console.error("Unveil # INVALID setting for option.allowtags @ Key: `"+String(theOriginalKey)+"` with Value: `"+String(theObjVal)+"`")}else{if(theObjKey==theTag){if(theObjParent){if(theObjParent==theParentTag){isTagValid=true}}else{isTagValid=true}}if(isTagValid){$(this).attr(theObjVal,String(source)).attr(dataAttr,"#unveil!"+theOriginalKey+":"+theObjVal).attr("data-unveil","#unveiled!");if(typeof callback==="function"){callback.call(this)}}}}}});function unveil(){var inview=objects.filter(function(){var $e=$(this);if($e.is(":hidden")){return false}var wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();var shouldLoad=eb>=wt-th&&et<=wb+th;return shouldLoad});loaded=inview.trigger("unveil");objects=objects.not(loaded)}unveil();$w.on("scroll.unveil resize.unveil lookup.unveil",function(){unveil()});return this}})(window.jQuery);
// #END
