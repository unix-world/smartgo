// JS-Script (UM): jRate.js @ 2022-09-20 09:51:06 +0000
(function(S,t){S.fn.jRate=function(t){"use strict";var s=S(this);var r={rating:0,shape:"STAR",count:5,width:"20",height:"20",widthGrowth:0,heightGrowth:0,backgroundColor:"white",startColor:"yellow",endColor:"green",strokeColor:"black",transparency:1,shapeGap:"0px",opacity:1,min:0,max:5,precision:.1,minSelected:0,strokeWidth:"2px",horizontal:true,reverse:false,readOnly:false,touch:true,onChange:null,onSet:null};var d=S.extend({},r,t);var i,f,l;function c(t){return typeof t!=="undefined"}function e(){if(c(d))return d.rating}function n(t){if(!c(t)||t<d.min||t>d.max)throw t+" is not in range("+min+","+max+")";d.rating=t;g(t)}function o(t){var r='<svg width="'+d.width+'" height='+d.height+' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ';var e=d.horizontal;var n=s.attr("id");var o='<defs><linearGradient id="'+n+"_grad"+t+'" x1="0%" y1="0%" x2="'+(e?100:0)+'%" y2="'+(e?0:100)+'%">'+'<stop offset="0%"  stop-color='+d.backgroundColor+"></stop>"+'<stop offset="0%" stop-color='+d.backgroundColor+"></stop>"+"</linearGradient></defs>";var a;switch(d["shape"]){case"STAR":a=r+'viewBox="0 12.705 512 486.59"'+">"+o+'<polygon style="fill: url(#'+n+"_grad"+t+");stroke:"+d.strokeColor+";fill-opacity:"+ +d.transparency+";stroke-width:"+d.strokeWidth+'; "points="256.814,12.705 317.205,198.566'+" 512.631,198.566 354.529,313.435 "+"414.918,499.295 256.814,384.427 "+"98.713,499.295 159.102,313.435 "+'1,198.566 196.426,198.566 "/>'+"</svg>";break;case"RECTANGLE":a=r+">"+o+'<rect width="'+d.width+'" height="'+d.height+'" fill="url(#'+n+"_grad"+t+')" style="stroke:'+d.strokeColor+";fill-opacity:"+ +d.transparency+";stroke-width:"+d.strokeWidth+';"/>'+"</svg>";break;default:throw Error("No such shape as "+d["shape"])}return a}function a(){s.css("white-space","nowrap");if(!d.readOnly){s.css("cursor","pointer")}else{s.css("cursor","help")}s.css("fill",d["shape"])}function h(t,r){t.on("mousemove",k(r)).on("mouseenter",k(r)).on("click",x(r)).on("mouseover",k(r)).on("hover",k(r)).on("mouseleave",v).on("mouseout",v).on("JRate.change",b).on("JRate.set",R);if(d.touch){t.on("touchstart",C(r)).on("touchmove",C(r)).on("touchend",_(r)).on("tap",_(r))}}function u(){var t=s.attr("id");for(var r=0;r<d.count;r++){l.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(0).attr({offset:"0%"});l.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(0).attr({"stop-color":d.backgroundColor});l.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(1).attr({offset:"0%"});l.eq(r).find("#"+t+"_grad"+(r+1)).find("stop").eq(1).attr({"stop-color":d.backgroundColor})}}function g(t){u();var r=(d.max-d.min)/d.count;t=(t-d.min)/r;var e=d.startColor;var n=s.attr("id");if(d.reverse){for(var o=0;o<t;o++){var a=d.count-1-o;l.eq(a).find("#"+n+"_grad"+(a+1)).find("stop").eq(0).attr({offset:"100%"});l.eq(a).find("#"+n+"_grad"+(a+1)).find("stop").eq(0).attr({"stop-color":e});if(parseInt(t)!==t){var i=Math.ceil(d.count-t)-1;l.eq(i).find("#"+n+"_grad"+(i+1)).find("stop").eq(0).attr({offset:100-t*10%10*10+"%"});l.eq(i).find("#"+n+"_grad"+(i+1)).find("stop").eq(0).attr({"stop-color":d.backgroundColor});l.eq(i).find("#"+n+"_grad"+(i+1)).find("stop").eq(1).attr({offset:100-t*10%10*10+"%"});l.eq(i).find("#"+n+"_grad"+(i+1)).find("stop").eq(1).attr({"stop-color":e})}if(c(f)){e=p(d.count-1,o)}}}else{for(var o=0;o<t;o++){l.eq(o).find("#"+n+"_grad"+(o+1)).find("stop").eq(0).attr({offset:"100%"});l.eq(o).find("#"+n+"_grad"+(o+1)).find("stop").eq(0).attr({"stop-color":e});if(t*10%10>0){l.eq(Math.ceil(t)-1).find("#"+n+"_grad"+(o+1)).find("stop").eq(0).attr({offset:t*10%10*10+"%"});l.eq(Math.ceil(t)-1).find("#"+n+"_grad"+(o+1)).find("stop").eq(0).attr({"stop-color":e})}if(c(f)){e=p(d.count,o)}}}}var p=function(t,r){var e=[];for(var n=0;n<3;n++){var o=Math.round((i[n]-f[n])/t);var a=i[n]+o*(r+1);if(a/256)e[n]=(i[n]-o*(r+1))%256;else e[n]=(i[n]+o*(r+1))%256}return"rgba("+e[0]+","+e[1]+","+e[2]+","+d.opacity+")"};function m(t){var r,e;r=document.createElement("canvas");r.height=1;r.width=1;e=r.getContext("2d");e.fillStyle=t;e.fillRect(0,0,1,1);return e.getImageData(0,0,1,1).data}function v(){if(!d.readOnly){g(d.rating);b(null,{rating:d.rating})}}function w(t){var r=1/d.precision;return Math.ceil(t*r)/r}function q(t,r,e,n){if(d.readOnly)return;var o=l.eq(r-1);var a;if(d.horizontal){a=(t.pageX-o.offset().left)/o.width()}else{a=(t.pageY-o.offset().top)/o.height()}var i=(d.max-d.min)/d.count;a=d.reverse?a:1-a;var s=((d.reverse?d.max-d.min-r+1:r)-a)*i;s=d.min+Number(w(s));if(s<d.minSelected)s=d.minSelected;if(s<=d.max&&s>=d.min){g(s);if(n)d.rating=s;o.trigger(e,{rating:s})}}function y(t,r,e,n){if(d.readOnly)return;var o=t.originalEvent.changedTouches;if(o.length>1)return;var a=o[0];var i=l.eq(r-1);var s;if(d.horizontal){s=(a.pageX-i.offset().left)/i.width()}else{s=(a.pageY-i.offset().top)/i.height()}var f=(d.max-d.min)/d.count;s=d.reverse?s:1-s;var c=((d.reverse?d.max-d.min-r+1:r)-s)*f;c=d.min+Number(w(c));if(c<d.minSelected)c=d.minSelected;if(c<=d.max&&c>=d.min){g(c);if(n)d.rating=c;i.trigger(e,{rating:c})}}function k(r){return function(t){q(t,r,"JRate.change")}}function x(r){return function(t){q(t,r,"JRate.set",true)}}function C(r){return function(t){y(t,r,"JRate.touch")}}function _(r){return function(t){y(t,r,"JRate.tap",true)}}function b(t,r){if(d.onChange&&typeof d.onChange==="function"){d.onChange.apply(this,[r.rating])}}function R(t,r){if(d.onSet&&typeof d.onSet==="function"){d.onSet.apply(this,[r.rating])}}function G(){var t,r,e,n;for(r=0;r<d.count;r++){s.append(o(r+1))}l=s.find("svg");for(r=0;r<d.count;r++){t=l.eq(r);h(t,r+1);if(!d.horizontal){t.css({display:"block","margin-bottom":d.shapeGap||"0px"})}else{t.css("margin-right",d.shapeGap||"0px")}if(d.widthGrowth){e="scaleX("+(1+d.widthGrowth*r)+")";t.css({transform:e,"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e})}if(d.heightGrowth){n="scaleY("+(1+d.heightGrowth*r)+")";t.css({transform:n,"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,"-o-transform":n})}}u();g(d.rating);l.attr({width:d.width,height:d.height})}if(d.startColor)i=m(d.startColor);if(d.endColor)f=m(d.endColor);a();G();return S.extend({},this,{getRating:e,setRating:n,setReadOnly:function(t){d.readOnly=t},isReadOnly:function(){return d.readOnly}})}})(jQuery);
// #END
