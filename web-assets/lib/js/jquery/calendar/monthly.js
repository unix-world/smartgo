// JS-Script (UM): monthly.js @ 2022-09-20 09:50:58 +0000
(function(O){"use strict";O.fn.extend({monthly:function(t){var e={dataType:"json",jsonUrl:"",xmlUrl:"",disablePast:false,eventList:true,events:"",linkCalendarToEventUrl:false,maxWidth:false,mode:"event",setWidth:false,showTrigger:"",startHidden:false,stylePast:false,target:"",useIsoDateFormat:true,weekStart:0};var N=O.extend(e,t),p=O(this).attr("id"),A="#"+p,a=new Date,g=a.getMonth()+1,w=a.getFullYear(),b=a.getDate(),r=c().toLowerCase(),o=N.monthNameFormat||"short",l=N.weekdayNameFormat||"short",k=N.monthNames||h(),D=N.dayNames||v(),T='<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>',S=N.weekStart==="Mon"||N.weekStart===1||N.weekStart==="1",n=r.substring(0,2).toLowerCase();if(N.maxWidth!==false){O(A).css("maxWidth",N.maxWidth)}if(N.setWidth!==false){O(A).css("width",N.setWidth)}if(N.startHidden){O(A).addClass("monthly-pop").css({display:"none",position:"absolute"});O(document).on("focus",String(N.showTrigger),function(t){O(A).show();t.preventDefault()});O(document).on("click",String(N.showTrigger)+", .monthly-pop",function(t){t.stopPropagation();t.preventDefault()});O(document).on("click",function(){O(A).hide()})}m(S);O(A).addClass("monthly-locale-"+n+" monthly-locale-"+r);O(A).prepend('<div class="monthly-header"><div class="monthly-header-title"><a href="#" class="monthly-header-title-date" onclick="return false"></a></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>');i(g,w);function E(t,e){return t===2?e&3||!(e%25)&&e&15?28:29:30+(t+(t>>3)&1)}function i(t,e){O(A).data("setMonth",t).data("setYear",e);var a=0,n=E(t,e),r=t-1,o=new Date(e,r,1,0,0,0,0).getDay(),l=t===g&&e===w;O(A+" .monthly-day, "+A+" .monthly-day-blank").remove();O(A+" .monthly-event-list, "+A+" .monthly-day-wrap").empty();for(var i=1;i<=n;i++){var s=N.stylePast&&(e<w||e===w&&(t<g||t===g&&i<b)),d='<div class="monthly-day-number">'+i+'</div><div class="monthly-indicator-wrap"></div>';if(N.mode==="event"){var m=new Date(e,r,i,0,0,0,0);O(A+" .monthly-day-wrap").append("<div"+H("class","m-d monthly-day monthly-day-event"+(s?" monthly-past-day":"")+" dt"+I(m))+H("data-number",i)+">"+d+"</div>");O(A+" .monthly-event-list").append("<div"+H("class","monthly-list-item")+H("id",p+"day"+i)+H("data-number",i)+'><div class="monthly-event-list-date">'+D[m.getDay()]+"<br>"+i+"</div></div>")}else{O(A+" .monthly-day-wrap").append("<a"+H("href","#")+H("class","m-d monthly-day monthly-day-pick"+(s?" monthly-past-day":""))+H("data-number",i)+">"+d+"</a>")}}if(l){O(A+' *[data-number="'+b+'"]').addClass("monthly-today")}O(A+" .monthly-header-title").html('<a href="#" class="monthly-header-title-date" onclick="return false">'+k[t-1]+" "+e+"</a>"+(l?"":'<a href="#" class="monthly-reset"></a>'));if(S){if(o===0){M(6)}else if(o!==1){M(o-1)}}else if(o!==7){M(o)}var c=O(A+" .monthly-day").length,h=O(A+" .monthly-day-blank").length,f=c+h,v=Math.ceil(f/7)*7,y=v-f;if(f%7!==0){for(a=0;a<y;a++){O(A+" .monthly-day-wrap").append(T)}}if(N.mode==="event"){x(t,e)}var u=O(A+" .m-d");for(a=0;a<u.length;a+=7){u.slice(a,a+7).wrapAll('<div class="monthly-week"></div>')}}function s(t,e,a){var n=J(t,"startdate"),r=J(t,"enddate"),o=n.split("-"),l=parseInt(o[0],10),i=parseInt(o[1],10),s=parseInt(o[2],10),d=s,m=s,c=s,h=i===e&&l===a,f=h;if(r){var v=r.split("-"),y=parseInt(v[0],10),u=parseInt(v[1],10),p=parseInt(v[2],10),g=l<a||i<e&&l===a,w=u===e&&y===a,b=y>a||u>e&&y===a;if(h||w||g&&b){f=true;d=h?s:1;m=w?p:E(e,a);c=h?d:1}}if(!f){return}var k=J(t,"starttime"),D="",T=J(t,"url"),S=J(t,"name"),x=J(t,"class"),I=J(t,"color"),M=J(t,"id"),F=x?" "+x:"",C="<div",P="</span></div>";if(k){var W=J(t,"endtime");D='<div><div class="monthly-list-time-start">'+q(k)+"</div>"+(W?'<div class="monthly-list-time-end">'+q(W)+"</div>":"")+"</div>"}if(N.linkCalendarToEventUrl&&T){C="<a"+H("href",T);P="</span></a>"}var U=C+H("data-eventid",M)+H("title",S)+(I?H("style","background:"+I+";color:"+I):""),j="<a"+H("href",T)+H("class","listed-event"+F)+H("data-eventid",M)+(I?H("style","background:"+I):"")+H("title",S)+">"+S+" "+D+"</a>";for(var Y=d;Y<=m;Y++){var L=Y===c;O(A+' *[data-number="'+Y+'"] .monthly-indicator-wrap').append(U+H("class","monthly-event-indicator"+F+(L?"":" monthly-event-continued"))+"><span>"+(L?S:"")+P);O(A+' .monthly-list-item[data-number="'+Y+'"]').addClass("item-has-event").append(j)}}function x(e,a){if(N.events){d(N.events,e,a)}else{var t=N.dataType==="xml"?N.xmlUrl:N.jsonUrl;if(t){var n=String(t).replace("{month}",e).replace("{year}",a);O.get(n,{now:O.now()},function(t){d(t,e,a)},N.dataType).fail(function(){console.error("Monthly.js failed to import "+t+". Please check for the correct path and "+N.dataType+" syntax.")})}}}function d(t,a,n){if(N.dataType==="xml"){O(t).find("event").each(function(t,e){s(e,a,n)})}else if(N.dataType==="json"){O.each(t.monthly,function(t,e){s(e,a,n)})}}function H(t,e){var a=String(e);var n="";for(var r=0;r<a.length;r++){switch(a[r]){case"'":n+="&#39;";break;case'"':n+="&quot;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=a[r]}}return" "+t+'="'+n+'"'}function m(t){var e=t?1:0,a="",n=0;for(n=0;n<6;n++){a+="<div>"+D[n+e]+"</div>"}a+="<div>"+D[t?0:6]+"</div>";O(A).append('<div class="monthly-day-title-wrap">'+a+'</div><div class="monthly-day-wrap"></div>')}function c(){if(navigator.languages&&navigator.languages.length){return navigator.languages[0]}return navigator.language||navigator.browserLanguage}function h(){if(typeof Intl==="undefined"){return["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"]}var t=new Intl.DateTimeFormat(r,{month:o});var e=[];for(var a=0;a<12;a++){var n=new Date(2017,a,1,0,0,0);e[a]=t.format(n)}return e}function I(t){var e=t.getFullYear().toString();var a=(t.getMonth()+1).toString();var n=t.getDate().toString();return String(e+"-"+(a[1]?a:"0"+a[0])+"-"+(n[1]?n:"0"+n[0]))}function f(t,e,a){if(N.useIsoDateFormat){return I(new Date(t,e-1,a,0,0,0))}if(typeof Intl==="undefined"){return e+"/"+a+"/"+t}return new Intl.DateTimeFormat(r).format(new Date(t,e-1,a,0,0,0))}function v(){if(typeof Intl==="undefined"){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var t=new Intl.DateTimeFormat(r,{weekday:l}),e=[],a=0,n=null;for(a=0;a<7;a++){n=new Date(2017,0,a+1,0,0,0);e[a]=t.format(n)}return e}function M(t){var e=O(A+" .monthly-day-wrap"),a=0;for(a=0;a<t;a++){e.prepend(T)}}function J(t,e){return N.dataType==="xml"?O(t).find(e).text():t[e]}function q(t){var e=t.split(":");var a=parseInt(e[0],10);var n="AM";if(a>12){a-=12;n="PM"}else if(a==12){n="PM"}else if(a===0){a=12}return a+":"+String(e[1])+" "+n}function y(){var t=O(A).data("setMonth"),e=O(A).data("setYear"),a=t===12?1:t+1,n=t===12?e+1:e;i(a,n);F()}function u(){var t=O(A).data("setMonth"),e=O(A).data("setYear"),a=t===1?12:t-1,n=t===1?e-1:e;i(a,n);F()}function F(){if(O(A+" .monthly-event-list").is(":visible")){O(A+" .monthly-cal").remove();O(A+" .monthly-header-title").prepend('<a href="#" class="monthly-cal"></a>')}}O(document.body).on("click",A+" .monthly-next",function(t){y();t.preventDefault()});O(document.body).on("click",A+" .monthly-prev",function(t){u();t.preventDefault()});O(document.body).on("click",A+" .monthly-reset",function(t){O(this).remove();i(g,w);F();t.preventDefault();t.stopPropagation()});O(document.body).on("click",A+" .monthly-cal",function(t){O(this).remove();O(A+" .monthly-event-list").css("transform","scale(0)");setTimeout(function(){O(A+" .monthly-event-list").hide()},250);t.preventDefault()});O(document.body).on("click touchstart",A+" .monthly-day",function(t){var e=O(this).data("number");if(N.mode==="event"&&N.eventList){var a=O(A+" .monthly-event-list"),n=O("#"+p+"day"+e).offset(),r=n.top;a.show();a.css("transform");a.css("transform","scale(1)");O(A+' .monthly-list-item[data-number="'+e+'"]').show();a.scrollTop(r);F();if(!N.linkCalendarToEventUrl){t.preventDefault()}}else if(N.mode==="picker"){var o=O(A).data("setMonth"),l=O(A).data("setYear");if(O(this).hasClass("monthly-past-day")&&N.disablePast){t.preventDefault()}else{O(String(N.target)).val(f(l,o,e));if(N.startHidden){O(A).hide()}}t.preventDefault()}});O(document.body).on("click",A+" .listed-event",function(t){var e=O(this).attr("href");if(!e){t.preventDefault()}})}})})(jQuery);
// #END
