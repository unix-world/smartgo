// JS-Script (UM): json-diff.js @ 2022-09-20 09:51:20 +0000
var Smart_JsonDiff=new function(){var y="#-.JSON:OBJECT.-#";var A=0;this.Compare=function(t,e,a){i(t);var r,n;try{r=JSON.parse(e)}catch(e){t.innerHTML='<div style="background:#FF3300; color:#FFFFFF; padding:5px;">ERROR Parsing Diff Json-A</div>';return}try{n=JSON.parse(a)}catch(e){t.innerHTML='<div style="background:#FF3300; color:#FFFFFF; padding:5px;">ERROR Parsing Diff Json-B</div>';return}A=0;F(r,n,y,t,0)};var F=function(e,t,a,r,n){var i=g(e);var s=g(t);var d=document.createElement("span");d.appendChild(document.createTextNode("("+i+")"));d.setAttribute("class","smart_json_data_type");var o=document.createElement("span");o.appendChild(document.createTextNode("("+s+")"));o.setAttribute("class","smart_json_data_type");var l=i==="object"||i==="array"?"":smartJ$Utils.stripslashes(String(e)+" ");var c=s==="object"||s==="array"?"":smartJ$Utils.stripslashes(String(t)+" ");var p=document.createElement("span");p.appendChild(document.createTextNode(a));if(e===undefined){A++;p.setAttribute("class","smart_json_added");p.setAttribute("title","Added");p.appendChild(document.createTextNode(": "+c));p.appendChild(o)}else if(t===undefined){A++;p.setAttribute("class","smart_json_removed");p.setAttribute("title","Removed");p.appendChild(document.createTextNode(": "+l));p.appendChild(d)}else if(i!==s||i!=="object"&&i!=="array"&&l!==c){A++;p.appendChild(document.createTextNode(": "));var u=document.createElement("span");u.setAttribute("class","smart_json_changed");u.setAttribute("title","Changed");u.innerHTML=""+Smart_StrDiff.Compare(l,c);u.appendChild(d);u.appendChild(o);p.appendChild(u)}else{p.appendChild(document.createTextNode(": "+l));p.appendChild(d)}if(i==="object"||i==="array"||s==="object"||s==="array"){var m=[];for(var h in e){if(e.hasOwnProperty(h)){m.push(h)}}for(var h in t){if(t.hasOwnProperty(h)){m.push(h)}}m.sort();var f=document.createElement("ul");if(a!==y){var v=document.createElement("span");v.setAttribute("title","Click to toggle (Open/Close) this node");v.setAttribute("class","openclose");v.innerHTML="&plusmn;";f.appendChild(v);v.onclick=function(e){if(this.parentElement.getAttribute("class")=="closed"){this.parentElement.setAttribute("class","")}else{this.parentElement.setAttribute("class","closed")}}}f.appendChild(p);for(var h=0;h<m.length;h++){if(m[h]===m[h-1]){continue}var C=document.createElement("li");f.appendChild(C);var b=2;if(n===0){b=1}F(e&&e[m[h]],t&&t[m[h]],m[h],C,b)}if(n===1){if(A<=0){f.setAttribute("class","closed")}}r.appendChild(f)}else{r.appendChild(p)}if(n<=1){A=0}};var i=function(e){var t;while(t=e.lastChild){e.removeChild(t)}};var t=function(e){return e&&typeof e==="object"&&e.constructor===Array};var g=function(e){return t(e)?"array":typeof e}};
// #END
